{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Django Nitro \ud83d\ude80","text":"<p>Build reactive Django components with AlpineJS - No JavaScript required</p> <p>Django Nitro is a modern library for building reactive, stateful components in Django applications. Inspired by Django Unicorn and Laravel Livewire, but built on top of AlpineJS and Django Ninja for a lightweight, performant experience.</p> <p> </p>"},{"location":"#why-django-nitro","title":"Why Django Nitro?","text":"<ul> <li>\u2705 Zero JavaScript - Write reactive UIs entirely in Python</li> <li>\u2705 Type-Safe - Full Pydantic integration with generics for bulletproof state management</li> <li>\u2705 Secure by Default - Built-in integrity verification prevents client-side tampering</li> <li>\u2705 Lightweight - AlpineJS (~15KB) vs Morphdom (~50KB)</li> <li>\u2705 Fast - Django Ninja API layer for optimal performance</li> <li>\u2705 DRY - Pre-built CRUD operations and security mixins</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>from pydantic import BaseModel\nfrom nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\nclass CounterState(BaseModel):\n    count: int = 0\n\n@register_component\nclass Counter(NitroComponent[CounterState]):\n    template_name = \"components/counter.html\"\n    state_class = CounterState\n\n    def get_initial_state(self, **kwargs):\n        return CounterState(count=0)\n\n    def increment(self):\n        self.state.count += 1\n        self.success(f\"Count: {self.state.count}\")\n</code></pre> <pre><code>&lt;!-- templates/components/counter.html --&gt;\n&lt;div&gt;\n    &lt;h2 x-text=\"count\"&gt;&lt;/h2&gt;\n    &lt;button @click=\"call('increment')\" :disabled=\"isLoading\"&gt;\n        Increment\n    &lt;/button&gt;\n&lt;/div&gt;\n</code></pre> <p>That's it! No JavaScript required, fully reactive.</p>"},{"location":"#features","title":"Features","text":""},{"location":"#component-types","title":"Component Types","text":"<ul> <li>NitroComponent - Base component for custom logic</li> <li>ModelNitroComponent - Django ORM integration</li> <li>CrudNitroComponent - Pre-built CRUD operations</li> <li>BaseListComponent - Pagination, search, and filters</li> </ul>"},{"location":"#security-mixins-v030","title":"Security Mixins (v0.3.0)","text":"<ul> <li>OwnershipMixin - Filter to current user's data</li> <li>TenantScopedMixin - Multi-tenant isolation</li> <li>PermissionMixin - Custom permission framework</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Installation \u2192 Quick Start \u2192 Examples \u2192</p>"},{"location":"#community","title":"Community","text":"<ul> <li>GitHub - Source code and issues</li> <li>Examples - Live demos and code samples</li> <li>Contributing - Help improve Django Nitro</li> </ul> <p>Built with \u2764\ufe0f for the Django community</p>"},{"location":"api-reference/","title":"API Reference","text":"<p>Complete API reference for Django Nitro v0.3.0+</p>"},{"location":"api-reference/#core-components","title":"Core Components","text":""},{"location":"api-reference/#nitrocomponent","title":"NitroComponent","text":"<p>Base class for all Django Nitro components.</p> <pre><code>from nitro.base import NitroComponent\n</code></pre>"},{"location":"api-reference/#class-attributes","title":"Class Attributes","text":"Attribute Type Required Description <code>template_name</code> <code>str</code> Yes Path to component template <code>state_class</code> <code>Type[BaseModel]</code> Yes Pydantic state model <code>secure_fields</code> <code>list[str]</code> No Fields protected from tampering <code>model</code> <code>Type[Model]</code> No Django model (for ModelNitroComponent)"},{"location":"api-reference/#properties","title":"Properties","text":"Property Type Description <code>request</code> <code>HttpRequest</code> Django request object <code>state</code> <code>BaseModel</code> Current component state <code>current_user</code> <code>User \\| None</code> Authenticated user or None <code>is_authenticated</code> <code>bool</code> True if user is authenticated"},{"location":"api-reference/#methods","title":"Methods","text":""},{"location":"api-reference/#lifecycle-methods","title":"Lifecycle Methods","text":"<pre><code>def get_initial_state(self, **kwargs) -&gt; BaseModel:\n    \"\"\"Create and return initial state.\"\"\"\n    pass\n\ndef refresh(self) -&gt; None:\n    \"\"\"Reload component state.\"\"\"\n    pass\n\ndef render(self) -&gt; str:\n    \"\"\"Render component as HTML.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#message-methods","title":"Message Methods","text":"<pre><code>def success(self, message: str) -&gt; None:\n    \"\"\"Add success message.\"\"\"\n    pass\n\ndef error(self, message: str) -&gt; None:\n    \"\"\"Add error message.\"\"\"\n    pass\n\ndef info(self, message: str) -&gt; None:\n    \"\"\"Add info message.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#security-helpers","title":"Security Helpers","text":"<pre><code>def require_auth(self, message: str = \"Authentication required\") -&gt; bool:\n    \"\"\"Enforce authentication requirement.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#modelnitrocomponent","title":"ModelNitroComponent","text":"<p>Extends <code>NitroComponent</code> with Django ORM integration.</p> <pre><code>from nitro.base import ModelNitroComponent\n</code></pre>"},{"location":"api-reference/#additional-class-attributes","title":"Additional Class Attributes","text":"Attribute Type Required Description <code>model</code> <code>Type[Model]</code> Yes Django model class"},{"location":"api-reference/#additional-methods","title":"Additional Methods","text":"<pre><code>def get_object(self, pk: int) -&gt; Model:\n    \"\"\"Get model instance by primary key.\"\"\"\n    pass\n\ndef refresh(self) -&gt; None:\n    \"\"\"Reload state from database using current id.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#crudnitrocomponent","title":"CrudNitroComponent","text":"<p>Extends <code>ModelNitroComponent</code> with CRUD operations.</p> <pre><code>from nitro.base import CrudNitroComponent\n</code></pre>"},{"location":"api-reference/#state-requirements","title":"State Requirements","text":"<p>Your state class should include:</p> <pre><code>class MyState(BaseModel):\n    items: list[ItemSchema] = []\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n    editing_id: Optional[int] = None\n</code></pre>"},{"location":"api-reference/#pre-built-methods","title":"Pre-built Methods","text":"<pre><code>def create_item(self) -&gt; None:\n    \"\"\"Create item from create_buffer.\"\"\"\n    pass\n\ndef start_edit(self, id: int) -&gt; None:\n    \"\"\"Start editing item.\"\"\"\n    pass\n\ndef save_edit(self) -&gt; None:\n    \"\"\"Save changes from edit_buffer.\"\"\"\n    pass\n\ndef cancel_edit(self) -&gt; None:\n    \"\"\"Cancel editing mode.\"\"\"\n    pass\n\ndef delete_item(self, id: int) -&gt; None:\n    \"\"\"Delete item by ID.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#baselistcomponent","title":"BaseListComponent","text":"<p>Extends <code>CrudNitroComponent</code> with pagination, search, and filters.</p> <pre><code>from nitro.list import BaseListComponent\n</code></pre>"},{"location":"api-reference/#class-attributes_1","title":"Class Attributes","text":"Attribute Type Default Description <code>search_fields</code> <code>list[str]</code> <code>[]</code> Fields to search across <code>per_page</code> <code>int</code> <code>20</code> Items per page <code>order_by</code> <code>str</code> <code>'-id'</code> Default ordering"},{"location":"api-reference/#state-requirements_1","title":"State Requirements","text":"<pre><code>from nitro.list import BaseListState\n\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    # Inherited: search, page, per_page, total_count, num_pages,\n    #            has_next, has_previous, showing_start, showing_end, filters\n\n    # REQUIRED: Override buffer types\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n</code></pre>"},{"location":"api-reference/#methods_1","title":"Methods","text":""},{"location":"api-reference/#pagination","title":"Pagination","text":"<pre><code>def next_page(self) -&gt; None:\n    \"\"\"Go to next page.\"\"\"\n    pass\n\ndef previous_page(self) -&gt; None:\n    \"\"\"Go to previous page.\"\"\"\n    pass\n\ndef go_to_page(self, page: int) -&gt; None:\n    \"\"\"Go to specific page.\"\"\"\n    pass\n\ndef set_per_page(self, per_page: int) -&gt; None:\n    \"\"\"Change items per page.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#search-filters","title":"Search &amp; Filters","text":"<pre><code>def search_items(self, search: str) -&gt; None:\n    \"\"\"Search and reset to page 1.\"\"\"\n    pass\n\ndef set_filters(self, **filters) -&gt; None:\n    \"\"\"Apply filters and reset to page 1.\"\"\"\n    pass\n\ndef clear_filters(self) -&gt; None:\n    \"\"\"Clear all filters and search.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#query-building","title":"Query Building","text":"<pre><code>def get_base_queryset(self, search='', filters=None) -&gt; QuerySet:\n    \"\"\"Override for custom queryset logic.\"\"\"\n    pass\n\ndef apply_search(self, queryset: QuerySet, search: str) -&gt; QuerySet:\n    \"\"\"Apply search across search_fields.\"\"\"\n    pass\n\ndef apply_filters(self, queryset: QuerySet, filters: dict) -&gt; QuerySet:\n    \"\"\"Apply filter dict to queryset.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#security-mixins","title":"Security Mixins","text":""},{"location":"api-reference/#ownershipmixin","title":"OwnershipMixin","text":"<p>Filter querysets to current user's data.</p> <pre><code>from nitro.security import OwnershipMixin\n</code></pre>"},{"location":"api-reference/#class-attributes_2","title":"Class Attributes","text":"Attribute Type Default Description <code>owner_field</code> <code>str</code> <code>'user'</code> ForeignKey field linking to User"},{"location":"api-reference/#methods_2","title":"Methods","text":"<pre><code>def filter_by_owner(self, queryset: QuerySet) -&gt; QuerySet:\n    \"\"\"Filter to current user's items.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#tenantscopedmixin","title":"TenantScopedMixin","text":"<p>Multi-tenant data isolation.</p> <pre><code>from nitro.security import TenantScopedMixin\n</code></pre>"},{"location":"api-reference/#class-attributes_3","title":"Class Attributes","text":"Attribute Type Default Description <code>tenant_field</code> <code>str</code> <code>'organization'</code> ForeignKey field linking to tenant"},{"location":"api-reference/#methods_3","title":"Methods","text":"<pre><code>def get_user_tenant(self) -&gt; Model:\n    \"\"\"REQUIRED: Return current user's tenant.\"\"\"\n    raise NotImplementedError\n\ndef filter_by_tenant(self, queryset: QuerySet) -&gt; QuerySet:\n    \"\"\"Filter to current tenant's items.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#permissionmixin","title":"PermissionMixin","text":"<p>Custom permission logic framework.</p> <pre><code>from nitro.security import PermissionMixin\n</code></pre>"},{"location":"api-reference/#methods_4","title":"Methods","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    \"\"\"REQUIRED: Return True if action allowed.\"\"\"\n    raise NotImplementedError\n\ndef enforce_permission(\n    self,\n    action: str,\n    error_message: Optional[str] = None\n) -&gt; bool:\n    \"\"\"Check permission and show error if denied.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#mixins","title":"Mixins","text":""},{"location":"api-reference/#paginationmixin","title":"PaginationMixin","text":"<p>Django Paginator integration.</p> <pre><code>from nitro.list import PaginationMixin\n</code></pre>"},{"location":"api-reference/#methods_5","title":"Methods","text":"<pre><code>def paginate_queryset(\n    self,\n    queryset: QuerySet,\n    page: int = 1,\n    per_page: int = 20\n) -&gt; dict:\n    \"\"\"\n    Paginate queryset.\n\n    Returns:\n        {\n            'items': [...],\n            'page': 1,\n            'per_page': 20,\n            'total_count': 100,\n            'num_pages': 5,\n            'has_next': True,\n            'has_previous': False,\n            'showing_start': 1,\n            'showing_end': 20\n        }\n    \"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#searchmixin","title":"SearchMixin","text":"<p>Full-text search across fields.</p> <pre><code>from nitro.list import SearchMixin\n</code></pre>"},{"location":"api-reference/#class-attributes_4","title":"Class Attributes","text":"Attribute Type Default Description <code>search_fields</code> <code>list[str]</code> <code>[]</code> Fields to search"},{"location":"api-reference/#methods_6","title":"Methods","text":"<pre><code>def apply_search(self, queryset: QuerySet, search_query: str) -&gt; QuerySet:\n    \"\"\"Apply OR search across search_fields.\"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#filtermixin","title":"FilterMixin","text":"<p>Dynamic queryset filtering.</p> <pre><code>from nitro.list import FilterMixin\n</code></pre>"},{"location":"api-reference/#methods_7","title":"Methods","text":"<pre><code>def apply_filters(self, queryset: QuerySet, filters: dict) -&gt; QuerySet:\n    \"\"\"\n    Apply filters to queryset.\n    Removes empty values and applies remaining filters.\n    \"\"\"\n    pass\n</code></pre>"},{"location":"api-reference/#state-classes","title":"State Classes","text":""},{"location":"api-reference/#baseliststate","title":"BaseListState","text":"<p>Pre-built state for list components with pagination.</p> <pre><code>from nitro.list import BaseListState\n</code></pre>"},{"location":"api-reference/#fields","title":"Fields","text":"Field Type Default Description <code>items</code> <code>list[Any]</code> <code>[]</code> Override with specific type <code>search</code> <code>str</code> <code>\"\"</code> Current search query <code>page</code> <code>int</code> <code>1</code> Current page number <code>per_page</code> <code>int</code> <code>20</code> Items per page <code>total_count</code> <code>int</code> <code>0</code> Total items (all pages) <code>num_pages</code> <code>int</code> <code>0</code> Total number of pages <code>has_next</code> <code>bool</code> <code>False</code> Has next page <code>has_previous</code> <code>bool</code> <code>False</code> Has previous page <code>showing_start</code> <code>int</code> <code>0</code> First item index <code>showing_end</code> <code>int</code> <code>0</code> Last item index <code>filters</code> <code>dict</code> <code>{}</code> Active filters <code>create_buffer</code> <code>Any</code> <code>None</code> Override with specific type <code>edit_buffer</code> <code>Optional[Any]</code> <code>None</code> Override with specific type <code>editing_id</code> <code>Optional[int]</code> <code>None</code> ID being edited"},{"location":"api-reference/#registry","title":"Registry","text":""},{"location":"api-reference/#register_component","title":"register_component","text":"<p>Decorator to register components.</p> <pre><code>from nitro.registry import register_component\n\n@register_component\nclass MyComponent(NitroComponent[MyState]):\n    pass\n</code></pre>"},{"location":"api-reference/#template-variables","title":"Template Variables","text":"<p>All component templates have access to:</p>"},{"location":"api-reference/#state-properties","title":"State Properties","text":"<p>All fields from your state class:</p> <pre><code>&lt;div x-text=\"field_name\"&gt;&lt;/div&gt;\n</code></pre>"},{"location":"api-reference/#built-in-properties","title":"Built-in Properties","text":"Variable Type Description <code>isLoading</code> <code>bool</code> True during action calls <code>errors</code> <code>object</code> Validation errors per field <code>messages</code> <code>array</code> Success/error/info messages"},{"location":"api-reference/#message-structure","title":"Message Structure","text":"<pre><code>{\n  text: \"Message text\",\n  level: \"success\" | \"error\" | \"info\"\n}\n</code></pre>"},{"location":"api-reference/#error-structure","title":"Error Structure","text":"<pre><code>{\n  field_name: \"Error message for this field\"\n}\n</code></pre>"},{"location":"api-reference/#template-methods","title":"Template Methods","text":""},{"location":"api-reference/#call","title":"call()","text":"<p>Call a component action.</p> <pre><code>call(actionName: string, params?: object, file?: File)\n</code></pre> <p>Examples:</p> <pre><code>&lt;!-- Simple call --&gt;\n&lt;button @click=\"call('increment')\"&gt;+&lt;/button&gt;\n\n&lt;!-- With parameters --&gt;\n&lt;button @click=\"call('add', {amount: 5})\"&gt;+5&lt;/button&gt;\n\n&lt;!-- With file upload --&gt;\n&lt;input\n  type=\"file\"\n  @change=\"call('upload', {doc_id: 123}, $event.target.files[0])\"\n&gt;\n</code></pre>"},{"location":"api-reference/#alpinejs-integration","title":"AlpineJS Integration","text":""},{"location":"api-reference/#directives-used","title":"Directives Used","text":"Directive Purpose Example <code>x-text</code> Display text <code>&lt;div x-text=\"count\"&gt;&lt;/div&gt;</code> <code>x-html</code> Display HTML <code>&lt;div x-html=\"content\"&gt;&lt;/div&gt;</code> <code>x-model</code> Two-way binding <code>&lt;input x-model=\"name\"&gt;</code> <code>x-show</code> Toggle visibility <code>&lt;div x-show=\"isLoading\"&gt;</code> <code>x-if</code> Conditional render <code>&lt;template x-if=\"count &gt; 0\"&gt;</code> <code>x-for</code> Loop <code>&lt;template x-for=\"item in items\"&gt;</code> <code>@click</code> Click handler <code>&lt;button @click=\"call('action')\"&gt;</code> <code>:disabled</code> Bind attribute <code>&lt;button :disabled=\"isLoading\"&gt;</code> <code>:class</code> Bind classes <code>&lt;div :class=\"{'active': isActive}\"&gt;</code>"},{"location":"api-reference/#event-modifiers","title":"Event Modifiers","text":"<pre><code>&lt;!-- Prevent default --&gt;\n&lt;form @submit.prevent=\"call('submit')\"&gt;\n\n&lt;!-- Debounce --&gt;\n&lt;input @input.debounce.300ms=\"call('search')\"&gt;\n\n&lt;!-- Key modifiers --&gt;\n&lt;input @keyup.enter=\"call('submit')\"&gt;\n&lt;input @keyup.escape=\"call('cancel')\"&gt;\n\n&lt;!-- Stop propagation --&gt;\n&lt;button @click.stop=\"call('action')\"&gt;\n</code></pre>"},{"location":"api-reference/#configuration","title":"Configuration","text":""},{"location":"api-reference/#settings","title":"Settings","text":"<p>Add to Django settings:</p> <pre><code># settings.py\n\nINSTALLED_APPS = [\n    # ...\n    'nitro',\n]\n\n# Optional: Debug mode for Nitro\nNITRO_DEBUG = DEBUG\n</code></pre>"},{"location":"api-reference/#urls","title":"URLs","text":"<pre><code># urls.py\nfrom nitro.api import api\n\nurlpatterns = [\n    # ...\n    path(\"api/nitro/\", api.urls),\n]\n</code></pre>"},{"location":"api-reference/#static-files","title":"Static Files","text":"<pre><code>&lt;!-- base.html --&gt;\n&lt;script defer src=\"https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js\"&gt;&lt;/script&gt;\n&lt;script src=\"{% static 'nitro/nitro.js' %}\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"api-reference/#debug-mode","title":"Debug Mode","text":"<pre><code>&lt;!-- Enable debug logging --&gt;\n&lt;script&gt;\n    window.NITRO_DEBUG = true;\n&lt;/script&gt;\n&lt;script src=\"{% static 'nitro/nitro.js' %}\"&gt;&lt;/script&gt;\n</code></pre>"},{"location":"api-reference/#type-hints","title":"Type Hints","text":""},{"location":"api-reference/#generic-types","title":"Generic Types","text":"<pre><code>from typing import Generic, TypeVar\nfrom pydantic import BaseModel\n\nT = TypeVar('T', bound=BaseModel)\n\nclass MyComponent(NitroComponent[T]):\n    state_class: Type[T]\n</code></pre>"},{"location":"api-reference/#state-type-hints","title":"State Type Hints","text":"<pre><code>from typing import Optional, List\nfrom pydantic import BaseModel, Field\n\nclass MyState(BaseModel):\n    items: List[ItemSchema] = Field(default_factory=list)\n    selected_id: Optional[int] = None\n    is_loading: bool = False\n</code></pre>"},{"location":"api-reference/#version-information","title":"Version Information","text":"<pre><code>import nitro\n\nprint(nitro.__version__)  # \"0.3.0\"\n</code></pre>"},{"location":"api-reference/#exports","title":"Exports","text":""},{"location":"api-reference/#from-nitrobase","title":"From <code>nitro.base</code>","text":"<pre><code>from nitro.base import (\n    NitroComponent,\n    ModelNitroComponent,\n    CrudNitroComponent,\n)\n</code></pre>"},{"location":"api-reference/#from-nitrolist","title":"From <code>nitro.list</code>","text":"<pre><code>from nitro.list import (\n    BaseListComponent,\n    BaseListState,\n    PaginationMixin,\n    SearchMixin,\n    FilterMixin,\n)\n</code></pre>"},{"location":"api-reference/#from-nitrosecurity","title":"From <code>nitro.security</code>","text":"<pre><code>from nitro.security import (\n    OwnershipMixin,\n    TenantScopedMixin,\n    PermissionMixin,\n)\n</code></pre>"},{"location":"api-reference/#from-nitroregistry","title":"From <code>nitro.registry</code>","text":"<pre><code>from nitro.registry import (\n    register_component,\n)\n</code></pre>"},{"location":"api-reference/#see-also","title":"See Also","text":"<ul> <li>Getting Started</li> <li>Components Guide</li> <li>State Management</li> <li>Actions Guide</li> <li>Security Overview</li> </ul>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to Django Nitro are documented here.</p> <p>For the complete changelog, see CHANGELOG.md on GitHub.</p>"},{"location":"changelog/#030-2025-12-28","title":"[0.3.0] - 2025-12-28","text":""},{"location":"changelog/#added","title":"Added","text":"<ul> <li>Security Mixins for common authentication and authorization patterns</li> <li><code>OwnershipMixin</code> - Filter querysets to show only current user's data</li> <li><code>TenantScopedMixin</code> - Multi-tenant data isolation for SaaS applications</li> <li><code>PermissionMixin</code> - Framework for custom permission logic</li> <li>Request User Helpers in <code>NitroComponent</code> base class</li> <li><code>current_user</code> property - Shortcut to <code>request.user</code> with auth check</li> <li><code>is_authenticated</code> property - Check if user is authenticated</li> <li><code>require_auth()</code> method - Enforce authentication with error message</li> <li>Examples Reorganization</li> <li>Moved <code>example/</code> to <code>examples/property-manager/</code></li> <li>Added <code>examples/counter/</code> - Simple counter example for beginners</li> <li>Each example is now a standalone Django project</li> </ul>"},{"location":"changelog/#changed","title":"Changed","text":"<ul> <li>Reorganized examples into separate standalone projects</li> <li>Updated documentation with security patterns</li> </ul>"},{"location":"changelog/#fixed","title":"Fixed","text":"<ul> <li>Updated GitHub Actions to v4/v5 (artifact-actions deprecation)</li> </ul>"},{"location":"changelog/#020-2025-12-27","title":"[0.2.0] - 2025-12-27","text":""},{"location":"changelog/#added_1","title":"Added","text":"<ul> <li><code>BaseListComponent</code> for CRUD list views with pagination, search, and filters</li> <li><code>PaginationMixin</code> for Django queryset pagination</li> <li><code>SearchMixin</code> for full-text search across configurable fields</li> <li><code>FilterMixin</code> for dynamic queryset filtering</li> <li>Navigation methods: <code>next_page()</code>, <code>previous_page()</code>, <code>go_to_page()</code>, <code>set_per_page()</code></li> </ul>"},{"location":"changelog/#010-initial-release","title":"[0.1.0] - Initial Release","text":""},{"location":"changelog/#added_2","title":"Added","text":"<ul> <li><code>NitroComponent</code> base class for reactive components</li> <li><code>ModelNitroComponent</code> for Django ORM integration</li> <li><code>CrudNitroComponent</code> with pre-built CRUD operations</li> <li>AlpineJS integration</li> <li>Django Ninja API endpoint</li> <li>Pydantic-based state validation</li> <li>Built-in integrity verification</li> <li>File upload support</li> </ul> <p>View full changelog \u2192</p>"},{"location":"contributing/","title":"Contributing to Django Nitro","text":"<p>Thank you for your interest in contributing to Django Nitro! \ud83c\udf89</p>"},{"location":"contributing/#quick-links","title":"Quick Links","text":"<ul> <li>Full Contributing Guide</li> <li>Code of Conduct</li> <li>Report Issues</li> </ul>"},{"location":"contributing/#development-setup","title":"Development Setup","text":"<pre><code># Clone the repository\ngit clone https://github.com/django-nitro/django-nitro.git\ncd django-nitro\n\n# Create virtual environment\npython -m venv env\nsource env/bin/activate  # Windows: env\\Scripts\\activate\n\n# Install in development mode\npip install -e \".[dev]\"\n\n# Run tests\npytest\n\n# Run linters\nblack nitro/\nisort nitro/\nmypy nitro/\n</code></pre>"},{"location":"contributing/#how-to-contribute","title":"How to Contribute","text":""},{"location":"contributing/#1-report-bugs","title":"1. Report Bugs","text":"<p>Open an issue with: - Clear description - Steps to reproduce - Expected vs actual behavior - Django Nitro version</p>"},{"location":"contributing/#2-suggest-features","title":"2. Suggest Features","text":"<p>Start a discussion to propose new features.</p>"},{"location":"contributing/#3-submit-pull-requests","title":"3. Submit Pull Requests","text":"<pre><code># Create a feature branch\ngit checkout -b feature/your-feature-name\n\n# Make your changes\n# ... code ...\n\n# Run tests\npytest\n\n# Commit with descriptive message\ngit commit -m \"Add: Description of your changes\"\n\n# Push and create PR\ngit push origin feature/your-feature-name\n</code></pre>"},{"location":"contributing/#contribution-guidelines","title":"Contribution Guidelines","text":"<p>\u2705 DO: - Add tests for new features - Update documentation - Follow existing code style - Keep PRs focused and small</p> <p>\u274c DON'T: - Submit large, unfocused PRs - Break existing tests - Ignore linter warnings - Change unrelated code</p>"},{"location":"contributing/#code-style","title":"Code Style","text":"<ul> <li>Black for formatting</li> <li>isort for imports</li> <li>Type hints required</li> <li>Docstrings for public APIs</li> </ul>"},{"location":"contributing/#testing","title":"Testing","text":"<pre><code># Run all tests\npytest\n\n# Run with coverage\npytest --cov=nitro\n\n# Run specific test\npytest tests/test_base.py::test_component_render\n</code></pre>"},{"location":"contributing/#documentation","title":"Documentation","text":"<p>Documentation lives in <code>docs/</code> and uses MkDocs Material.</p> <pre><code># Install docs dependencies\npip install mkdocs-material\n\n# Serve docs locally\nmkdocs serve\n\n# Build docs\nmkdocs build\n</code></pre>"},{"location":"contributing/#questions","title":"Questions?","text":"<ul> <li>GitHub Discussions</li> <li>Read the full guide</li> </ul> <p>Thank you for contributing! \ud83d\ude4f</p>"},{"location":"components/base-list-component/","title":"BaseListComponent","text":"<p><code>BaseListComponent</code> extends <code>CrudNitroComponent</code> with built-in pagination, search, and filtering capabilities. It's the most feature-rich component for managing large lists of data with all CRUD operations.</p>"},{"location":"components/base-list-component/#when-to-use","title":"When to Use","text":"<p>Use <code>BaseListComponent</code> when you need:</p> <ul> <li>Paginated lists with large datasets</li> <li>Full-text search across multiple fields</li> <li>Dynamic filtering by various criteria</li> <li>All CRUD operations plus list management</li> <li>Professional admin interfaces</li> </ul> <p>Examples: - Product catalog with search and filters - User management dashboard - Invoice list with pagination - Any large dataset requiring search and filters</p>"},{"location":"components/base-list-component/#key-features","title":"Key Features","text":"<ul> <li>Pagination - Django Paginator integration with page navigation</li> <li>Search - Full-text search across configurable fields</li> <li>Filters - Dynamic queryset filtering</li> <li>All CRUD Operations - Inherited from CrudNitroComponent</li> <li>Rich Metadata - total_count, showing_start, showing_end for UX</li> <li>Automatic Page Reset - When search/filters change</li> </ul>"},{"location":"components/base-list-component/#basic-structure","title":"Basic Structure","text":"<pre><code>from pydantic import BaseModel, Field\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\nfrom typing import Optional\nfrom myapp.models import Product\n\n# Item schema (with id)\nclass ProductSchema(BaseModel):\n    id: int\n    name: str\n    price: float\n    is_active: bool\n\n    class Config:\n        from_attributes = True\n\n# Form schema (no id)\nclass ProductFormSchema(BaseModel):\n    name: str = \"\"\n    price: float = 0.0\n\n# State schema - inherits pagination fields from BaseListState\nclass ProductListState(BaseListState):\n    items: list[ProductSchema] = []\n\n    # IMPORTANT: Must override buffer types\n    create_buffer: ProductFormSchema = Field(default_factory=ProductFormSchema)\n    edit_buffer: Optional[ProductFormSchema] = None\n\n# Component\n@register_component\nclass ProductList(BaseListComponent[ProductListState]):\n    template_name = \"components/product_list.html\"\n    state_class = ProductListState\n    model = Product\n\n    # Configure search and pagination\n    search_fields = ['name', 'description']\n    per_page = 25\n    order_by = '-created_at'\n</code></pre>"},{"location":"components/base-list-component/#configuration-attributes","title":"Configuration Attributes","text":""},{"location":"components/base-list-component/#search_fields-liststr","title":"<code>search_fields: list[str]</code>","text":"<p>Fields to search across using Django Q objects (OR logic).</p> <pre><code>class ProductList(BaseListComponent[ProductListState]):\n    search_fields = ['name', 'description', 'sku']\n    # Searches: name LIKE %query% OR description LIKE %query% OR sku LIKE %query%\n</code></pre>"},{"location":"components/base-list-component/#per_page-int","title":"<code>per_page: int</code>","text":"<p>Default number of items per page (default: 20).</p> <pre><code>class ProductList(BaseListComponent[ProductListState]):\n    per_page = 50  # Show 50 items per page\n</code></pre>"},{"location":"components/base-list-component/#order_by-str","title":"<code>order_by: str</code>","text":"<p>Default ordering for queryset.</p> <pre><code>class ProductList(BaseListComponent[ProductListState]):\n    order_by = '-created_at'  # Newest first\n    # order_by = 'name'  # Alphabetical\n    # order_by = '-price'  # Highest price first\n</code></pre>"},{"location":"components/base-list-component/#state-structure","title":"State Structure","text":"<p><code>BaseListState</code> provides built-in fields for pagination and search:</p> <pre><code>from nitro.list import BaseListState\n\nclass MyListState(BaseListState):\n    # Your items list (required)\n    items: list[ItemSchema] = []\n\n    # Inherited from BaseListState:\n    search: str = \"\"              # Current search query\n    page: int = 1                 # Current page number\n    per_page: int = 20            # Items per page\n    total_count: int = 0          # Total items (all pages)\n    num_pages: int = 0            # Total number of pages\n    has_next: bool = False        # Has next page?\n    has_previous: bool = False    # Has previous page?\n    showing_start: int = 0        # First item index on current page\n    showing_end: int = 0          # Last item index on current page\n    filters: dict = {}            # Active filters\n\n    # CRUD buffers (required - must override types!)\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n    editing_id: Optional[int] = None\n</code></pre> <p>Important: You MUST override buffer types explicitly because <code>BaseListState</code> uses <code>Any</code>:</p> <pre><code># \u274c Wrong - type inference broken\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    # Using inherited buffers (type Any)\n\n# \u2705 Correct - explicit types\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n</code></pre>"},{"location":"components/base-list-component/#pre-built-methods","title":"Pre-built Methods","text":""},{"location":"components/base-list-component/#pagination","title":"Pagination","text":""},{"location":"components/base-list-component/#next_page-none","title":"<code>next_page() -&gt; None</code>","text":"<p>Navigate to next page.</p> <pre><code>&lt;button @click=\"call('next_page')\" :disabled=\"!has_next\"&gt;Next&lt;/button&gt;\n</code></pre>"},{"location":"components/base-list-component/#previous_page-none","title":"<code>previous_page() -&gt; None</code>","text":"<p>Navigate to previous page.</p> <pre><code>&lt;button @click=\"call('previous_page')\" :disabled=\"!has_previous\"&gt;Previous&lt;/button&gt;\n</code></pre>"},{"location":"components/base-list-component/#go_to_pagepage-int-none","title":"<code>go_to_page(page: int) -&gt; None</code>","text":"<p>Navigate to specific page.</p> <pre><code>&lt;button @click=\"call('go_to_page', {page: 1})\"&gt;First&lt;/button&gt;\n&lt;button @click=\"call('go_to_page', {page: num_pages})\"&gt;Last&lt;/button&gt;\n</code></pre>"},{"location":"components/base-list-component/#set_per_pageper_page-int-none","title":"<code>set_per_page(per_page: int) -&gt; None</code>","text":"<p>Change items per page.</p> <pre><code>&lt;select @change=\"call('set_per_page', {per_page: parseInt($event.target.value)})\"&gt;\n    &lt;option value=\"10\"&gt;10&lt;/option&gt;\n    &lt;option value=\"25\"&gt;25&lt;/option&gt;\n    &lt;option value=\"50\"&gt;50&lt;/option&gt;\n    &lt;option value=\"100\"&gt;100&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>"},{"location":"components/base-list-component/#search","title":"Search","text":""},{"location":"components/base-list-component/#search_itemssearch-str-none","title":"<code>search_items(search: str) -&gt; None</code>","text":"<p>Performs search and resets to page 1.</p> <pre><code>&lt;input\n    x-model=\"search\"\n    @input.debounce.300ms=\"call('search_items', {search: $event.target.value})\"\n    placeholder=\"Search...\"\n&gt;\n</code></pre>"},{"location":"components/base-list-component/#filters","title":"Filters","text":""},{"location":"components/base-list-component/#set_filtersfilters-none","title":"<code>set_filters(**filters) -&gt; None</code>","text":"<p>Applies filters and resets to page 1.</p> <pre><code>&lt;select @change=\"call('set_filters', {is_active: $event.target.value === 'true'})\"&gt;\n    &lt;option value=\"\"&gt;All&lt;/option&gt;\n    &lt;option value=\"true\"&gt;Active&lt;/option&gt;\n    &lt;option value=\"false\"&gt;Inactive&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>"},{"location":"components/base-list-component/#clear_filters-none","title":"<code>clear_filters() -&gt; None</code>","text":"<p>Removes all filters and search.</p> <pre><code>&lt;button @click=\"call('clear_filters')\"&gt;Clear All&lt;/button&gt;\n</code></pre>"},{"location":"components/base-list-component/#refresh-override","title":"refresh() Override","text":"<p><code>BaseListComponent</code> automatically handles pagination, search, and filters in <code>refresh()</code>. You can override for custom logic:</p> <pre><code>def refresh(self):\n    # Custom queryset logic\n    qs = self.get_base_queryset(\n        search=self.state.search,\n        filters=self.state.filters\n    )\n\n    # Pagination handled automatically\n    # Don't need to manually paginate\n</code></pre>"},{"location":"components/base-list-component/#customizing-queryset","title":"Customizing Queryset","text":""},{"location":"components/base-list-component/#override-get_base_queryset","title":"Override <code>get_base_queryset()</code>","text":"<p>Customize the base queryset before pagination/search/filters are applied:</p> <pre><code>@register_component\nclass ProductList(BaseListComponent[ProductListState]):\n    search_fields = ['name']\n    per_page = 25\n    order_by = '-created_at'\n\n    def get_base_queryset(self, search='', filters=None):\n        # Start with base queryset\n        qs = self.model.objects.filter(owner=self.current_user)\n\n        # Apply search (uses self.search_fields)\n        if search:\n            qs = self.apply_search(qs, search)\n\n        # Apply filters\n        if filters:\n            qs = self.apply_filters(qs, filters)\n\n        # Add optimizations\n        qs = qs.select_related('category').prefetch_related('tags')\n\n        # Apply ordering\n        return qs.order_by(self.order_by)\n</code></pre>"},{"location":"components/base-list-component/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom pydantic import BaseModel, Field, validator\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Django Model\nclass Company(models.Model):\n    name = models.CharField(max_length=200)\n    email = models.EmailField()\n    phone = models.CharField(max_length=20)\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    owner = models.ForeignKey('auth.User', on_delete=models.CASCADE)\n\n    class Meta:\n        ordering = ['-created_at']\n        verbose_name_plural = \"Companies\"\n\n# Item schema\nclass CompanySchema(BaseModel):\n    id: int\n    name: str\n    email: str\n    phone: str\n    is_active: bool\n\n    class Config:\n        from_attributes = True\n\n# Form schema\nclass CompanyFormSchema(BaseModel):\n    name: str = \"\"\n    email: str = \"\"\n    phone: str = \"\"\n\n    @validator('name')\n    def name_required(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Name is required')\n        return v.strip()\n\n# State schema\nclass CompanyListState(BaseListState):\n    items: list[CompanySchema] = []\n\n    # Must override buffer types\n    create_buffer: CompanyFormSchema = Field(default_factory=CompanyFormSchema)\n    edit_buffer: Optional[CompanyFormSchema] = None\n\n# Component\n@register_component\nclass CompanyList(BaseListComponent[CompanyListState]):\n    template_name = \"components/company_list.html\"\n    state_class = CompanyListState\n    model = Company\n\n    # Configuration\n    search_fields = ['name', 'email', 'phone']\n    per_page = 25\n    order_by = '-created_at'\n\n    def get_base_queryset(self, search='', filters=None):\n        # Filter by current user\n        qs = self.model.objects.filter(owner=self.current_user)\n\n        # Apply search\n        if search:\n            qs = self.apply_search(qs, search)\n\n        # Apply filters\n        if filters:\n            # Handle boolean filter\n            if 'is_active' in filters:\n                qs = qs.filter(is_active=filters['is_active'])\n\n        return qs.order_by(self.order_by)\n\n    # Override create to add owner\n    def create_item(self):\n        if not self.require_auth():\n            return\n\n        try:\n            company = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                owner=self.current_user\n            )\n            self.refresh()\n            self.success(f\"Created {company.name}\")\n        except Exception as e:\n            logger.exception(\"Create failed\")\n            self.error(\"Failed to create company\")\n\n    # Custom action: toggle active status\n    def toggle_active(self, id: int):\n        try:\n            company = self.model.objects.get(id=id, owner=self.current_user)\n            company.is_active = not company.is_active\n            company.save()\n            self.refresh()\n\n            status = \"activated\" if company.is_active else \"deactivated\"\n            self.success(f\"{company.name} {status}\")\n        except self.model.DoesNotExist:\n            self.error(\"Company not found\")\n</code></pre> <p>Template:</p> <pre><code>&lt;div class=\"company-list\"&gt;\n    &lt;!-- Header with search --&gt;\n    &lt;div class=\"list-header\"&gt;\n        &lt;h2&gt;Companies&lt;/h2&gt;\n\n        &lt;div class=\"search-bar\"&gt;\n            &lt;input\n                x-model=\"search\"\n                @input.debounce.300ms=\"call('search_items', {search: $el.value})\"\n                placeholder=\"Search companies...\"\n                type=\"search\"\n            &gt;\n            &lt;button @click=\"call('clear_filters')\" x-show=\"search || Object.keys(filters).length &gt; 0\"&gt;\n                Clear\n            &lt;/button&gt;\n        &lt;/div&gt;\n\n        &lt;!-- Filters --&gt;\n        &lt;div class=\"filters\"&gt;\n            &lt;select @change=\"call('set_filters', {is_active: $el.value === '' ? null : $el.value === 'true'})\"&gt;\n                &lt;option value=\"\"&gt;All Companies&lt;/option&gt;\n                &lt;option value=\"true\"&gt;Active Only&lt;/option&gt;\n                &lt;option value=\"false\"&gt;Inactive Only&lt;/option&gt;\n            &lt;/select&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Results info --&gt;\n    &lt;div class=\"results-info\" x-show=\"total_count &gt; 0\"&gt;\n        Showing &lt;strong x-text=\"showing_start\"&gt;&lt;/strong&gt;\n        - &lt;strong x-text=\"showing_end\"&gt;&lt;/strong&gt;\n        of &lt;strong x-text=\"total_count\"&gt;&lt;/strong&gt; companies\n    &lt;/div&gt;\n\n    &lt;!-- Create form --&gt;\n    &lt;div class=\"create-form\"&gt;\n        &lt;h3&gt;Add Company&lt;/h3&gt;\n        &lt;input x-model=\"create_buffer.name\" placeholder=\"Company name\" type=\"text\"&gt;\n        &lt;input x-model=\"create_buffer.email\" placeholder=\"Email\" type=\"email\"&gt;\n        &lt;input x-model=\"create_buffer.phone\" placeholder=\"Phone\" type=\"tel\"&gt;\n        &lt;button @click=\"call('create_item')\" :disabled=\"isLoading\"&gt;\n            Add Company\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Companies table --&gt;\n    &lt;table class=\"data-table\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Email&lt;/th&gt;\n                &lt;th&gt;Phone&lt;/th&gt;\n                &lt;th&gt;Status&lt;/th&gt;\n                &lt;th&gt;Actions&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;template x-for=\"company in items\" :key=\"company.id\"&gt;\n                &lt;tr :class=\"{'inactive': !company.is_active}\"&gt;\n                    &lt;!-- Normal view --&gt;\n                    &lt;template x-if=\"editing_id !== company.id\"&gt;\n                        &lt;td x-text=\"company.name\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"company.email\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"company.phone\"&gt;&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;span\n                                :class=\"company.is_active ? 'badge-success' : 'badge-warning'\"\n                                x-text=\"company.is_active ? 'Active' : 'Inactive'\"\n                            &gt;&lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td class=\"actions\"&gt;\n                            &lt;button @click=\"call('start_edit', {id: company.id})\" class=\"btn-sm\"&gt;\n                                Edit\n                            &lt;/button&gt;\n                            &lt;button @click=\"call('toggle_active', {id: company.id})\" class=\"btn-sm\"&gt;\n                                &lt;span x-text=\"company.is_active ? 'Deactivate' : 'Activate'\"&gt;&lt;/span&gt;\n                            &lt;/button&gt;\n                            &lt;button\n                                @click=\"confirm('Delete?') &amp;&amp; call('delete_item', {id: company.id})\"\n                                class=\"btn-sm btn-danger\"\n                            &gt;\n                                Delete\n                            &lt;/button&gt;\n                        &lt;/td&gt;\n                    &lt;/template&gt;\n\n                    &lt;!-- Edit view --&gt;\n                    &lt;template x-if=\"editing_id === company.id &amp;&amp; edit_buffer\"&gt;\n                        &lt;td colspan=\"5\"&gt;\n                            &lt;div class=\"inline-edit\"&gt;\n                                &lt;input x-model=\"edit_buffer.name\" type=\"text\"&gt;\n                                &lt;input x-model=\"edit_buffer.email\" type=\"email\"&gt;\n                                &lt;input x-model=\"edit_buffer.phone\" type=\"tel\"&gt;\n                                &lt;button @click=\"call('save_edit')\"&gt;Save&lt;/button&gt;\n                                &lt;button @click=\"call('cancel_edit')\"&gt;Cancel&lt;/button&gt;\n                            &lt;/div&gt;\n                        &lt;/td&gt;\n                    &lt;/template&gt;\n                &lt;/tr&gt;\n            &lt;/template&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n\n    &lt;!-- Empty state --&gt;\n    &lt;div x-show=\"items.length === 0\" class=\"empty-state\"&gt;\n        &lt;p x-show=\"!search &amp;&amp; Object.keys(filters).length === 0\"&gt;\n            No companies yet. Add one above!\n        &lt;/p&gt;\n        &lt;p x-show=\"search || Object.keys(filters).length &gt; 0\"&gt;\n            No companies match your search or filters.\n        &lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Pagination --&gt;\n    &lt;div class=\"pagination\" x-show=\"num_pages &gt; 1\"&gt;\n        &lt;button\n            @click=\"call('previous_page')\"\n            :disabled=\"!has_previous || isLoading\"\n        &gt;\n            Previous\n        &lt;/button&gt;\n\n        &lt;span class=\"page-info\"&gt;\n            Page &lt;strong x-text=\"page\"&gt;&lt;/strong&gt; of &lt;strong x-text=\"num_pages\"&gt;&lt;/strong&gt;\n        &lt;/span&gt;\n\n        &lt;button\n            @click=\"call('next_page')\"\n            :disabled=\"!has_next || isLoading\"\n        &gt;\n            Next\n        &lt;/button&gt;\n\n        &lt;!-- Items per page --&gt;\n        &lt;select\n            x-model.number=\"per_page\"\n            @change=\"call('set_per_page', {per_page: parseInt($el.value)})\"\n        &gt;\n            &lt;option value=\"10\"&gt;10 per page&lt;/option&gt;\n            &lt;option value=\"25\"&gt;25 per page&lt;/option&gt;\n            &lt;option value=\"50\"&gt;50 per page&lt;/option&gt;\n            &lt;option value=\"100\"&gt;100 per page&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div :class=\"'alert alert-' + msg.level\" x-text=\"msg.text\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"components/base-list-component/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"components/base-list-component/#custom-filtering","title":"Custom Filtering","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    qs = self.model.objects.all()\n\n    # Custom filter logic\n    if filters:\n        # Handle date range\n        if 'date_from' in filters and filters['date_from']:\n            qs = qs.filter(created_at__gte=filters['date_from'])\n\n        if 'date_to' in filters and filters['date_to']:\n            qs = qs.filter(created_at__lte=filters['date_to'])\n\n        # Handle multi-select\n        if 'categories' in filters and filters['categories']:\n            qs = qs.filter(category_id__in=filters['categories'])\n\n    # Apply search\n    if search:\n        qs = self.apply_search(qs, search)\n\n    return qs.order_by(self.order_by)\n</code></pre>"},{"location":"components/base-list-component/#annotations","title":"Annotations","text":"<pre><code>from django.db.models import Count, Sum\n\ndef get_base_queryset(self, search='', filters=None):\n    qs = self.model.objects.annotate(\n        order_count=Count('orders'),\n        total_revenue=Sum('orders__total')\n    )\n\n    if search:\n        qs = self.apply_search(qs, search)\n\n    return qs.order_by(self.order_by)\n</code></pre>"},{"location":"components/base-list-component/#performance-optimization","title":"Performance Optimization","text":""},{"location":"components/base-list-component/#1-use-select_related-and-prefetch_related","title":"1. Use select_related and prefetch_related","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    qs = self.model.objects.select_related(\n        'category',\n        'owner'\n    ).prefetch_related(\n        'tags',\n        'images'\n    )\n\n    # Apply search and filters...\n    return qs.order_by(self.order_by)\n</code></pre>"},{"location":"components/base-list-component/#2-limit-search-results","title":"2. Limit Search Results","text":"<pre><code>def search_items(self, search: str):\n    self.state.search = search\n    self.state.page = 1\n\n    # Limit total results\n    max_results = 1000\n    # Pagination will handle the rest\n</code></pre>"},{"location":"components/base-list-component/#3-database-indexes","title":"3. Database Indexes","text":"<p>Ensure indexed fields for search and filters:</p> <pre><code>class Product(models.Model):\n    name = models.CharField(max_length=200, db_index=True)  # Indexed\n    sku = models.CharField(max_length=50, db_index=True)    # Indexed\n    created_at = models.DateTimeField(auto_now_add=True, db_index=True)\n\n    class Meta:\n        indexes = [\n            models.Index(fields=['name', 'sku']),  # Composite index\n        ]\n</code></pre>"},{"location":"components/base-list-component/#best-practices","title":"Best Practices","text":""},{"location":"components/base-list-component/#1-always-override-buffer-types","title":"1. Always Override Buffer Types","text":"<pre><code># \u2705 Correct\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n</code></pre>"},{"location":"components/base-list-component/#2-use-debouncing-for-search","title":"2. Use Debouncing for Search","text":"<pre><code>&lt;!-- \u2705 Debounce to avoid too many requests --&gt;\n&lt;input\n    x-model=\"search\"\n    @input.debounce.300ms=\"call('search_items', {search: $el.value})\"\n&gt;\n</code></pre>"},{"location":"components/base-list-component/#3-show-results-info","title":"3. Show Results Info","text":"<pre><code>&lt;!-- \u2705 Help users understand results --&gt;\n&lt;div x-show=\"total_count &gt; 0\"&gt;\n    Showing &lt;span x-text=\"showing_start\"&gt;&lt;/span&gt;\n    - &lt;span x-text=\"showing_end\"&gt;&lt;/span&gt;\n    of &lt;span x-text=\"total_count\"&gt;&lt;/span&gt; results\n&lt;/div&gt;\n</code></pre>"},{"location":"components/base-list-component/#4-handle-empty-states","title":"4. Handle Empty States","text":"<pre><code>&lt;!-- \u2705 Different messages for empty vs no results --&gt;\n&lt;div x-show=\"items.length === 0\"&gt;\n    &lt;p x-show=\"!search\"&gt;No items yet.&lt;/p&gt;\n    &lt;p x-show=\"search\"&gt;No items match your search.&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"components/base-list-component/#see-also","title":"See Also","text":"<ul> <li>CrudNitroComponent - Base CRUD operations</li> <li>OwnershipMixin - Filter by ownership</li> <li>State Management - Managing state</li> </ul>"},{"location":"components/crud-nitro-component/","title":"CrudNitroComponent","text":"<p><code>CrudNitroComponent</code> extends <code>ModelNitroComponent</code> with pre-built Create, Read, Update, and Delete operations. It's designed for list views with inline editing and provides all the scaffolding for managing collections of model instances.</p>"},{"location":"components/crud-nitro-component/#when-to-use","title":"When to Use","text":"<p>Use <code>CrudNitroComponent</code> when you need:</p> <ul> <li>List views with create/edit/delete functionality</li> <li>Inline editing of items in a table or list</li> <li>Standard CRUD operations without custom logic</li> <li>Quick prototyping of admin-style interfaces</li> </ul> <p>Examples: - Task list with add/edit/delete - Product catalog management - User management panel - Any list-based CRUD interface</p>"},{"location":"components/crud-nitro-component/#basic-structure","title":"Basic Structure","text":"<pre><code>from pydantic import BaseModel, Field\nfrom nitro.base import CrudNitroComponent\nfrom nitro.registry import register_component\nfrom typing import Optional\nfrom myapp.models import Task\n\n# Schema for a single item (with id)\nclass TaskSchema(BaseModel):\n    id: int\n    title: str\n    completed: bool = False\n\n    class Config:\n        from_attributes = True\n\n# Schema for creating/editing (no id required)\nclass TaskFormSchema(BaseModel):\n    title: str = \"\"\n    completed: bool = False\n\n# State schema for the component\nclass TaskListState(BaseModel):\n    tasks: list[TaskSchema] = []\n    create_buffer: TaskFormSchema = Field(default_factory=TaskFormSchema)\n    edit_buffer: Optional[TaskFormSchema] = None\n    editing_id: Optional[int] = None\n\n# Component\n@register_component\nclass TaskList(CrudNitroComponent[TaskListState]):\n    template_name = \"components/task_list.html\"\n    state_class = TaskListState\n    model = Task\n\n    def get_initial_state(self, **kwargs):\n        return TaskListState(\n            tasks=[TaskSchema.model_validate(t) for t in Task.objects.all()]\n        )\n\n    def refresh(self):\n        self.state.tasks = [\n            TaskSchema.model_validate(t)\n            for t in Task.objects.all().order_by('-id')\n        ]\n</code></pre>"},{"location":"components/crud-nitro-component/#pre-built-methods","title":"Pre-built Methods","text":"<p><code>CrudNitroComponent</code> provides these methods out of the box:</p>"},{"location":"components/crud-nitro-component/#create","title":"Create","text":""},{"location":"components/crud-nitro-component/#create_item-none","title":"<code>create_item() -&gt; None</code>","text":"<p>Creates a new item from <code>state.create_buffer</code>.</p> <p>Behavior: 1. Validates <code>create_buffer</code> data 2. Creates new model instance 3. Calls <code>refresh()</code> to reload list 4. Clears <code>create_buffer</code> 5. Shows success message</p> <p>Example usage in template: <pre><code>&lt;input x-model=\"create_buffer.title\" placeholder=\"New task...\"&gt;\n&lt;button @click=\"call('create_item')\"&gt;Add&lt;/button&gt;\n</code></pre></p> <p>Override for custom logic: <pre><code>def create_item(self):\n    # Add owner automatically\n    obj = self.model.objects.create(\n        **self.state.create_buffer.dict(),\n        owner=self.current_user\n    )\n    self.refresh()\n    self.success(f\"Created {obj.title}\")\n</code></pre></p>"},{"location":"components/crud-nitro-component/#update","title":"Update","text":""},{"location":"components/crud-nitro-component/#start_editid-int-none","title":"<code>start_edit(id: int) -&gt; None</code>","text":"<p>Initiates editing mode for an item.</p> <p>Behavior: 1. Finds item by ID in state 2. Copies item data to <code>edit_buffer</code> 3. Sets <code>editing_id</code> to the item's ID</p> <p>Example usage: <pre><code>&lt;button @click=\"call('start_edit', {id: task.id})\"&gt;Edit&lt;/button&gt;\n</code></pre></p>"},{"location":"components/crud-nitro-component/#save_edit-none","title":"<code>save_edit() -&gt; None</code>","text":"<p>Saves changes from <code>edit_buffer</code> to database.</p> <p>Behavior: 1. Gets model instance by <code>editing_id</code> 2. Updates fields from <code>edit_buffer</code> 3. Calls <code>refresh()</code> to reload list 4. Clears <code>editing_id</code> and <code>edit_buffer</code> 5. Shows success message</p> <p>Example usage: <pre><code>&lt;button @click=\"call('save_edit')\"&gt;Save&lt;/button&gt;\n</code></pre></p>"},{"location":"components/crud-nitro-component/#cancel_edit-none","title":"<code>cancel_edit() -&gt; None</code>","text":"<p>Cancels editing mode without saving.</p> <p>Behavior: 1. Clears <code>editing_id</code> 2. Clears <code>edit_buffer</code></p> <p>Example usage: <pre><code>&lt;button @click=\"call('cancel_edit')\"&gt;Cancel&lt;/button&gt;\n</code></pre></p>"},{"location":"components/crud-nitro-component/#delete","title":"Delete","text":""},{"location":"components/crud-nitro-component/#delete_itemid-int-none","title":"<code>delete_item(id: int) -&gt; None</code>","text":"<p>Deletes an item by ID.</p> <p>Behavior: 1. Gets model instance by ID 2. Deletes from database 3. Calls <code>refresh()</code> to reload list 4. Shows success message</p> <p>Example usage: <pre><code>&lt;button @click=\"confirm('Delete?') &amp;&amp; call('delete_item', {id: task.id})\"&gt;\n    Delete\n&lt;/button&gt;\n</code></pre></p> <p>Override for soft delete: <pre><code>def delete_item(self, id: int):\n    obj = self.model.objects.get(id=id)\n    obj.is_deleted = True  # Soft delete\n    obj.save()\n    self.refresh()\n    self.success(\"Item archived\")\n</code></pre></p>"},{"location":"components/crud-nitro-component/#state-structure","title":"State Structure","text":"<p>Your state class should include these fields:</p> <pre><code>class MyListState(BaseModel):\n    # List of items (required)\n    items: list[ItemSchema] = []\n\n    # Create buffer (required)\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n\n    # Edit buffer (required)\n    edit_buffer: Optional[ItemFormSchema] = None\n\n    # Currently editing ID (required)\n    editing_id: Optional[int] = None\n\n    # Any additional fields you need\n    filter_active: bool = True\n    sort_by: str = \"name\"\n</code></pre>"},{"location":"components/crud-nitro-component/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom pydantic import BaseModel, Field, validator\nfrom nitro.base import CrudNitroComponent\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Django Model\nclass Todo(models.Model):\n    title = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    completed = models.BooleanField(default=False)\n    priority = models.IntegerField(default=0)\n    created_at = models.DateTimeField(auto_now_add=True)\n    owner = models.ForeignKey('auth.User', on_delete=models.CASCADE)\n\n    class Meta:\n        ordering = ['-created_at']\n\n# Item schema (with id)\nclass TodoSchema(BaseModel):\n    id: int\n    title: str\n    description: str\n    completed: bool\n    priority: int\n\n    class Config:\n        from_attributes = True\n\n# Form schema (no id)\nclass TodoFormSchema(BaseModel):\n    title: str = \"\"\n    description: str = \"\"\n    completed: bool = False\n    priority: int = 0\n\n    @validator('title')\n    def title_not_empty(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Title is required')\n        return v.strip()\n\n# State schema\nclass TodoListState(BaseModel):\n    todos: list[TodoSchema] = []\n    create_buffer: TodoFormSchema = Field(default_factory=TodoFormSchema)\n    edit_buffer: Optional[TodoFormSchema] = None\n    editing_id: Optional[int] = None\n\n# Component\n@register_component\nclass TodoList(CrudNitroComponent[TodoListState]):\n    template_name = \"components/todo_list.html\"\n    state_class = TodoListState\n    model = Todo\n\n    def get_initial_state(self, **kwargs):\n        # Filter by current user\n        todos = self.model.objects.filter(owner=self.request.user)\n        return TodoListState(\n            todos=[TodoSchema.model_validate(t) for t in todos]\n        )\n\n    def refresh(self):\n        todos = self.model.objects.filter(owner=self.request.user)\n        self.state.todos = [\n            TodoSchema.model_validate(t) for t in todos\n        ]\n        self.state.editing_id = None\n        self.state.edit_buffer = None\n        self.state.create_buffer = TodoFormSchema()\n\n    # Override create to add owner\n    def create_item(self):\n        if not self.require_auth():\n            return\n\n        try:\n            todo = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                owner=self.current_user\n            )\n            self.refresh()\n            self.success(f\"Created: {todo.title}\")\n        except Exception as e:\n            logger.exception(\"Create failed\")\n            self.error(\"Failed to create todo\")\n\n    # Custom action: toggle completion\n    def toggle_completed(self, id: int):\n        try:\n            todo = self.model.objects.get(id=id, owner=self.current_user)\n            todo.completed = not todo.completed\n            todo.save()\n            self.refresh()\n        except self.model.DoesNotExist:\n            self.error(\"Todo not found\")\n\n    # Custom action: set priority\n    def set_priority(self, id: int, priority: int):\n        if priority &lt; 0 or priority &gt; 5:\n            self.error(\"Priority must be 0-5\")\n            return\n\n        try:\n            todo = self.model.objects.get(id=id, owner=self.current_user)\n            todo.priority = priority\n            todo.save()\n            self.refresh()\n            self.success(\"Priority updated\")\n        except self.model.DoesNotExist:\n            self.error(\"Todo not found\")\n</code></pre> <p>Template:</p> <pre><code>&lt;div class=\"todo-list\"&gt;\n    &lt;!-- Create new todo --&gt;\n    &lt;div class=\"create-form\"&gt;\n        &lt;h3&gt;Add Todo&lt;/h3&gt;\n        &lt;input\n            x-model=\"create_buffer.title\"\n            placeholder=\"What needs to be done?\"\n            @keyup.enter=\"call('create_item')\"\n        &gt;\n        &lt;textarea\n            x-model=\"create_buffer.description\"\n            placeholder=\"Description (optional)\"\n            rows=\"2\"\n        &gt;&lt;/textarea&gt;\n        &lt;select x-model.number=\"create_buffer.priority\"&gt;\n            &lt;option value=\"0\"&gt;Low Priority&lt;/option&gt;\n            &lt;option value=\"1\"&gt;Medium Priority&lt;/option&gt;\n            &lt;option value=\"2\"&gt;High Priority&lt;/option&gt;\n        &lt;/select&gt;\n        &lt;button @click=\"call('create_item')\" :disabled=\"isLoading\"&gt;\n            Add Todo\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Todo list --&gt;\n    &lt;div class=\"todos\"&gt;\n        &lt;template x-for=\"todo in todos\" :key=\"todo.id\"&gt;\n            &lt;div class=\"todo-item\" :class=\"{'completed': todo.completed}\"&gt;\n                &lt;!-- Normal view --&gt;\n                &lt;template x-if=\"editing_id !== todo.id\"&gt;\n                    &lt;div class=\"todo-view\"&gt;\n                        &lt;!-- Checkbox --&gt;\n                        &lt;input\n                            type=\"checkbox\"\n                            :checked=\"todo.completed\"\n                            @click=\"call('toggle_completed', {id: todo.id})\"\n                        &gt;\n\n                        &lt;!-- Content --&gt;\n                        &lt;div class=\"todo-content\"&gt;\n                            &lt;h4 x-text=\"todo.title\"&gt;&lt;/h4&gt;\n                            &lt;p x-text=\"todo.description\" x-show=\"todo.description\"&gt;&lt;/p&gt;\n                            &lt;span class=\"priority\" x-text=\"'Priority: ' + todo.priority\"&gt;&lt;/span&gt;\n                        &lt;/div&gt;\n\n                        &lt;!-- Actions --&gt;\n                        &lt;div class=\"actions\"&gt;\n                            &lt;button @click=\"call('start_edit', {id: todo.id})\"&gt;\n                                Edit\n                            &lt;/button&gt;\n                            &lt;button\n                                @click=\"confirm('Delete this todo?') &amp;&amp; call('delete_item', {id: todo.id})\"\n                                class=\"btn-danger\"\n                            &gt;\n                                Delete\n                            &lt;/button&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/template&gt;\n\n                &lt;!-- Edit view --&gt;\n                &lt;template x-if=\"editing_id === todo.id &amp;&amp; edit_buffer\"&gt;\n                    &lt;div class=\"todo-edit\"&gt;\n                        &lt;input\n                            x-model=\"edit_buffer.title\"\n                            type=\"text\"\n                        &gt;\n                        &lt;textarea\n                            x-model=\"edit_buffer.description\"\n                            rows=\"2\"\n                        &gt;&lt;/textarea&gt;\n                        &lt;select x-model.number=\"edit_buffer.priority\"&gt;\n                            &lt;option value=\"0\"&gt;Low&lt;/option&gt;\n                            &lt;option value=\"1\"&gt;Medium&lt;/option&gt;\n                            &lt;option value=\"2\"&gt;High&lt;/option&gt;\n                        &lt;/select&gt;\n\n                        &lt;div class=\"edit-actions\"&gt;\n                            &lt;button @click=\"call('save_edit')\"&gt;Save&lt;/button&gt;\n                            &lt;button @click=\"call('cancel_edit')\"&gt;Cancel&lt;/button&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/template&gt;\n            &lt;/div&gt;\n        &lt;/template&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Empty state --&gt;\n    &lt;div x-show=\"todos.length === 0\" class=\"empty-state\"&gt;\n        &lt;p&gt;No todos yet. Add one above!&lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div :class=\"'alert alert-' + msg.level\" x-text=\"msg.text\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"components/crud-nitro-component/#customizing-crud-methods","title":"Customizing CRUD Methods","text":"<p>Override any method for custom behavior:</p> <pre><code>@register_component\nclass ProductList(CrudNitroComponent[ProductListState]):\n    model = Product\n\n    def create_item(self):\n        \"\"\"Custom create with slug generation.\"\"\"\n        if not self.require_auth():\n            return\n\n        # Generate slug from title\n        slug = slugify(self.state.create_buffer.name)\n\n        try:\n            product = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                slug=slug,\n                owner=self.current_user\n            )\n            self.refresh()\n            self.success(f\"Created {product.name}\")\n        except IntegrityError:\n            self.error(\"Product with this name already exists\")\n\n    def delete_item(self, id: int):\n        \"\"\"Soft delete instead of hard delete.\"\"\"\n        try:\n            product = self.model.objects.get(id=id)\n\n            # Check permission\n            if product.owner != self.current_user:\n                self.error(\"Permission denied\")\n                return\n\n            # Soft delete\n            product.is_deleted = True\n            product.deleted_at = timezone.now()\n            product.save()\n\n            self.refresh()\n            self.success(\"Product archived\")\n        except self.model.DoesNotExist:\n            self.error(\"Product not found\")\n</code></pre>"},{"location":"components/crud-nitro-component/#security-best-practices","title":"Security Best Practices","text":""},{"location":"components/crud-nitro-component/#1-filter-by-owner","title":"1. Filter by Owner","text":"<pre><code>def get_initial_state(self, **kwargs):\n    # \u2705 Only show user's own items\n    items = self.model.objects.filter(owner=self.current_user)\n    return MyListState(items=[...])\n\ndef delete_item(self, id: int):\n    # \u2705 Check ownership before delete\n    obj = self.model.objects.get(id=id)\n    if obj.owner != self.current_user:\n        self.error(\"Permission denied\")\n        return\n    obj.delete()\n</code></pre>"},{"location":"components/crud-nitro-component/#2-validate-input","title":"2. Validate Input","text":"<pre><code>def create_item(self):\n    # \u2705 Server-side validation\n    if len(self.state.create_buffer.title) &gt; 200:\n        self.error(\"Title too long\")\n        return\n\n    if not self.state.create_buffer.title.strip():\n        self.error(\"Title required\")\n        return\n\n    # Create item...\n</code></pre>"},{"location":"components/crud-nitro-component/#3-use-permissions","title":"3. Use Permissions","text":"<pre><code>def delete_item(self, id: int):\n    # \u2705 Check permission\n    if not self.request.user.has_perm('myapp.delete_item'):\n        self.error(\"Permission denied\")\n        return\n\n    # Delete...\n</code></pre>"},{"location":"components/crud-nitro-component/#common-patterns","title":"Common Patterns","text":""},{"location":"components/crud-nitro-component/#filtering","title":"Filtering","text":"<pre><code>class ProductListState(BaseModel):\n    items: list[ProductSchema] = []\n    filter_active: bool = True\n    # ... CRUD buffers ...\n\n@register_component\nclass ProductList(CrudNitroComponent[ProductListState]):\n    def refresh(self):\n        qs = self.model.objects.all()\n\n        # Apply filter\n        if self.state.filter_active:\n            qs = qs.filter(is_active=True)\n\n        self.state.items = [\n            ProductSchema.model_validate(p) for p in qs\n        ]\n\n    def toggle_filter(self):\n        self.state.filter_active = not self.state.filter_active\n        self.refresh()\n</code></pre>"},{"location":"components/crud-nitro-component/#sorting","title":"Sorting","text":"<pre><code>class ProductListState(BaseModel):\n    items: list[ProductSchema] = []\n    sort_by: str = \"name\"\n    # ... CRUD buffers ...\n\n@register_component\nclass ProductList(CrudNitroComponent[ProductListState]):\n    def refresh(self):\n        items = self.model.objects.all().order_by(self.state.sort_by)\n        self.state.items = [\n            ProductSchema.model_validate(p) for p in items\n        ]\n\n    def set_sort(self, field: str):\n        self.state.sort_by = field\n        self.refresh()\n</code></pre>"},{"location":"components/crud-nitro-component/#see-also","title":"See Also","text":"<ul> <li>BaseListComponent - Adds pagination, search, filters</li> <li>ModelNitroComponent - Base for model components</li> <li>OwnershipMixin - Filter by ownership</li> <li>State Management - Managing state</li> </ul>"},{"location":"components/model-nitro-component/","title":"ModelNitroComponent","text":"<p><code>ModelNitroComponent</code> extends <code>NitroComponent</code> with Django ORM integration. It automatically loads model instances and provides convenient methods for working with single database objects.</p>"},{"location":"components/model-nitro-component/#when-to-use","title":"When to Use","text":"<p>Use <code>ModelNitroComponent</code> when you need to:</p> <ul> <li>Display or edit a single model instance</li> <li>Load an object by primary key automatically</li> <li>Refresh component state from the database</li> <li>Work with model-backed forms</li> </ul> <p>Examples: - User profile editor - Blog post detail page - Product details with edit capability - Document viewer/editor</p>"},{"location":"components/model-nitro-component/#basic-structure","title":"Basic Structure","text":"<pre><code>from pydantic import BaseModel\nfrom nitro.base import ModelNitroComponent\nfrom nitro.registry import register_component\nfrom myapp.models import Product\n\n# State schema\nclass ProductSchema(BaseModel):\n    id: int\n    name: str\n    price: float\n    description: str\n    is_active: bool\n\n    class Config:\n        from_attributes = True  # Enable ORM loading\n\n# Component\n@register_component\nclass ProductEditor(ModelNitroComponent[ProductSchema]):\n    template_name = \"components/product_editor.html\"\n    state_class = ProductSchema\n    model = Product  # Django model class\n</code></pre>"},{"location":"components/model-nitro-component/#key-differences-from-nitrocomponent","title":"Key Differences from NitroComponent","text":""},{"location":"components/model-nitro-component/#1-automatic-state-loading","title":"1. Automatic State Loading","text":"<p><code>ModelNitroComponent</code> automatically loads the model instance if you pass <code>pk</code> or <code>id</code>:</p> <pre><code># In your view\ndef edit_product(request, product_id):\n    editor = ProductEditor(request=request, pk=product_id)\n    # State automatically loaded from Product.objects.get(pk=product_id)\n    return render(request, 'edit_product.html', {'editor': editor})\n</code></pre>"},{"location":"components/model-nitro-component/#2-automatic-secure-fields","title":"2. Automatic Secure Fields","text":"<p>Foreign keys and the <code>id</code> field are automatically secured:</p> <pre><code>class BlogPostSchema(BaseModel):\n    id: int          # Automatically secured\n    title: str\n    author_id: int   # Automatically secured (ends with _id)\n    content: str\n\n    class Config:\n        from_attributes = True\n\n@register_component\nclass BlogPostEditor(ModelNitroComponent[BlogPostSchema]):\n    model = BlogPost\n    # No need to set secure_fields - id and author_id are auto-secured\n</code></pre>"},{"location":"components/model-nitro-component/#3-built-in-refresh","title":"3. Built-in Refresh","text":"<p><code>refresh()</code> reloads state from the database:</p> <pre><code>def toggle_active(self):\n    obj = self.get_object(self.state.id)\n    obj.is_active = not obj.is_active\n    obj.save()\n\n    self.refresh()  # Reload from database\n    status = \"activated\" if self.state.is_active else \"deactivated\"\n    self.success(f\"Product {status}\")\n</code></pre>"},{"location":"components/model-nitro-component/#class-attributes","title":"Class Attributes","text":"<p>Inherits all attributes from <code>NitroComponent</code> plus:</p>"},{"location":"components/model-nitro-component/#required","title":"Required","text":"<p><pre><code>model: Type[Model]\n</code></pre> Django model class to load instances from.</p> <pre><code># Example\nclass ProductEditor(ModelNitroComponent[ProductSchema]):\n    model = Product\n</code></pre>"},{"location":"components/model-nitro-component/#methods","title":"Methods","text":""},{"location":"components/model-nitro-component/#orm-methods","title":"ORM Methods","text":""},{"location":"components/model-nitro-component/#get_objectpk-int-model","title":"<code>get_object(pk: int) -&gt; Model</code>","text":"<p>Retrieves a model instance by primary key.</p> <pre><code>def delete_product(self):\n    obj = self.get_object(self.state.id)\n    obj.delete()\n    # Navigate away or show confirmation\n</code></pre>"},{"location":"components/model-nitro-component/#refresh-none","title":"<code>refresh() -&gt; None</code>","text":"<p>Reloads state from the database using the current <code>id</code> field.</p> <pre><code>def save_changes(self):\n    obj = self.get_object(self.state.id)\n    obj.title = self.state.title\n    obj.content = self.state.content\n    obj.save()\n\n    self.refresh()  # Reload to get computed fields, updated_at, etc.\n    self.success(\"Changes saved\")\n</code></pre>"},{"location":"components/model-nitro-component/#lifecycle-methods","title":"Lifecycle Methods","text":""},{"location":"components/model-nitro-component/#get_initial_statekwargs-basemodel","title":"<code>get_initial_state(**kwargs) -&gt; BaseModel</code>","text":"<p>Automatic behavior: - If <code>pk</code> or <code>id</code> in kwargs \u2192 loads from database - Otherwise \u2192 returns empty state or custom logic</p> <p>Override for custom initialization:</p> <pre><code>def get_initial_state(self, **kwargs):\n    if 'pk' in kwargs or 'id' in kwargs:\n        # Automatic loading\n        pk = kwargs.get('pk') or kwargs.get('id')\n        obj = self.model.objects.select_related('category').get(pk=pk)\n        return self.state_class.model_validate(obj)\n\n    # Custom initialization for new objects\n    return self.state_class(\n        name=\"New Product\",\n        price=0.0,\n        is_active=True\n    )\n</code></pre>"},{"location":"components/model-nitro-component/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom pydantic import BaseModel, validator\nfrom nitro.base import ModelNitroComponent\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Django Model\nclass BlogPost(models.Model):\n    title = models.CharField(max_length=200)\n    slug = models.SlugField(unique=True)\n    content = models.TextField()\n    published = models.BooleanField(default=False)\n    author = models.ForeignKey('auth.User', on_delete=models.CASCADE)\n    category = models.ForeignKey('Category', on_delete=models.SET_NULL, null=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n\n    def __str__(self):\n        return self.title\n\n# Pydantic Schema\nclass BlogPostSchema(BaseModel):\n    id: int\n    title: str\n    slug: str\n    content: str\n    published: bool\n    author_id: int\n    category_id: Optional[int] = None\n    created_at: str\n    updated_at: str\n\n    @validator('title')\n    def title_not_empty(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Title is required')\n        return v.strip()\n\n    class Config:\n        from_attributes = True\n\n# Component\n@register_component\nclass BlogPostEditor(ModelNitroComponent[BlogPostSchema]):\n    template_name = \"components/blog_post_editor.html\"\n    state_class = BlogPostSchema\n    model = BlogPost\n\n    # No need to override get_initial_state - automatic!\n\n    def save_changes(self):\n        \"\"\"Save current edits to database.\"\"\"\n        if not self.require_auth(\"Please log in to save\"):\n            return\n\n        try:\n            # Get object\n            post = self.get_object(self.state.id)\n\n            # Check ownership\n            if post.author != self.current_user:\n                self.error(\"You don't own this post\")\n                return\n\n            # Update fields\n            post.title = self.state.title\n            post.content = self.state.content\n            post.save()\n\n            # Reload with updated timestamp\n            self.refresh()\n            self.success(\"Post saved successfully\")\n\n        except BlogPost.DoesNotExist:\n            self.error(\"Post not found\")\n        except Exception as e:\n            logger.exception(\"Save failed\")\n            self.error(\"Failed to save changes\")\n\n    def toggle_published(self):\n        \"\"\"Publish or unpublish the post.\"\"\"\n        if not self.require_auth():\n            return\n\n        try:\n            post = self.get_object(self.state.id)\n\n            # Check ownership\n            if post.author != self.current_user:\n                self.error(\"Permission denied\")\n                return\n\n            # Toggle\n            post.published = not post.published\n            post.save()\n\n            # Reload\n            self.refresh()\n\n            status = \"published\" if post.published else \"unpublished\"\n            self.success(f\"Post {status}\")\n\n        except BlogPost.DoesNotExist:\n            self.error(\"Post not found\")\n\n    def delete_post(self):\n        \"\"\"Delete the post permanently.\"\"\"\n        if not self.require_auth():\n            return\n\n        try:\n            post = self.get_object(self.state.id)\n\n            # Check ownership\n            if post.author != self.current_user:\n                self.error(\"Permission denied\")\n                return\n\n            # Delete\n            post.delete()\n            self.success(\"Post deleted\")\n\n            # In real app, you'd redirect here\n            # return HttpResponseRedirect('/posts/')\n\n        except BlogPost.DoesNotExist:\n            self.error(\"Post not found\")\n</code></pre> <p>Template:</p> <pre><code>&lt;div class=\"blog-post-editor\"&gt;\n    &lt;div class=\"header\"&gt;\n        &lt;h1&gt;Edit Post&lt;/h1&gt;\n        &lt;span class=\"post-id\" x-text=\"'ID: ' + id\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Title --&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"title\"&gt;Title&lt;/label&gt;\n        &lt;input\n            id=\"title\"\n            x-model=\"title\"\n            type=\"text\"\n            :class=\"{'error': errors.title}\"\n        &gt;\n        &lt;span x-show=\"errors.title\" x-text=\"errors.title\" class=\"error\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Content --&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label for=\"content\"&gt;Content&lt;/label&gt;\n        &lt;textarea\n            id=\"content\"\n            x-model=\"content\"\n            rows=\"15\"\n            :class=\"{'error': errors.content}\"\n        &gt;&lt;/textarea&gt;\n        &lt;span x-show=\"errors.content\" x-text=\"errors.content\" class=\"error\"&gt;&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Actions --&gt;\n    &lt;div class=\"actions\"&gt;\n        &lt;button @click=\"call('save_changes')\" :disabled=\"isLoading\"&gt;\n            &lt;span x-show=\"!isLoading\"&gt;Save Changes&lt;/span&gt;\n            &lt;span x-show=\"isLoading\"&gt;Saving...&lt;/span&gt;\n        &lt;/button&gt;\n\n        &lt;button\n            @click=\"call('toggle_published')\"\n            :disabled=\"isLoading\"\n            :class=\"{'btn-success': !published, 'btn-warning': published}\"\n        &gt;\n            &lt;span x-text=\"published ? 'Unpublish' : 'Publish'\"&gt;&lt;/span&gt;\n        &lt;/button&gt;\n\n        &lt;button\n            @click=\"confirm('Delete this post?') &amp;&amp; call('delete_post')\"\n            :disabled=\"isLoading\"\n            class=\"btn-danger\"\n        &gt;\n            Delete\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Metadata --&gt;\n    &lt;div class=\"metadata\"&gt;\n        &lt;small&gt;\n            Created: &lt;span x-text=\"created_at\"&gt;&lt;/span&gt; |\n            Updated: &lt;span x-text=\"updated_at\"&gt;&lt;/span&gt;\n        &lt;/small&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div :class=\"'alert alert-' + msg.level\" x-text=\"msg.text\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre> <p>Usage in view:</p> <pre><code>from django.shortcuts import render, get_object_or_404\nfrom myapp.components import BlogPostEditor\n\ndef edit_post(request, post_id):\n    # Automatic state loading from database\n    editor = BlogPostEditor(request=request, pk=post_id)\n    return render(request, 'edit_post.html', {'editor': editor})\n</code></pre>"},{"location":"components/model-nitro-component/#optimizing-queries","title":"Optimizing Queries","text":"<p>Use <code>select_related</code> and <code>prefetch_related</code> for better performance:</p> <pre><code>@register_component\nclass ProductEditor(ModelNitroComponent[ProductSchema]):\n    model = Product\n\n    def get_initial_state(self, **kwargs):\n        pk = kwargs.get('pk') or kwargs.get('id')\n        if pk:\n            # Optimized query with related data\n            product = self.model.objects.select_related(\n                'category',\n                'manufacturer'\n            ).prefetch_related(\n                'tags',\n                'images'\n            ).get(pk=pk)\n\n            return self.state_class.model_validate(product)\n\n        return self.state_class()\n</code></pre>"},{"location":"components/model-nitro-component/#security-considerations","title":"Security Considerations","text":""},{"location":"components/model-nitro-component/#1-check-ownership","title":"1. Check Ownership","text":"<pre><code>def save_changes(self):\n    obj = self.get_object(self.state.id)\n\n    # \u2705 Check ownership\n    if obj.owner != self.current_user:\n        self.error(\"Permission denied\")\n        return\n\n    # Proceed with save...\n</code></pre>"},{"location":"components/model-nitro-component/#2-check-permissions","title":"2. Check Permissions","text":"<pre><code>def delete_document(self):\n    # \u2705 Check permission\n    if not self.request.user.has_perm('documents.delete_document'):\n        self.error(\"Permission denied\")\n        return\n\n    obj = self.get_object(self.state.id)\n    obj.delete()\n</code></pre>"},{"location":"components/model-nitro-component/#3-validate-all-changes","title":"3. Validate All Changes","text":"<pre><code>def update_price(self):\n    # \u2705 Server-side validation\n    if self.state.price &lt; 0:\n        self.error(\"Price cannot be negative\")\n        return\n\n    obj = self.get_object(self.state.id)\n    obj.price = self.state.price\n    obj.save()\n</code></pre>"},{"location":"components/model-nitro-component/#best-practices","title":"Best Practices","text":""},{"location":"components/model-nitro-component/#1-use-from_attributestrue","title":"1. Use from_attributes=True","text":"<pre><code>class ProductSchema(BaseModel):\n    # ... fields ...\n\n    class Config:\n        from_attributes = True  # Required for model loading\n</code></pre>"},{"location":"components/model-nitro-component/#2-reload-after-updates","title":"2. Reload After Updates","text":"<pre><code>def save(self):\n    obj = self.get_object(self.state.id)\n    obj.name = self.state.name\n    obj.save()\n\n    self.refresh()  # \u2705 Reload to get computed fields, timestamps\n</code></pre>"},{"location":"components/model-nitro-component/#3-handle-doesnotexist","title":"3. Handle DoesNotExist","text":"<pre><code>def delete_item(self):\n    try:\n        obj = self.get_object(self.state.id)\n        obj.delete()\n    except self.model.DoesNotExist:\n        self.error(\"Item not found\")\n</code></pre>"},{"location":"components/model-nitro-component/#4-optimize-related-queries","title":"4. Optimize Related Queries","text":"<pre><code>def get_initial_state(self, **kwargs):\n    pk = kwargs.get('pk')\n    if pk:\n        # \u2705 Load related data efficiently\n        obj = self.model.objects.select_related('author').get(pk=pk)\n        return self.state_class.model_validate(obj)\n</code></pre>"},{"location":"components/model-nitro-component/#common-patterns","title":"Common Patterns","text":""},{"location":"components/model-nitro-component/#inline-editing","title":"Inline Editing","text":"<pre><code>class ProductQuickEdit(ModelNitroComponent[ProductSchema]):\n    def toggle_active(self):\n        obj = self.get_object(self.state.id)\n        obj.is_active = not obj.is_active\n        obj.save()\n        self.refresh()\n\n    def update_price(self, new_price: float):\n        if new_price &lt; 0:\n            self.error(\"Invalid price\")\n            return\n\n        obj = self.get_object(self.state.id)\n        obj.price = new_price\n        obj.save()\n        self.refresh()\n        self.success(\"Price updated\")\n</code></pre>"},{"location":"components/model-nitro-component/#optimistic-updates","title":"Optimistic Updates","text":"<pre><code>def toggle_favorite(self):\n    # Update UI immediately\n    self.state.is_favorite = not self.state.is_favorite\n\n    # Then sync to database\n    try:\n        obj = self.get_object(self.state.id)\n        obj.is_favorite = self.state.is_favorite\n        obj.save()\n    except Exception:\n        # Revert on error\n        self.refresh()\n        self.error(\"Failed to update\")\n</code></pre>"},{"location":"components/model-nitro-component/#see-also","title":"See Also","text":"<ul> <li>NitroComponent - Base component class</li> <li>CrudNitroComponent - For CRUD operations</li> <li>State Management - Managing state</li> </ul>"},{"location":"components/nitro-component/","title":"NitroComponent","text":"<p><code>NitroComponent</code> is the base class for all Django Nitro components. It provides the foundation for creating reactive, stateful components with full control over state and actions.</p>"},{"location":"components/nitro-component/#when-to-use","title":"When to Use","text":"<p>Use <code>NitroComponent</code> when you need:</p> <ul> <li>Full control over state structure and initialization</li> <li>Custom components that don't map directly to Django models</li> <li>Complex forms with custom validation logic</li> <li>Widgets like counters, calculators, or interactive UI elements</li> </ul>"},{"location":"components/nitro-component/#basic-structure","title":"Basic Structure","text":"<pre><code>from pydantic import BaseModel\nfrom nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\n# 1. Define state schema\nclass MyComponentState(BaseModel):\n    field1: str = \"\"\n    field2: int = 0\n\n# 2. Create component class\n@register_component\nclass MyComponent(NitroComponent[MyComponentState]):\n    template_name = \"components/my_component.html\"\n    state_class = MyComponentState\n\n    def get_initial_state(self, **kwargs):\n        return MyComponentState(\n            field1=kwargs.get('field1', ''),\n            field2=kwargs.get('field2', 0)\n        )\n\n    def my_action(self):\n        # Your action logic\n        self.state.field2 += 1\n</code></pre>"},{"location":"components/nitro-component/#class-attributes","title":"Class Attributes","text":""},{"location":"components/nitro-component/#required","title":"Required","text":"<p><pre><code>template_name: str\n</code></pre> Path to the component's HTML template.</p> <p><pre><code>state_class: Type[BaseModel]\n</code></pre> Pydantic model class defining the component's state structure.</p>"},{"location":"components/nitro-component/#optional","title":"Optional","text":"<p><pre><code>secure_fields: list[str] = []\n</code></pre> List of field names to protect from client-side tampering using integrity verification.</p> <p><pre><code>model: Type[Model] = None\n</code></pre> Django model class (used by <code>ModelNitroComponent</code> and its subclasses).</p>"},{"location":"components/nitro-component/#methods","title":"Methods","text":""},{"location":"components/nitro-component/#lifecycle-methods","title":"Lifecycle Methods","text":""},{"location":"components/nitro-component/#get_initial_statekwargs-basemodel","title":"<code>get_initial_state(**kwargs) -&gt; BaseModel</code>","text":"<p>Creates and returns the initial state for the component.</p> <p>Parameters: - <code>**kwargs</code> - Arguments passed during component initialization</p> <p>Returns: - Instance of <code>state_class</code></p> <p>Example: <pre><code>def get_initial_state(self, **kwargs):\n    return MyComponentState(\n        name=kwargs.get('name', ''),\n        count=kwargs.get('initial_count', 0),\n        mode=kwargs.get('mode', 'view')\n    )\n</code></pre></p>"},{"location":"components/nitro-component/#refresh-none","title":"<code>refresh() -&gt; None</code>","text":"<p>Reloads component state (e.g., from database). Override for custom refresh logic.</p> <p>Default behavior: - Does nothing in base <code>NitroComponent</code> - Subclasses override for specific refresh logic</p> <p>Example: <pre><code>def refresh(self):\n    # Reload data from external API\n    data = fetch_from_api(self.state.api_key)\n    self.state.data = data\n</code></pre></p>"},{"location":"components/nitro-component/#message-methods","title":"Message Methods","text":""},{"location":"components/nitro-component/#successmessage-str-none","title":"<code>success(message: str) -&gt; None</code>","text":"<p>Adds a success message to be displayed to the user.</p> <pre><code>self.success(\"Operation completed successfully!\")\n</code></pre>"},{"location":"components/nitro-component/#errormessage-str-none","title":"<code>error(message: str) -&gt; None</code>","text":"<p>Adds an error message to be displayed to the user.</p> <pre><code>self.error(\"Something went wrong. Please try again.\")\n</code></pre>"},{"location":"components/nitro-component/#infomessage-str-none","title":"<code>info(message: str) -&gt; None</code>","text":"<p>Adds an informational message to be displayed to the user.</p> <pre><code>self.info(\"Your session will expire in 5 minutes.\")\n</code></pre>"},{"location":"components/nitro-component/#security-helpers-v030","title":"Security Helpers (v0.3.0+)","text":""},{"location":"components/nitro-component/#current_user-user-none","title":"<code>current_user -&gt; User | None</code>","text":"<p>Property that returns the current authenticated user or <code>None</code>.</p> <pre><code>@property\ndef current_user(self):\n    if self.request and self.request.user.is_authenticated:\n        return self.request.user\n    return None\n</code></pre> <p>Usage: <pre><code>def my_action(self):\n    user = self.current_user\n    if user:\n        # Do something with authenticated user\n        pass\n</code></pre></p>"},{"location":"components/nitro-component/#is_authenticated-bool","title":"<code>is_authenticated -&gt; bool</code>","text":"<p>Property that returns <code>True</code> if the user is authenticated.</p> <pre><code>@property\ndef is_authenticated(self):\n    return self.request and self.request.user.is_authenticated\n</code></pre> <p>Usage: <pre><code>def delete_account(self):\n    if not self.is_authenticated:\n        self.error(\"Authentication required\")\n        return\n</code></pre></p>"},{"location":"components/nitro-component/#require_authmessage-str-authentication-required-bool","title":"<code>require_auth(message: str = \"Authentication required\") -&gt; bool</code>","text":"<p>Enforces authentication requirement. Shows error message and returns <code>False</code> if not authenticated.</p> <pre><code>def require_auth(self, message: str = \"Authentication required\") -&gt; bool:\n    if not self.is_authenticated:\n        self.error(message)\n        return False\n    return True\n</code></pre> <p>Usage: <pre><code>def save_profile(self):\n    if not self.require_auth(\"Please log in to save your profile\"):\n        return  # Stops execution\n\n    # Continue with authenticated user\n    self.current_user.profile.save()\n</code></pre></p>"},{"location":"components/nitro-component/#rendering-methods","title":"Rendering Methods","text":""},{"location":"components/nitro-component/#render-str","title":"<code>render() -&gt; str</code>","text":"<p>Renders the component as HTML with embedded state.</p> <p>Returns: - HTML string with AlpineJS bindings</p> <p>Usage in templates: <pre><code>{{ component.render }}\n</code></pre></p>"},{"location":"components/nitro-component/#internal-methods","title":"Internal Methods","text":"<p>These methods are used internally and rarely need to be overridden:</p>"},{"location":"components/nitro-component/#_get_secure_fields-liststr","title":"<code>_get_secure_fields() -&gt; list[str]</code>","text":"<p>Returns list of fields to protect with integrity verification.</p>"},{"location":"components/nitro-component/#_compute_integrity-str","title":"<code>_compute_integrity() -&gt; str</code>","text":"<p>Computes HMAC integrity token for secure fields.</p>"},{"location":"components/nitro-component/#_verify_integrityintegrity-str-bool","title":"<code>_verify_integrity(integrity: str) -&gt; bool</code>","text":"<p>Verifies integrity token matches current secure field values.</p>"},{"location":"components/nitro-component/#properties","title":"Properties","text":""},{"location":"components/nitro-component/#request-httprequest","title":"<code>request: HttpRequest</code>","text":"<p>Django request object, available in all methods.</p> <pre><code>def my_action(self):\n    user = self.request.user\n    session = self.request.session\n    get_params = self.request.GET\n</code></pre>"},{"location":"components/nitro-component/#state-basemodel","title":"<code>state: BaseModel</code>","text":"<p>Current component state (instance of <code>state_class</code>).</p> <pre><code>def increment(self):\n    self.state.count += 1\n</code></pre>"},{"location":"components/nitro-component/#complete-example","title":"Complete Example","text":"<p>Here's a complete example of a contact form component:</p> <pre><code>from pydantic import BaseModel, EmailStr, validator\nfrom nitro.base import NitroComponent\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# State schema\nclass ContactFormState(BaseModel):\n    name: str = \"\"\n    email: EmailStr | str = \"\"\n    subject: str = \"\"\n    message: str = \"\"\n    submitted: bool = False\n\n    @validator('name')\n    def name_not_empty(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Name is required')\n        return v.strip()\n\n    @validator('message')\n    def message_min_length(cls, v):\n        if len(v) &lt; 10:\n            raise ValueError('Message too short (min 10 characters)')\n        return v\n\n# Component\n@register_component\nclass ContactForm(NitroComponent[ContactFormState]):\n    template_name = \"components/contact_form.html\"\n    state_class = ContactFormState\n\n    def get_initial_state(self, **kwargs):\n        return ContactFormState()\n\n    def submit(self):\n        \"\"\"Handle form submission.\"\"\"\n        # Check authentication (optional)\n        if not self.is_authenticated:\n            self.error(\"Please log in to send a message\")\n            return\n\n        # Validate\n        if not self.state.name or not self.state.message:\n            self.error(\"Please fill in all required fields\")\n            return\n\n        # Send email\n        try:\n            send_contact_email(\n                name=self.state.name,\n                email=self.state.email,\n                subject=self.state.subject,\n                message=self.state.message,\n                user=self.current_user\n            )\n\n            # Mark as submitted\n            self.state.submitted = True\n            self.success(\"Message sent successfully! We'll get back to you soon.\")\n\n        except Exception as e:\n            logger.exception(\"Contact form submission failed\")\n            self.error(\"Failed to send message. Please try again later.\")\n\n    def reset(self):\n        \"\"\"Reset form to initial state.\"\"\"\n        self.state.name = \"\"\n        self.state.email = \"\"\n        self.state.subject = \"\"\n        self.state.message = \"\"\n        self.state.submitted = False\n        self.info(\"Form cleared\")\n</code></pre> <p>Template (<code>components/contact_form.html</code>):</p> <pre><code>&lt;div class=\"contact-form\"&gt;\n    &lt;!-- Show form if not submitted --&gt;\n    &lt;form x-show=\"!submitted\" @submit.prevent=\"call('submit')\"&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"name\"&gt;Name *&lt;/label&gt;\n            &lt;input\n                id=\"name\"\n                x-model=\"name\"\n                type=\"text\"\n                :class=\"{'error': errors.name}\"\n                required\n            &gt;\n            &lt;span x-show=\"errors.name\" x-text=\"errors.name\" class=\"error-text\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"email\"&gt;Email *&lt;/label&gt;\n            &lt;input\n                id=\"email\"\n                x-model=\"email\"\n                type=\"email\"\n                :class=\"{'error': errors.email}\"\n                required\n            &gt;\n            &lt;span x-show=\"errors.email\" x-text=\"errors.email\" class=\"error-text\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"subject\"&gt;Subject&lt;/label&gt;\n            &lt;input\n                id=\"subject\"\n                x-model=\"subject\"\n                type=\"text\"\n            &gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-group\"&gt;\n            &lt;label for=\"message\"&gt;Message *&lt;/label&gt;\n            &lt;textarea\n                id=\"message\"\n                x-model=\"message\"\n                rows=\"5\"\n                :class=\"{'error': errors.message}\"\n                required\n            &gt;&lt;/textarea&gt;\n            &lt;span x-show=\"errors.message\" x-text=\"errors.message\" class=\"error-text\"&gt;&lt;/span&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"form-actions\"&gt;\n            &lt;button type=\"submit\" :disabled=\"isLoading\"&gt;\n                &lt;span x-show=\"!isLoading\"&gt;Send Message&lt;/span&gt;\n                &lt;span x-show=\"isLoading\"&gt;Sending...&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;button type=\"button\" @click=\"call('reset')\" :disabled=\"isLoading\"&gt;\n                Reset\n            &lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n\n    &lt;!-- Success message --&gt;\n    &lt;div x-show=\"submitted\" class=\"success-panel\"&gt;\n        &lt;h3&gt;Thank you!&lt;/h3&gt;\n        &lt;p&gt;Your message has been sent. We'll respond as soon as possible.&lt;/p&gt;\n        &lt;button @click=\"call('reset')\"&gt;Send Another Message&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div\n            :class=\"'alert alert-' + msg.level\"\n            x-text=\"msg.text\"\n        &gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre> <p>Usage in view:</p> <pre><code>from django.shortcuts import render\nfrom myapp.components import ContactForm\n\ndef contact_page(request):\n    form = ContactForm(request=request)\n    return render(request, 'contact.html', {'form': form})\n</code></pre>"},{"location":"components/nitro-component/#best-practices","title":"Best Practices","text":""},{"location":"components/nitro-component/#1-use-type-hints","title":"1. Use Type Hints","text":"<pre><code>from typing import Optional\n\ndef update_field(self, value: str) -&gt; None:\n    self.state.field = value\n</code></pre>"},{"location":"components/nitro-component/#2-validate-input","title":"2. Validate Input","text":"<pre><code>def set_age(self, age: int):\n    if age &lt; 0 or age &gt; 150:\n        self.error(\"Invalid age\")\n        return\n\n    self.state.age = age\n</code></pre>"},{"location":"components/nitro-component/#3-handle-errors","title":"3. Handle Errors","text":"<pre><code>def save(self):\n    try:\n        # Save logic\n        self.success(\"Saved\")\n    except ValidationError as e:\n        self.error(f\"Validation error: {e}\")\n    except Exception:\n        logger.exception(\"Save failed\")\n        self.error(\"An error occurred\")\n</code></pre>"},{"location":"components/nitro-component/#4-keep-actions-small","title":"4. Keep Actions Small","text":"<pre><code># \u2705 Good - focused actions\ndef increment(self):\n    self.state.count += 1\n\ndef decrement(self):\n    self.state.count -= 1\n\n# \u274c Avoid - too complex\ndef manage_counter(self, operation: str):\n    if operation == 'inc':\n        # ...\n    elif operation == 'dec':\n        # ...\n    # Too much logic in one action\n</code></pre>"},{"location":"components/nitro-component/#5-document-your-component","title":"5. Document Your Component","text":"<pre><code>@register_component\nclass Calculator(NitroComponent[CalculatorState]):\n    \"\"\"\n    Interactive calculator component.\n\n    Supports basic arithmetic operations: +, -, *, /\n\n    Usage:\n        calculator = Calculator(request=request, initial=0)\n    \"\"\"\n    template_name = \"components/calculator.html\"\n    state_class = CalculatorState\n</code></pre>"},{"location":"components/nitro-component/#see-also","title":"See Also","text":"<ul> <li>ModelNitroComponent - For single model instances</li> <li>CrudNitroComponent - For CRUD operations</li> <li>BaseListComponent - For paginated lists</li> <li>State Management - Managing state</li> <li>Actions - Defining actions</li> </ul>"},{"location":"core-concepts/actions/","title":"Actions","text":"<p>Actions are methods on your component that can be called from the template. They handle user interactions, modify state, and trigger server-side logic.</p>"},{"location":"core-concepts/actions/#how-actions-work","title":"How Actions Work","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   User      \u2502 1. Click button\n\u2502  (Browser)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 2. call('action_name', {params})\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  AlpineJS   \u2502 3. Collect current state\n\u2502   (Client)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 4. POST /api/nitro/dispatch\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Django Ninja\u2502 5. Validate state\n\u2502    (API)    \u2502 6. Reconstruct component\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 7. Call action method\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Component  \u2502 8. Modify state\n\u2502   (Python)  \u2502 9. Add messages\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 10. Serialize updated state\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Response   \u2502 11. Return JSON\n\u2502   (JSON)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 12. Update reactive state\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  AlpineJS   \u2502 13. UI updates automatically\n\u2502   (Client)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"core-concepts/actions/#defining-actions","title":"Defining Actions","text":"<p>Any public method (not starting with <code>_</code>) can be called as an action:</p> <pre><code>from nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\n@register_component\nclass Counter(NitroComponent[CounterState]):\n    # \u2705 Public method - can be called from template\n    def increment(self):\n        self.state.count += 1\n\n    # \u2705 Public method with parameters\n    def add(self, amount: int):\n        self.state.count += amount\n\n    # \u2705 Public method with optional parameters\n    def set_value(self, value: int = 0):\n        self.state.count = value\n\n    # \u274c Private method - cannot be called from template\n    def _calculate_something(self):\n        return self.state.count * 2\n</code></pre>"},{"location":"core-concepts/actions/#calling-actions-from-templates","title":"Calling Actions from Templates","text":""},{"location":"core-concepts/actions/#basic-action-call","title":"Basic Action Call","text":"<pre><code>&lt;button @click=\"call('increment')\"&gt;+1&lt;/button&gt;\n</code></pre>"},{"location":"core-concepts/actions/#action-with-parameters","title":"Action with Parameters","text":"<pre><code>&lt;!-- Single parameter --&gt;\n&lt;button @click=\"call('add', {amount: 5})\"&gt;+5&lt;/button&gt;\n\n&lt;!-- Multiple parameters --&gt;\n&lt;button @click=\"call('create_user', {name: 'John', email: 'john@example.com'})\"&gt;\n    Create\n&lt;/button&gt;\n\n&lt;!-- Using state values --&gt;\n&lt;button @click=\"call('delete_item', {id: item.id})\"&gt;Delete&lt;/button&gt;\n</code></pre>"},{"location":"core-concepts/actions/#action-with-event-modifiers","title":"Action with Event Modifiers","text":"<pre><code>&lt;!-- Prevent default form submission --&gt;\n&lt;form @submit.prevent=\"call('submit_form')\"&gt;\n    &lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n\n&lt;!-- Debounce for search --&gt;\n&lt;input\n    x-model=\"search\"\n    @input.debounce.300ms=\"call('search')\"\n    placeholder=\"Search...\"\n&gt;\n\n&lt;!-- Only on Enter key --&gt;\n&lt;input\n    x-model=\"name\"\n    @keyup.enter=\"call('create_item')\"\n    placeholder=\"Type and press Enter\"\n&gt;\n\n&lt;!-- Stop propagation --&gt;\n&lt;div @click.stop=\"call('select_item', {id: item.id})\"&gt;\n    Item content\n&lt;/div&gt;\n</code></pre>"},{"location":"core-concepts/actions/#action-parameters","title":"Action Parameters","text":""},{"location":"core-concepts/actions/#type-hints","title":"Type Hints","text":"<p>Use type hints for automatic validation:</p> <pre><code>def update_quantity(self, item_id: int, quantity: int):\n    \"\"\"Parameters are validated automatically.\"\"\"\n    if quantity &lt; 1:\n        self.error(\"Quantity must be positive\")\n        return\n\n    # Update logic...\n</code></pre>"},{"location":"core-concepts/actions/#optional-parameters","title":"Optional Parameters","text":"<pre><code>def search(self, query: str = \"\"):\n    \"\"\"Optional parameters with defaults.\"\"\"\n    if not query:\n        self.state.results = []\n        return\n\n    self.state.results = self.model.objects.filter(\n        name__icontains=query\n    )\n</code></pre>"},{"location":"core-concepts/actions/#complex-parameter-types","title":"Complex Parameter Types","text":"<pre><code>from typing import List, Optional\n\ndef bulk_update(self, ids: List[int], status: str):\n    \"\"\"Accept lists and complex types.\"\"\"\n    items = self.model.objects.filter(id__in=ids)\n    items.update(status=status)\n    self.refresh()\n</code></pre>"},{"location":"core-concepts/actions/#common-action-patterns","title":"Common Action Patterns","text":""},{"location":"core-concepts/actions/#create","title":"Create","text":"<pre><code>def create_item(self):\n    \"\"\"Create new item from create_buffer.\"\"\"\n    try:\n        # Validate\n        if not self.state.create_buffer.name:\n            self.error(\"Name is required\")\n            return\n\n        # Create\n        obj = self.model.objects.create(\n            **self.state.create_buffer.dict()\n        )\n\n        # Refresh and notify\n        self.refresh()\n        self.success(f\"Created {obj.name}\")\n\n    except Exception as e:\n        logger.exception(\"Create failed\")\n        self.error(\"Failed to create item\")\n</code></pre>"},{"location":"core-concepts/actions/#update","title":"Update","text":"<pre><code>def save_edit(self):\n    \"\"\"Save changes from edit_buffer.\"\"\"\n    if not self.state.editing_id or not self.state.edit_buffer:\n        return\n\n    try:\n        obj = self.model.objects.get(id=self.state.editing_id)\n\n        # Update fields\n        for field, value in self.state.edit_buffer.dict().items():\n            setattr(obj, field, value)\n\n        obj.save()\n\n        # Clear edit mode\n        self.state.editing_id = None\n        self.state.edit_buffer = None\n\n        self.refresh()\n        self.success(\"Changes saved\")\n\n    except self.model.DoesNotExist:\n        self.error(\"Item not found\")\n</code></pre>"},{"location":"core-concepts/actions/#delete","title":"Delete","text":"<pre><code>def delete_item(self, id: int):\n    \"\"\"Delete item by ID.\"\"\"\n    try:\n        obj = self.model.objects.get(id=id)\n\n        # Optional: Check permissions\n        if obj.owner != self.request.user:\n            self.error(\"Permission denied\")\n            return\n\n        obj.delete()\n        self.refresh()\n        self.success(\"Item deleted\")\n\n    except self.model.DoesNotExist:\n        self.error(\"Item not found\")\n</code></pre>"},{"location":"core-concepts/actions/#toggle","title":"Toggle","text":"<pre><code>def toggle_active(self, id: int):\n    \"\"\"Toggle boolean field.\"\"\"\n    try:\n        obj = self.model.objects.get(id=id)\n        obj.is_active = not obj.is_active\n        obj.save()\n\n        self.refresh()\n        status = \"activated\" if obj.is_active else \"deactivated\"\n        self.success(f\"Item {status}\")\n\n    except self.model.DoesNotExist:\n        self.error(\"Item not found\")\n</code></pre>"},{"location":"core-concepts/actions/#search","title":"Search","text":"<pre><code>def search(self, query: str = \"\"):\n    \"\"\"Search items by query.\"\"\"\n    self.state.search = query\n    self.state.page = 1  # Reset to first page\n\n    if not query:\n        self.state.items = []\n        return\n\n    # Apply search\n    results = self.model.objects.filter(\n        Q(name__icontains=query) |\n        Q(description__icontains=query)\n    )\n\n    self.state.items = [\n        ItemSchema.model_validate(item)\n        for item in results\n    ]\n</code></pre>"},{"location":"core-concepts/actions/#action-return-values","title":"Action Return Values","text":"<p>Actions do not use return values for client updates. State changes are automatic:</p> <pre><code># \u2705 Good - modify state directly\ndef increment(self):\n    self.state.count += 1\n    # State automatically synced to client\n\n# \u274c Wrong - return value ignored\ndef increment(self):\n    return {\"count\": self.state.count + 1}\n    # This does nothing!\n</code></pre>"},{"location":"core-concepts/actions/#action-messages","title":"Action Messages","text":"<p>Use built-in message methods for user feedback:</p> <pre><code>def save_profile(self):\n    try:\n        # Validation\n        if not self.state.name:\n            self.error(\"Name is required\")\n            return\n\n        # Save\n        profile = self.request.user.profile\n        profile.name = self.state.name\n        profile.save()\n\n        # Success message\n        self.success(\"Profile saved successfully!\")\n\n    except Exception as e:\n        logger.exception(\"Profile save failed\")\n        self.error(\"An error occurred. Please try again.\")\n</code></pre>"},{"location":"core-concepts/actions/#message-methods","title":"Message Methods","text":"<pre><code>self.success(\"Operation successful\")  # Green/success\nself.error(\"Something went wrong\")    # Red/error\nself.info(\"FYI: Something happened\")  # Blue/info\n</code></pre>"},{"location":"core-concepts/actions/#displaying-messages","title":"Displaying Messages","text":"<pre><code>&lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n    &lt;div\n        :class=\"{\n            'alert-success': msg.level === 'success',\n            'alert-error': msg.level === 'error',\n            'alert-info': msg.level === 'info'\n        }\"\n        x-text=\"msg.text\"\n    &gt;&lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"core-concepts/actions/#action-security","title":"Action Security","text":""},{"location":"core-concepts/actions/#authentication","title":"Authentication","text":"<p>Always check authentication when needed:</p> <pre><code>def delete_account(self):\n    # Check authentication\n    if not self.is_authenticated:\n        self.error(\"Authentication required\")\n        return\n\n    # Or use helper\n    if not self.require_auth(\"Please log in to delete your account\"):\n        return  # Stops execution if not authenticated\n\n    # Delete logic...\n</code></pre>"},{"location":"core-concepts/actions/#authorization","title":"Authorization","text":"<p>Check permissions before sensitive operations:</p> <pre><code>def delete_document(self, id: int):\n    # Check permission\n    if not self.request.user.has_perm('documents.delete_document'):\n        self.error(\"Permission denied\")\n        return\n\n    # Check ownership\n    doc = Document.objects.get(id=id)\n    if doc.owner != self.request.user:\n        self.error(\"You don't own this document\")\n        return\n\n    # Delete\n    doc.delete()\n    self.refresh()\n</code></pre>"},{"location":"core-concepts/actions/#input-validation","title":"Input Validation","text":"<p>Never trust client-side data:</p> <pre><code>def update_price(self, product_id: int, new_price: float):\n    # Validate input\n    if new_price &lt; 0:\n        self.error(\"Price cannot be negative\")\n        return\n\n    if new_price &gt; 1000000:\n        self.error(\"Price exceeds maximum\")\n        return\n\n    # Additional checks\n    product = Product.objects.get(id=product_id)\n    if product.owner != self.request.user:\n        self.error(\"Permission denied\")\n        return\n\n    # Update after validation\n    product.price = new_price\n    product.save()\n    self.success(\"Price updated\")\n</code></pre>"},{"location":"core-concepts/actions/#action-error-handling","title":"Action Error Handling","text":""},{"location":"core-concepts/actions/#try-except-blocks","title":"Try-Except Blocks","text":"<pre><code>def save_item(self):\n    try:\n        obj = self.model.objects.create(\n            **self.state.create_buffer.dict()\n        )\n        self.success(\"Created successfully\")\n\n    except ValidationError as e:\n        self.error(f\"Validation error: {e}\")\n\n    except IntegrityError:\n        self.error(\"Item already exists\")\n\n    except Exception as e:\n        logger.exception(\"Unexpected error\")\n        self.error(\"An error occurred\")\n</code></pre>"},{"location":"core-concepts/actions/#validation-errors","title":"Validation Errors","text":"<pre><code>from pydantic import ValidationError\n\ndef update_email(self, new_email: str):\n    try:\n        # Validate using Pydantic\n        validated = EmailSchema(email=new_email)\n\n        # Update\n        self.request.user.email = validated.email\n        self.request.user.save()\n        self.success(\"Email updated\")\n\n    except ValidationError as e:\n        # Show validation errors\n        for error in e.errors():\n            field = error['loc'][0]\n            message = error['msg']\n            self.error(f\"{field}: {message}\")\n</code></pre>"},{"location":"core-concepts/actions/#advanced-action-patterns","title":"Advanced Action Patterns","text":""},{"location":"core-concepts/actions/#optimistic-updates","title":"Optimistic Updates","text":"<p>Update UI immediately, then sync with server:</p> <pre><code>def toggle_completed(self, task_id: int):\n    # Update state immediately (optimistic)\n    for task in self.state.tasks:\n        if task.id == task_id:\n            task.completed = not task.completed\n            break\n\n    # Then sync to database\n    try:\n        task_obj = Task.objects.get(id=task_id)\n        task_obj.completed = not task_obj.completed\n        task_obj.save()\n\n    except Exception:\n        # If it fails, refresh to revert\n        self.refresh()\n        self.error(\"Failed to update task\")\n</code></pre>"},{"location":"core-concepts/actions/#batch-operations","title":"Batch Operations","text":"<pre><code>def bulk_delete(self, ids: List[int]):\n    \"\"\"Delete multiple items at once.\"\"\"\n    if not ids:\n        self.error(\"No items selected\")\n        return\n\n    try:\n        count = self.model.objects.filter(id__in=ids).delete()[0]\n        self.refresh()\n        self.success(f\"Deleted {count} items\")\n\n    except Exception as e:\n        logger.exception(\"Bulk delete failed\")\n        self.error(\"Failed to delete items\")\n</code></pre>"},{"location":"core-concepts/actions/#action-chaining","title":"Action Chaining","text":"<pre><code>def save_and_publish(self):\n    \"\"\"Chain multiple operations.\"\"\"\n    # Save first\n    if not self.save_draft():\n        return  # Stop if save failed\n\n    # Then publish\n    self.publish()\n\ndef save_draft(self) -&gt; bool:\n    \"\"\"Returns True if successful.\"\"\"\n    try:\n        # Save logic...\n        self.success(\"Draft saved\")\n        return True\n    except Exception:\n        self.error(\"Save failed\")\n        return False\n\ndef publish(self):\n    \"\"\"Assumes draft was saved.\"\"\"\n    obj = self.get_object(self.state.id)\n    obj.published = True\n    obj.save()\n    self.success(\"Published!\")\n</code></pre>"},{"location":"core-concepts/actions/#conditional-actions","title":"Conditional Actions","text":"<pre><code>def submit_form(self):\n    \"\"\"Different logic based on state.\"\"\"\n    if self.state.mode == 'create':\n        self.create_item()\n    elif self.state.mode == 'edit':\n        self.save_edit()\n    else:\n        self.error(\"Invalid mode\")\n</code></pre>"},{"location":"core-concepts/actions/#action-performance","title":"Action Performance","text":""},{"location":"core-concepts/actions/#database-optimization","title":"Database Optimization","text":"<pre><code># \u2705 Good - optimized query\ndef load_products(self):\n    products = Product.objects.select_related('category').prefetch_related('tags')\n    self.state.products = [\n        ProductSchema.model_validate(p) for p in products\n    ]\n\n# \u274c Avoid - N+1 queries\ndef load_products(self):\n    products = Product.objects.all()\n    for product in products:\n        _ = product.category  # Separate query each time!\n</code></pre>"},{"location":"core-concepts/actions/#limiting-data","title":"Limiting Data","text":"<pre><code>def search(self, query: str):\n    # Limit results to prevent huge payloads\n    results = Product.objects.filter(\n        name__icontains=query\n    )[:50]  # Max 50 results\n\n    self.state.results = [\n        ProductSchema.model_validate(p) for p in results\n    ]\n</code></pre>"},{"location":"core-concepts/actions/#caching","title":"Caching","text":"<pre><code>from django.core.cache import cache\n\ndef get_statistics(self):\n    \"\"\"Cache expensive calculations.\"\"\"\n    cache_key = f\"stats_{self.request.user.id}\"\n\n    stats = cache.get(cache_key)\n    if not stats:\n        # Expensive calculation\n        stats = calculate_statistics(self.request.user)\n        cache.set(cache_key, stats, 300)  # 5 minutes\n\n    self.state.statistics = stats\n</code></pre>"},{"location":"core-concepts/actions/#best-practices","title":"Best Practices","text":""},{"location":"core-concepts/actions/#1-keep-actions-small","title":"1. Keep Actions Small","text":"<pre><code># \u2705 Good - focused actions\ndef increment(self):\n    self.state.count += 1\n\ndef decrement(self):\n    self.state.count -= 1\n\n# \u274c Avoid - too much in one action\ndef manage_counter(self, operation: str, amount: int):\n    if operation == 'increment':\n        self.state.count += amount\n    elif operation == 'decrement':\n        self.state.count -= amount\n    # ... too complex\n</code></pre>"},{"location":"core-concepts/actions/#2-validate-early","title":"2. Validate Early","text":"<pre><code>def create_order(self, product_id: int, quantity: int):\n    # Validate first\n    if quantity &lt; 1:\n        self.error(\"Invalid quantity\")\n        return\n\n    if not self.is_authenticated:\n        self.error(\"Please log in\")\n        return\n\n    # Then proceed with logic\n    # ...\n</code></pre>"},{"location":"core-concepts/actions/#3-use-descriptive-names","title":"3. Use Descriptive Names","text":"<pre><code># \u2705 Good - clear intent\ndef mark_as_complete(self):\n    ...\n\ndef send_reminder_email(self):\n    ...\n\n# \u274c Avoid - vague names\ndef do_thing(self):\n    ...\n\ndef process(self):\n    ...\n</code></pre>"},{"location":"core-concepts/actions/#4-handle-errors-gracefully","title":"4. Handle Errors Gracefully","text":"<pre><code>def save(self):\n    try:\n        # Logic\n        self.success(\"Saved\")\n    except Exception as e:\n        logger.exception(\"Save failed\")  # Log for debugging\n        self.error(\"An error occurred\")  # Show user-friendly message\n</code></pre>"},{"location":"core-concepts/actions/#next-steps","title":"Next Steps","text":"<ul> <li>State Management - Managing component state</li> <li>Components - Component architecture</li> <li>Security Overview - Securing actions</li> </ul>"},{"location":"core-concepts/components/","title":"Components","text":"<p>Components are the building blocks of Django Nitro applications. A component combines server-side Python logic with client-side reactivity using AlpineJS.</p>"},{"location":"core-concepts/components/#component-hierarchy","title":"Component Hierarchy","text":"<p>Django Nitro provides three base component classes, each building on the previous one:</p> <pre><code>NitroComponent (Basic)\n    \u2193\nModelNitroComponent (ORM Integration)\n    \u2193\nCrudNitroComponent (Full CRUD)\n    \u2193\nBaseListComponent (Pagination + Search + Filters)\n</code></pre>"},{"location":"core-concepts/components/#choosing-the-right-component","title":"Choosing the Right Component","text":"Component Use When Features NitroComponent Custom components, forms Full control over state and actions ModelNitroComponent Single model instance Automatic model loading, <code>refresh()</code> CrudNitroComponent List with CRUD operations Pre-built create, edit, delete methods BaseListComponent Paginated lists Pagination, search, filters + CRUD"},{"location":"core-concepts/components/#component-anatomy","title":"Component Anatomy","text":"<p>Every Nitro component consists of:</p>"},{"location":"core-concepts/components/#1-state-class-pydantic-model","title":"1. State Class (Pydantic Model)","text":"<p>Defines the component's data structure with type safety:</p> <pre><code>from pydantic import BaseModel\n\nclass CounterState(BaseModel):\n    count: int = 0\n    step: int = 1\n</code></pre>"},{"location":"core-concepts/components/#2-component-class","title":"2. Component Class","text":"<p>The Python logic that handles state and actions:</p> <pre><code>from nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\n@register_component\nclass Counter(NitroComponent[CounterState]):\n    template_name = \"components/counter.html\"\n    state_class = CounterState\n\n    def get_initial_state(self, **kwargs):\n        return CounterState(\n            count=kwargs.get('initial', 0),\n            step=kwargs.get('step', 1)\n        )\n\n    def increment(self):\n        self.state.count += self.state.step\n</code></pre>"},{"location":"core-concepts/components/#3-template","title":"3. Template","text":"<p>HTML with AlpineJS directives for reactivity:</p> <pre><code>&lt;div class=\"counter\"&gt;\n    &lt;h2&gt;Count: &lt;span x-text=\"count\"&gt;&lt;/span&gt;&lt;/h2&gt;\n    &lt;button @click=\"call('increment')\"&gt;+&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"core-concepts/components/#component-registration","title":"Component Registration","text":"<p>Components must be registered to be accessible:</p> <pre><code>from nitro.registry import register_component\n\n@register_component\nclass MyComponent(NitroComponent[MyState]):\n    # ...\n</code></pre> <p>The <code>@register_component</code> decorator: - Makes the component discoverable by the API - Uses the class name as the component identifier - Must be applied to all components</p>"},{"location":"core-concepts/components/#component-lifecycle","title":"Component Lifecycle","text":"<ol> <li>Initialization: <code>__init__(request, **kwargs)</code></li> <li>Component is instantiated</li> <li>Request object is attached</li> <li> <p>Kwargs are stored</p> </li> <li> <p>State Creation: <code>get_initial_state(**kwargs)</code></p> </li> <li>Called to create initial state</li> <li>Receives the kwargs from initialization</li> <li> <p>Returns a Pydantic model instance</p> </li> <li> <p>Rendering: <code>render()</code></p> </li> <li>State is serialized to JSON</li> <li>Template is rendered with state</li> <li> <p>AlpineJS makes it reactive</p> </li> <li> <p>Action Calls: <code>call('action_name', params)</code></p> </li> <li>User triggers action from template</li> <li>State is sent to server</li> <li>Action method is executed</li> <li>Updated state is returned</li> <li>AlpineJS updates the UI</li> </ol>"},{"location":"core-concepts/components/#component-properties","title":"Component Properties","text":""},{"location":"core-concepts/components/#required-properties","title":"Required Properties","text":"<pre><code>class MyComponent(NitroComponent[MyState]):\n    template_name = \"components/my_component.html\"  # Required\n    state_class = MyState  # Required (or use Generic type hint)\n</code></pre>"},{"location":"core-concepts/components/#optional-properties","title":"Optional Properties","text":"<pre><code>class MyComponent(NitroComponent[MyState]):\n    secure_fields = ['id', 'price']  # Fields protected from tampering\n    model = MyModel  # Django model (for ModelNitroComponent)\n</code></pre>"},{"location":"core-concepts/components/#component-methods","title":"Component Methods","text":""},{"location":"core-concepts/components/#standard-methods","title":"Standard Methods","text":"<pre><code>def get_initial_state(self, **kwargs):\n    \"\"\"Create and return the initial state.\"\"\"\n    return MyState(**kwargs)\n\ndef refresh(self):\n    \"\"\"Reload state from database (override as needed).\"\"\"\n    # Custom refresh logic\n</code></pre>"},{"location":"core-concepts/components/#message-methods","title":"Message Methods","text":"<pre><code>def success(self, message: str):\n    \"\"\"Add success message.\"\"\"\n\ndef error(self, message: str):\n    \"\"\"Add error message.\"\"\"\n\ndef info(self, message: str):\n    \"\"\"Add info message.\"\"\"\n</code></pre>"},{"location":"core-concepts/components/#utility-methods","title":"Utility Methods","text":"<pre><code>def get_object(self, pk):\n    \"\"\"Get model instance by primary key (ModelNitroComponent).\"\"\"\n    return self.model.objects.get(pk=pk)\n</code></pre>"},{"location":"core-concepts/components/#component-context","title":"Component Context","text":"<p>Every component has access to:</p> <pre><code>class MyComponent(NitroComponent[MyState]):\n    def my_action(self):\n        # Request object\n        self.request.user\n        self.request.GET\n        self.request.POST\n\n        # Current state\n        self.state.field_name\n\n        # Component methods\n        self.success(\"Message\")\n        self.refresh()\n\n        # Security helpers (v0.3.0+)\n        self.current_user\n        self.is_authenticated\n        self.require_auth(\"Please log in\")\n</code></pre>"},{"location":"core-concepts/components/#component-initialization","title":"Component Initialization","text":""},{"location":"core-concepts/components/#in-django-views","title":"In Django Views","text":"<pre><code>from django.shortcuts import render\nfrom myapp.components import MyComponent\n\ndef my_view(request):\n    component = MyComponent(\n        request=request,\n        initial_value=10,\n        mode=\"edit\"\n    )\n    return render(request, 'page.html', {'component': component})\n</code></pre>"},{"location":"core-concepts/components/#in-templates","title":"In Templates","text":"<pre><code>{% extends \"base.html\" %}\n\n{% block content %}\n    &lt;h1&gt;My Page&lt;/h1&gt;\n    {{ component.render }}\n{% endblock %}\n</code></pre>"},{"location":"core-concepts/components/#nested-components","title":"Nested Components","text":"<p>Components can be nested for complex UIs:</p> <pre><code>def property_detail(request, pk):\n    property_comp = PropertyDetail(request=request, pk=pk)\n    tenant_list = TenantList(request=request, property_id=pk)\n\n    return render(request, 'property_detail.html', {\n        'property': property_comp,\n        'tenants': tenant_list\n    })\n</code></pre> <pre><code>&lt;div class=\"property-detail\"&gt;\n    {{ property.render }}\n\n    &lt;div class=\"tenants\"&gt;\n        {{ tenants.render }}\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"core-concepts/components/#best-practices","title":"Best Practices","text":""},{"location":"core-concepts/components/#1-keep-components-focused","title":"1. Keep Components Focused","text":"<p>Each component should have a single responsibility:</p> <pre><code># \u2705 Good - focused component\nclass TaskList(CrudNitroComponent[TaskListState]):\n    model = Task\n    # Handles task CRUD only\n\n# \u274c Avoid - too much responsibility\nclass Dashboard(NitroComponent[DashboardState]):\n    # Handles tasks, users, analytics, settings...\n</code></pre>"},{"location":"core-concepts/components/#2-use-appropriate-base-class","title":"2. Use Appropriate Base Class","text":"<p>Choose the simplest component that meets your needs:</p> <pre><code># \u2705 Good - using BaseListComponent for lists\nclass ProductList(BaseListComponent[ProductListState]):\n    model = Product\n    search_fields = ['name']\n\n# \u274c Avoid - reinventing pagination in NitroComponent\nclass ProductList(NitroComponent[ProductListState]):\n    def next_page(self):\n        # Implementing pagination from scratch...\n</code></pre>"},{"location":"core-concepts/components/#3-validate-input","title":"3. Validate Input","text":"<p>Always validate user input in action methods:</p> <pre><code>def update_price(self, new_price: float):\n    if new_price &lt; 0:\n        self.error(\"Price cannot be negative\")\n        return\n\n    if new_price &gt; 1000000:\n        self.error(\"Price too high\")\n        return\n\n    # Update price...\n</code></pre>"},{"location":"core-concepts/components/#4-handle-errors-gracefully","title":"4. Handle Errors Gracefully","text":"<pre><code>def save_item(self):\n    try:\n        # Save logic...\n        self.success(\"Saved successfully\")\n    except ValidationError as e:\n        self.error(f\"Validation error: {e}\")\n    except Exception as e:\n        logger.exception(\"Save failed\")\n        self.error(\"An error occurred. Please try again.\")\n</code></pre>"},{"location":"core-concepts/components/#next-steps","title":"Next Steps","text":"<ul> <li>State Management - Learn about managing component state</li> <li>Actions - Deep dive into component actions</li> <li>Component Reference - Detailed API documentation</li> </ul>"},{"location":"core-concepts/state-management/","title":"State Management","text":"<p>State is the heart of Django Nitro components. It defines the data structure, validation rules, and synchronization between server and client.</p>"},{"location":"core-concepts/state-management/#how-state-works","title":"How State Works","text":"<p>Django Nitro uses Pydantic models for state, providing:</p> <ol> <li>Type Safety - Full type hints and validation</li> <li>Automatic Serialization - Python \u2194 JSON conversion</li> <li>Client-Server Sync - Automatic state synchronization</li> <li>Security - Integrity verification for sensitive fields</li> </ol>"},{"location":"core-concepts/state-management/#state-flow","title":"State Flow","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Server    \u2502 1. Create state (Pydantic model)\n\u2502   (Python)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 2. Serialize to JSON\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Template   \u2502 3. Embed in HTML\n\u2502   (Django)  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 4. Parse and make reactive\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Client    \u2502 5. User interacts\n\u2502  (AlpineJS) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 6. Send updated state\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  API Call   \u2502 7. Validate and process\n\u2502   (Ninja)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n       \u2502\n       \u2193 8. Return updated state\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Client    \u2502 9. Update UI reactively\n\u2502  (AlpineJS) \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"core-concepts/state-management/#defining-state","title":"Defining State","text":""},{"location":"core-concepts/state-management/#basic-state-schema","title":"Basic State Schema","text":"<pre><code>from pydantic import BaseModel\n\nclass CounterState(BaseModel):\n    count: int = 0\n    step: int = 1\n</code></pre>"},{"location":"core-concepts/state-management/#state-with-validation","title":"State with Validation","text":"<pre><code>from pydantic import BaseModel, Field, validator, EmailStr\nfrom typing import Optional\n\nclass UserFormState(BaseModel):\n    name: str = Field(\"\", min_length=2, max_length=100)\n    email: EmailStr = \"\"\n    age: int = Field(0, ge=0, le=150)\n    bio: Optional[str] = None\n\n    @validator('name')\n    def name_must_not_be_empty(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Name is required')\n        return v.strip()\n\n    @validator('bio')\n    def bio_max_length(cls, v):\n        if v and len(v) &gt; 500:\n            raise ValueError('Bio too long (max 500 characters)')\n        return v\n</code></pre>"},{"location":"core-concepts/state-management/#state-with-django-models","title":"State with Django Models","text":"<p>Use <code>from_attributes=True</code> (formerly <code>orm_mode</code>) to load from Django models:</p> <pre><code>from pydantic import BaseModel\nfrom typing import Optional\n\nclass ProductSchema(BaseModel):\n    id: int\n    name: str\n    price: float\n    description: Optional[str] = None\n    is_active: bool = True\n\n    class Config:\n        from_attributes = True  # Enable ORM model loading\n</code></pre> <p>Now you can:</p> <pre><code>product = Product.objects.get(pk=1)\nstate = ProductSchema.model_validate(product)  # Converts Django model to Pydantic\n</code></pre>"},{"location":"core-concepts/state-management/#complex-state-structures","title":"Complex State Structures","text":""},{"location":"core-concepts/state-management/#nested-models","title":"Nested Models","text":"<pre><code>from pydantic import BaseModel\nfrom typing import List\n\nclass AddressSchema(BaseModel):\n    street: str\n    city: str\n    zip_code: str\n\nclass UserProfileState(BaseModel):\n    name: str\n    email: str\n    addresses: List[AddressSchema] = []\n</code></pre>"},{"location":"core-concepts/state-management/#state-with-enums","title":"State with Enums","text":"<pre><code>from enum import Enum\nfrom pydantic import BaseModel\n\nclass Priority(str, Enum):\n    LOW = \"low\"\n    MEDIUM = \"medium\"\n    HIGH = \"high\"\n\nclass TaskState(BaseModel):\n    title: str\n    priority: Priority = Priority.MEDIUM\n    completed: bool = False\n</code></pre>"},{"location":"core-concepts/state-management/#optional-and-nullable-fields","title":"Optional and Nullable Fields","text":"<pre><code>from typing import Optional\nfrom pydantic import BaseModel\n\nclass FormState(BaseModel):\n    # Optional with default\n    description: str = \"\"\n\n    # Nullable (can be None)\n    selected_id: Optional[int] = None\n\n    # Both optional and nullable\n    notes: Optional[str] = None\n</code></pre>"},{"location":"core-concepts/state-management/#state-in-component-classes","title":"State in Component Classes","text":""},{"location":"core-concepts/state-management/#initializing-state","title":"Initializing State","text":"<pre><code>@register_component\nclass MyComponent(NitroComponent[MyState]):\n    state_class = MyState\n\n    def get_initial_state(self, **kwargs):\n        \"\"\"Called when component is created.\"\"\"\n        return MyState(\n            field1=kwargs.get('field1', 'default'),\n            field2=kwargs.get('field2', 0)\n        )\n</code></pre>"},{"location":"core-concepts/state-management/#accessing-state","title":"Accessing State","text":"<pre><code>class MyComponent(NitroComponent[MyState]):\n    def my_action(self):\n        # Read state\n        current_count = self.state.count\n\n        # Modify state\n        self.state.count += 1\n\n        # State is automatically synced back to client\n</code></pre>"},{"location":"core-concepts/state-management/#state-persistence","title":"State Persistence","text":"<p>State is not persistent by default. It resets on page reload.</p> <p>For persistence, save to database or session:</p> <pre><code>class ShoppingCart(NitroComponent[CartState]):\n    def add_item(self, product_id: int):\n        # Add to state\n        self.state.items.append(product_id)\n\n        # Persist to session\n        self.request.session['cart'] = self.state.items\n\n    def get_initial_state(self, **kwargs):\n        # Restore from session\n        items = self.request.session.get('cart', [])\n        return CartState(items=items)\n</code></pre>"},{"location":"core-concepts/state-management/#list-components-state","title":"List Components State","text":"<p>List components use special state classes with built-in fields:</p>"},{"location":"core-concepts/state-management/#baseliststate","title":"BaseListState","text":"<pre><code>from nitro.list import BaseListState\nfrom pydantic import Field\nfrom typing import Optional\n\nclass ProductListState(BaseListState):\n    # Items in current page\n    items: list[ProductSchema] = []\n\n    # Inherited from BaseListState:\n    # - search: str = \"\"\n    # - page: int = 1\n    # - per_page: int = 20\n    # - total_count: int = 0\n    # - num_pages: int = 0\n    # - has_next: bool = False\n    # - has_previous: bool = False\n    # - showing_start: int = 0\n    # - showing_end: int = 0\n    # - filters: dict = {}\n\n    # IMPORTANT: Must override buffer types\n    create_buffer: ProductFormSchema = Field(default_factory=ProductFormSchema)\n    edit_buffer: Optional[ProductFormSchema] = None\n</code></pre>"},{"location":"core-concepts/state-management/#why-override-buffer-types","title":"Why Override Buffer Types?","text":"<p><code>BaseListState</code> uses <code>Any</code> for buffers, which breaks type inference:</p> <pre><code># \u274c Will fail - type inference broken\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    # Using inherited buffers with type Any\n\n# \u2705 Correct - explicit types\nclass MyListState(BaseListState):\n    items: list[ItemSchema] = []\n    create_buffer: ItemFormSchema = Field(default_factory=ItemFormSchema)\n    edit_buffer: Optional[ItemFormSchema] = None\n</code></pre>"},{"location":"core-concepts/state-management/#state-validation","title":"State Validation","text":""},{"location":"core-concepts/state-management/#client-side-automatic","title":"Client-Side (Automatic)","text":"<p>AlpineJS provides instant feedback through reactive bindings:</p> <pre><code>&lt;input\n    x-model=\"email\"\n    :class=\"{'error': errors.email}\"\n    type=\"email\"\n&gt;\n&lt;span x-show=\"errors.email\" x-text=\"errors.email\"&gt;&lt;/span&gt;\n</code></pre>"},{"location":"core-concepts/state-management/#server-side-pydantic","title":"Server-Side (Pydantic)","text":"<p>Validation happens automatically when state is updated:</p> <pre><code>class UserState(BaseModel):\n    email: EmailStr  # Validates email format\n    age: int = Field(ge=18, le=100)  # Age between 18-100\n\n    @validator('email')\n    def email_must_be_company(cls, v):\n        if not v.endswith('@company.com'):\n            raise ValueError('Must use company email')\n        return v\n</code></pre> <p>If validation fails: - Pydantic raises <code>ValidationError</code> - Error details are sent to client - Errors appear in <code>errors</code> object in template</p>"},{"location":"core-concepts/state-management/#custom-validation-in-actions","title":"Custom Validation in Actions","text":"<pre><code>def save_profile(self):\n    # Additional validation beyond Pydantic\n    if self.state.age &lt; 18:\n        self.error(\"Must be 18 or older\")\n        return\n\n    if contains_profanity(self.state.bio):\n        self.error(\"Bio contains inappropriate content\")\n        return\n\n    # Save after validation\n    profile = self.request.user.profile\n    profile.bio = self.state.bio\n    profile.save()\n    self.success(\"Profile updated\")\n</code></pre>"},{"location":"core-concepts/state-management/#state-security","title":"State Security","text":""},{"location":"core-concepts/state-management/#secure-fields","title":"Secure Fields","text":"<p>Prevent client-side tampering with sensitive fields:</p> <pre><code>class PricingComponent(NitroComponent[PricingState]):\n    secure_fields = ['price', 'discount_percent', 'user_id']\n</code></pre> <p>Secure fields are: - Protected with HMAC integrity tokens - Verified on every action call - Tampering triggers 403 Forbidden error</p>"},{"location":"core-concepts/state-management/#automatic-security-modelnitrocomponent","title":"Automatic Security (ModelNitroComponent)","text":"<p><code>ModelNitroComponent</code> automatically secures: - <code>id</code> field - Any field ending with <code>_id</code> (foreign keys)</p> <pre><code>class ProductEditor(ModelNitroComponent[ProductSchema]):\n    model = Product\n    # Automatically secured: id, category_id, owner_id\n</code></pre>"},{"location":"core-concepts/state-management/#state-and-templates","title":"State and Templates","text":""},{"location":"core-concepts/state-management/#accessing-state-in-templates","title":"Accessing State in Templates","text":"<p>State properties are directly available in Alpine:</p> <pre><code>&lt;!-- Direct access --&gt;\n&lt;div x-text=\"count\"&gt;&lt;/div&gt;\n&lt;div x-text=\"email\"&gt;&lt;/div&gt;\n\n&lt;!-- Conditional rendering --&gt;\n&lt;div x-show=\"is_active\"&gt;Active&lt;/div&gt;\n&lt;div x-show=\"!is_active\"&gt;Inactive&lt;/div&gt;\n\n&lt;!-- Loops --&gt;\n&lt;template x-for=\"item in items\" :key=\"item.id\"&gt;\n    &lt;div x-text=\"item.name\"&gt;&lt;/div&gt;\n&lt;/template&gt;\n\n&lt;!-- Computed values --&gt;\n&lt;div x-text=\"`Total: ${items.length}`\"&gt;&lt;/div&gt;\n</code></pre>"},{"location":"core-concepts/state-management/#two-way-binding","title":"Two-Way Binding","text":"<p>Use <code>x-model</code> for automatic synchronization:</p> <pre><code>&lt;!-- Text input --&gt;\n&lt;input x-model=\"name\" type=\"text\"&gt;\n\n&lt;!-- Number input --&gt;\n&lt;input x-model.number=\"age\" type=\"number\"&gt;\n\n&lt;!-- Checkbox --&gt;\n&lt;input x-model=\"is_active\" type=\"checkbox\"&gt;\n\n&lt;!-- Select --&gt;\n&lt;select x-model=\"category\"&gt;\n    &lt;option value=\"1\"&gt;Category 1&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Category 2&lt;/option&gt;\n&lt;/select&gt;\n\n&lt;!-- Textarea --&gt;\n&lt;textarea x-model=\"description\"&gt;&lt;/textarea&gt;\n</code></pre> <p>Changes are local only until you call an action:</p> <pre><code>&lt;input x-model=\"name\" type=\"text\"&gt;\n&lt;button @click=\"call('save')\"&gt;Save&lt;/button&gt;\n</code></pre>"},{"location":"core-concepts/state-management/#state-best-practices","title":"State Best Practices","text":""},{"location":"core-concepts/state-management/#1-use-proper-types","title":"1. Use Proper Types","text":"<pre><code># \u2705 Good - specific types\nclass TaskState(BaseModel):\n    title: str\n    due_date: Optional[date] = None\n    priority: Priority = Priority.MEDIUM\n\n# \u274c Avoid - vague types\nclass TaskState(BaseModel):\n    title: Any\n    due_date: Any\n    priority: Any\n</code></pre>"},{"location":"core-concepts/state-management/#2-provide-sensible-defaults","title":"2. Provide Sensible Defaults","text":"<pre><code># \u2705 Good - clear defaults\nclass FormState(BaseModel):\n    name: str = \"\"\n    is_active: bool = True\n    items: list[str] = Field(default_factory=list)\n\n# \u274c Avoid - no defaults (hard to initialize)\nclass FormState(BaseModel):\n    name: str\n    is_active: bool\n    items: list[str]\n</code></pre>"},{"location":"core-concepts/state-management/#3-use-validators-for-business-logic","title":"3. Use Validators for Business Logic","text":"<pre><code>class OrderState(BaseModel):\n    quantity: int = 1\n    unit_price: float = 0.0\n\n    @validator('quantity')\n    def quantity_positive(cls, v):\n        if v &lt; 1:\n            raise ValueError('Quantity must be at least 1')\n        return v\n\n    @property\n    def total_price(self) -&gt; float:\n        return self.quantity * self.unit_price\n</code></pre>"},{"location":"core-concepts/state-management/#4-keep-state-flat-when-possible","title":"4. Keep State Flat When Possible","text":"<pre><code># \u2705 Good - flat structure\nclass UserFormState(BaseModel):\n    name: str\n    email: str\n    street: str\n    city: str\n\n# \u26a0\ufe0f Use nesting only when necessary\nclass UserFormState(BaseModel):\n    name: str\n    email: str\n    address: AddressSchema  # OK if address is reused\n</code></pre>"},{"location":"core-concepts/state-management/#5-document-state-fields","title":"5. Document State Fields","text":"<pre><code>class ProductState(BaseModel):\n    \"\"\"State for product management component.\"\"\"\n\n    id: int\n    \"\"\"Product primary key (secured).\"\"\"\n\n    name: str = Field(\"\", min_length=1, max_length=200)\n    \"\"\"Product name (required, max 200 chars).\"\"\"\n\n    price: float = Field(0.0, ge=0)\n    \"\"\"Product price in USD (must be non-negative).\"\"\"\n</code></pre>"},{"location":"core-concepts/state-management/#next-steps","title":"Next Steps","text":"<ul> <li>Actions - Learn how to modify state through actions</li> <li>Components - Understanding component architecture</li> <li>Security Overview - Securing your state</li> </ul>"},{"location":"examples/counter/","title":"Counter Example","text":"<p>The Counter example is a simple, beginner-friendly demonstration of Django Nitro's core concepts. It shows how to build a reactive component without any database interaction.</p>"},{"location":"examples/counter/#location","title":"Location","text":"<pre><code>examples/counter/\n\u251c\u2500\u2500 config/              # Django project settings\n\u251c\u2500\u2500 counter_app/\n\u2502   \u251c\u2500\u2500 components/     # Nitro components\n\u2502   \u2502   \u2514\u2500\u2500 counter.py\n\u2502   \u2514\u2500\u2500 templates/\n\u2502       \u2514\u2500\u2500 components/\n\u2502           \u2514\u2500\u2500 counter.html\n\u251c\u2500\u2500 manage.py\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"examples/counter/#what-it-demonstrates","title":"What It Demonstrates","text":"<ul> <li>Basic <code>NitroComponent</code> usage</li> <li>State management with Pydantic</li> <li>Action methods</li> <li>Success messages</li> <li>AlpineJS template integration</li> <li>No database required</li> </ul>"},{"location":"examples/counter/#the-component","title":"The Component","text":""},{"location":"examples/counter/#state-definition","title":"State Definition","text":"<pre><code>from pydantic import BaseModel\n\nclass CounterState(BaseModel):\n    \"\"\"State schema for the counter component.\"\"\"\n    count: int = 0\n    step: int = 1\n</code></pre> <p>Fields: - <code>count</code> - Current counter value - <code>step</code> - Increment/decrement amount</p>"},{"location":"examples/counter/#component-class","title":"Component Class","text":"<pre><code>from nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\n@register_component\nclass Counter(NitroComponent[CounterState]):\n    template_name = \"components/counter.html\"\n    state_class = CounterState\n\n    def get_initial_state(self, **kwargs):\n        \"\"\"Initialize with custom values if provided.\"\"\"\n        return CounterState(\n            count=kwargs.get('initial', 0),\n            step=kwargs.get('step', 1)\n        )\n\n    def increment(self):\n        \"\"\"Increase counter by step amount.\"\"\"\n        self.state.count += self.state.step\n        self.success(f\"Count increased to {self.state.count}\")\n\n    def decrement(self):\n        \"\"\"Decrease counter by step amount.\"\"\"\n        self.state.count -= self.state.step\n        self.success(f\"Count decreased to {self.state.count}\")\n\n    def reset(self):\n        \"\"\"Reset counter to zero.\"\"\"\n        self.state.count = 0\n        self.success(\"Counter reset to 0\")\n</code></pre> <p>Actions: - <code>increment()</code> - Adds <code>step</code> to <code>count</code> - <code>decrement()</code> - Subtracts <code>step</code> from <code>count</code> - <code>reset()</code> - Sets <code>count</code> back to 0</p>"},{"location":"examples/counter/#template","title":"Template","text":"<pre><code>&lt;div class=\"counter-widget\"&gt;\n    &lt;h2&gt;Counter: &lt;span x-text=\"count\"&gt;&lt;/span&gt;&lt;/h2&gt;\n\n    &lt;div class=\"controls\"&gt;\n        &lt;!-- Decrement button --&gt;\n        &lt;button\n            @click=\"call('decrement')\"\n            :disabled=\"isLoading\"\n            class=\"btn btn-secondary\"\n        &gt;\n            -\n        &lt;/button&gt;\n\n        &lt;!-- Reset button --&gt;\n        &lt;button\n            @click=\"call('reset')\"\n            :disabled=\"isLoading\"\n            class=\"btn btn-outline\"\n        &gt;\n            Reset\n        &lt;/button&gt;\n\n        &lt;!-- Increment button --&gt;\n        &lt;button\n            @click=\"call('increment')\"\n            :disabled=\"isLoading\"\n            class=\"btn btn-primary\"\n        &gt;\n            +\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Step control --&gt;\n    &lt;div class=\"step-control\"&gt;\n        &lt;label&gt;\n            Step:\n            &lt;input\n                type=\"number\"\n                x-model.number=\"step\"\n                min=\"1\"\n                max=\"100\"\n            &gt;\n        &lt;/label&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Loading indicator --&gt;\n    &lt;div x-show=\"isLoading\" class=\"loading\"&gt;\n        &lt;span&gt;Processing...&lt;/span&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;div class=\"messages\"&gt;\n        &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n            &lt;div\n                :class=\"'alert alert-' + msg.level\"\n                x-text=\"msg.text\"\n            &gt;&lt;/div&gt;\n        &lt;/template&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre> <p>Alpine Features Used: - <code>x-text</code> - Display reactive state - <code>@click</code> - Handle button clicks - <code>:disabled</code> - Disable during loading - <code>x-model.number</code> - Two-way binding for step - <code>x-show</code> - Conditional display - <code>x-for</code> - Loop through messages</p>"},{"location":"examples/counter/#usage-in-views","title":"Usage in Views","text":"<pre><code>from django.shortcuts import render\nfrom counter_app.components.counter import Counter\n\ndef index(request):\n    \"\"\"Home page with counter component.\"\"\"\n    # Initialize with custom values\n    counter = Counter(\n        request=request,\n        initial=10,  # Start at 10\n        step=5       # Increment by 5\n    )\n\n    return render(request, 'index.html', {\n        'counter': counter\n    })\n</code></pre>"},{"location":"examples/counter/#running-the-example","title":"Running the Example","text":""},{"location":"examples/counter/#setup","title":"Setup","text":"<pre><code>cd examples/counter\n\n# Create virtual environment\npython -m venv env\nsource env/bin/activate  # Windows: env\\Scripts\\activate\n\n# Install dependencies\npip install django django-ninja pydantic django-nitro\n\n# Run migrations\npython manage.py migrate\n\n# Start server\npython manage.py runserver\n</code></pre>"},{"location":"examples/counter/#access","title":"Access","text":"<p>Visit: <code>http://localhost:8000/</code></p>"},{"location":"examples/counter/#key-concepts","title":"Key Concepts","text":""},{"location":"examples/counter/#1-state-is-reactive","title":"1. State is Reactive","text":"<p>When you click increment, the state changes and the UI updates automatically:</p> <pre><code>User clicks \"+\" button\n\u2192 call('increment') sent to server\n\u2192 increment() method executes\n\u2192 self.state.count += self.state.step\n\u2192 Updated state sent back to client\n\u2192 Alpine updates display\n</code></pre>"},{"location":"examples/counter/#2-actions-are-server-side","title":"2. Actions are Server-Side","text":"<p>All logic runs on the server:</p> <pre><code>def increment(self):\n    self.state.count += self.state.step  # Server-side Python\n    self.success(\"Count increased\")     # Server generates message\n</code></pre> <p>No JavaScript needed for business logic!</p>"},{"location":"examples/counter/#3-two-way-binding","title":"3. Two-Way Binding","text":"<p>The step input uses <code>x-model</code>:</p> <pre><code>&lt;input x-model.number=\"step\" type=\"number\"&gt;\n</code></pre> <p>Changes are local until an action is called. The server gets the updated <code>step</code> value with every action.</p>"},{"location":"examples/counter/#4-loading-states","title":"4. Loading States","text":"<p>AlpineJS provides <code>isLoading</code> automatically:</p> <pre><code>&lt;button :disabled=\"isLoading\"&gt;\n    Click Me\n&lt;/button&gt;\n\n&lt;div x-show=\"isLoading\"&gt;\n    Processing...\n&lt;/div&gt;\n</code></pre>"},{"location":"examples/counter/#5-messages","title":"5. Messages","text":"<p>Server-side messages appear in the template:</p> <pre><code># Server\nself.success(\"Counter reset!\")\n</code></pre> <pre><code>&lt;!-- Client --&gt;\n&lt;template x-for=\"msg in messages\"&gt;\n    &lt;div x-text=\"msg.text\"&gt;&lt;/div&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"examples/counter/#customization-ideas","title":"Customization Ideas","text":""},{"location":"examples/counter/#add-a-maximum","title":"Add a Maximum","text":"<pre><code>class CounterState(BaseModel):\n    count: int = 0\n    step: int = 1\n    max_count: int = 100\n\nclass Counter(NitroComponent[CounterState]):\n    def increment(self):\n        if self.state.count + self.state.step &gt; self.state.max_count:\n            self.error(f\"Cannot exceed {self.state.max_count}\")\n            return\n\n        self.state.count += self.state.step\n        self.success(f\"Count: {self.state.count}\")\n</code></pre>"},{"location":"examples/counter/#add-history","title":"Add History","text":"<pre><code>class CounterState(BaseModel):\n    count: int = 0\n    step: int = 1\n    history: list[int] = Field(default_factory=list)\n\nclass Counter(NitroComponent[CounterState]):\n    def increment(self):\n        self.state.history.append(self.state.count)\n        self.state.count += self.state.step\n\n    def undo(self):\n        if self.state.history:\n            self.state.count = self.state.history.pop()\n            self.success(\"Undone\")\n        else:\n            self.error(\"Nothing to undo\")\n</code></pre>"},{"location":"examples/counter/#persist-to-session","title":"Persist to Session","text":"<pre><code>class Counter(NitroComponent[CounterState]):\n    def get_initial_state(self, **kwargs):\n        # Load from session\n        count = self.request.session.get('counter_value', 0)\n        return CounterState(count=count)\n\n    def increment(self):\n        self.state.count += self.state.step\n\n        # Save to session\n        self.request.session['counter_value'] = self.state.count\n        self.success(f\"Count: {self.state.count}\")\n</code></pre>"},{"location":"examples/counter/#whats-next","title":"What's Next?","text":"<p>After understanding the Counter example, explore:</p> <ol> <li>Property Manager Example - See CRUD operations with Django models</li> <li>BaseListComponent - Learn about pagination and search</li> <li>Security Mixins - Add authentication and permissions</li> </ol>"},{"location":"examples/counter/#troubleshooting","title":"Troubleshooting","text":""},{"location":"examples/counter/#counter-not-updating","title":"Counter Not Updating","text":"<p>Check: 1. Is <code>nitro.js</code> loaded after Alpine? 2. Is the component registered with <code>@register_component</code>? 3. Check browser console for errors</p>"},{"location":"examples/counter/#state-resets-on-refresh","title":"State Resets on Refresh","text":"<p>This is normal! Component state is not persistent by default. To persist: - Use Django sessions (see customization above) - Use database models (see Property Manager example) - Use browser localStorage (requires custom JavaScript)</p>"},{"location":"examples/counter/#complete-code","title":"Complete Code","text":"<p>The full working example is available in:</p> <pre><code>examples/counter/\n</code></pre> <p>Clone the repository and run it to see it in action!</p>"},{"location":"examples/counter/#learn-more","title":"Learn More","text":"<ul> <li>NitroComponent Reference</li> <li>State Management Guide</li> <li>Actions Guide</li> </ul>"},{"location":"examples/property-manager/","title":"Property Manager Example","text":"<p>The Property Manager example is a comprehensive demonstration of Django Nitro's capabilities for building real-world CRUD applications with database integration, relationships, and advanced features.</p>"},{"location":"examples/property-manager/#location","title":"Location","text":"<pre><code>examples/property-manager/\n\u251c\u2500\u2500 config/                    # Django project settings\n\u251c\u2500\u2500 properties/\n\u2502   \u251c\u2500\u2500 models.py             # Property and Tenant models\n\u2502   \u251c\u2500\u2500 schemas.py            # Pydantic schemas\n\u2502   \u251c\u2500\u2500 components/\n\u2502   \u2502   \u251c\u2500\u2500 property_list.py\n\u2502   \u2502   \u2514\u2500\u2500 tenant_list.py\n\u2502   \u2514\u2500\u2500 templates/\n\u2502       \u2514\u2500\u2500 components/\n\u2502           \u251c\u2500\u2500 property_list.html\n\u2502           \u2514\u2500\u2500 tenant_list.html\n\u251c\u2500\u2500 manage.py\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"examples/property-manager/#what-it-demonstrates","title":"What It Demonstrates","text":"<ul> <li>Django ORM Integration - Working with Django models</li> <li>BaseListComponent - Pagination, search, and filters</li> <li>CRUD Operations - Create, read, update, delete</li> <li>Related Models - Foreign keys and relationships</li> <li>Annotations - Database aggregations</li> <li>Inline Editing - Edit items without page reload</li> <li>Nested Components - Property \u2192 Tenants relationship</li> <li>Search &amp; Filters - Multi-field search</li> <li>Real-world patterns - Production-ready code</li> </ul>"},{"location":"examples/property-manager/#database-models","title":"Database Models","text":""},{"location":"examples/property-manager/#property-model","title":"Property Model","text":"<pre><code>from django.db import models\n\nclass Property(models.Model):\n    name = models.CharField(max_length=200)\n    address = models.TextField()\n    units = models.IntegerField(default=1)\n    monthly_rent = models.DecimalField(max_digits=10, decimal_places=2)\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    class Meta:\n        verbose_name_plural = \"Properties\"\n        ordering = ['-created_at']\n\n    def __str__(self):\n        return self.name\n</code></pre>"},{"location":"examples/property-manager/#tenant-model","title":"Tenant Model","text":"<pre><code>class Tenant(models.Model):\n    property = models.ForeignKey(\n        Property,\n        on_delete=models.CASCADE,\n        related_name='tenants'\n    )\n    name = models.CharField(max_length=200)\n    email = models.EmailField()\n    phone = models.CharField(max_length=20)\n    move_in_date = models.DateField()\n    monthly_rent = models.DecimalField(max_digits=10, decimal_places=2)\n    is_active = models.BooleanField(default=True)\n\n    class Meta:\n        ordering = ['name']\n\n    def __str__(self):\n        return f\"{self.name} @ {self.property.name}\"\n</code></pre>"},{"location":"examples/property-manager/#pydantic-schemas","title":"Pydantic Schemas","text":""},{"location":"examples/property-manager/#property-schemas","title":"Property Schemas","text":"<pre><code>from pydantic import BaseModel, Field, validator\nfrom typing import Optional\nfrom decimal import Decimal\n\nclass PropertySchema(BaseModel):\n    \"\"\"Schema for displaying a property.\"\"\"\n    id: int\n    name: str\n    address: str\n    units: int\n    monthly_rent: Decimal\n    is_active: bool\n    tenant_count: int = 0  # From annotation\n\n    class Config:\n        from_attributes = True\n\nclass PropertyFormSchema(BaseModel):\n    \"\"\"Schema for creating/editing properties.\"\"\"\n    name: str = \"\"\n    address: str = \"\"\n    units: int = 1\n    monthly_rent: Decimal = Decimal('0.00')\n\n    @validator('name')\n    def name_required(cls, v):\n        if not v or not v.strip():\n            raise ValueError('Name is required')\n        return v.strip()\n\n    @validator('units')\n    def units_positive(cls, v):\n        if v &lt; 1:\n            raise ValueError('Units must be at least 1')\n        return v\n\n    @validator('monthly_rent')\n    def rent_positive(cls, v):\n        if v &lt; 0:\n            raise ValueError('Rent cannot be negative')\n        return v\n\nclass PropertyListState(BaseListState):\n    \"\"\"State for property list component.\"\"\"\n    items: list[PropertySchema] = []\n\n    # Must override buffer types explicitly\n    create_buffer: PropertyFormSchema = Field(default_factory=PropertyFormSchema)\n    edit_buffer: Optional[PropertyFormSchema] = None\n</code></pre>"},{"location":"examples/property-manager/#property-list-component","title":"Property List Component","text":"<pre><code>from django.db.models import Count\nfrom nitro.list import BaseListComponent\nfrom nitro.registry import register_component\n\n@register_component\nclass PropertyList(BaseListComponent[PropertyListState]):\n    template_name = \"components/property_list.html\"\n    state_class = PropertyListState\n    model = Property\n\n    # Configuration\n    search_fields = ['name', 'address']\n    per_page = 20\n    order_by = '-created_at'\n\n    def get_base_queryset(self, search='', filters=None):\n        \"\"\"Custom queryset with annotations.\"\"\"\n        qs = self.model.objects.annotate(\n            tenant_count=Count('tenants')\n        )\n\n        # Apply search\n        if search:\n            qs = self.apply_search(qs, search)\n\n        # Apply filters\n        if filters:\n            if 'is_active' in filters and filters['is_active'] is not None:\n                qs = qs.filter(is_active=filters['is_active'])\n\n        return qs.order_by(self.order_by)\n\n    def toggle_active(self, id: int):\n        \"\"\"Toggle property active status.\"\"\"\n        try:\n            prop = self.model.objects.get(id=id)\n            prop.is_active = not prop.is_active\n            prop.save()\n\n            self.refresh()\n\n            status = \"activated\" if prop.is_active else \"deactivated\"\n            self.success(f\"{prop.name} {status}\")\n        except self.model.DoesNotExist:\n            self.error(\"Property not found\")\n</code></pre>"},{"location":"examples/property-manager/#property-list-template","title":"Property List Template","text":"<pre><code>&lt;div class=\"property-list\"&gt;\n    &lt;!-- Search and Filters --&gt;\n    &lt;div class=\"list-header\"&gt;\n        &lt;h2&gt;Properties&lt;/h2&gt;\n\n        &lt;div class=\"search-bar\"&gt;\n            &lt;input\n                x-model=\"search\"\n                @input.debounce.300ms=\"call('search_items', {search: $el.value})\"\n                placeholder=\"Search properties...\"\n                type=\"search\"\n            &gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"filters\"&gt;\n            &lt;select @change=\"call('set_filters', {\n                is_active: $el.value === '' ? null : $el.value === 'true'\n            })\"&gt;\n                &lt;option value=\"\"&gt;All Properties&lt;/option&gt;\n                &lt;option value=\"true\"&gt;Active Only&lt;/option&gt;\n                &lt;option value=\"false\"&gt;Inactive Only&lt;/option&gt;\n            &lt;/select&gt;\n\n            &lt;button @click=\"call('clear_filters')\" x-show=\"search || Object.keys(filters).length &gt; 0\"&gt;\n                Clear Filters\n            &lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Results Info --&gt;\n    &lt;div class=\"results-info\" x-show=\"total_count &gt; 0\"&gt;\n        Showing &lt;strong x-text=\"showing_start\"&gt;&lt;/strong&gt;\n        - &lt;strong x-text=\"showing_end\"&gt;&lt;/strong&gt;\n        of &lt;strong x-text=\"total_count\"&gt;&lt;/strong&gt; properties\n    &lt;/div&gt;\n\n    &lt;!-- Create Form --&gt;\n    &lt;div class=\"create-form\"&gt;\n        &lt;h3&gt;Add Property&lt;/h3&gt;\n\n        &lt;input\n            x-model=\"create_buffer.name\"\n            placeholder=\"Property name\"\n            type=\"text\"\n        &gt;\n\n        &lt;textarea\n            x-model=\"create_buffer.address\"\n            placeholder=\"Address\"\n            rows=\"2\"\n        &gt;&lt;/textarea&gt;\n\n        &lt;input\n            x-model.number=\"create_buffer.units\"\n            placeholder=\"Units\"\n            type=\"number\"\n            min=\"1\"\n        &gt;\n\n        &lt;input\n            x-model.number=\"create_buffer.monthly_rent\"\n            placeholder=\"Monthly rent\"\n            type=\"number\"\n            step=\"0.01\"\n            min=\"0\"\n        &gt;\n\n        &lt;button @click=\"call('create_item')\" :disabled=\"isLoading\"&gt;\n            Add Property\n        &lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Properties Table --&gt;\n    &lt;table class=\"data-table\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Name&lt;/th&gt;\n                &lt;th&gt;Address&lt;/th&gt;\n                &lt;th&gt;Units&lt;/th&gt;\n                &lt;th&gt;Rent&lt;/th&gt;\n                &lt;th&gt;Tenants&lt;/th&gt;\n                &lt;th&gt;Status&lt;/th&gt;\n                &lt;th&gt;Actions&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n            &lt;template x-for=\"property in items\" :key=\"property.id\"&gt;\n                &lt;tr&gt;\n                    &lt;!-- Normal View --&gt;\n                    &lt;template x-if=\"editing_id !== property.id\"&gt;\n                        &lt;td x-text=\"property.name\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"property.address\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"property.units\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"'$' + property.monthly_rent\"&gt;&lt;/td&gt;\n                        &lt;td x-text=\"property.tenant_count\"&gt;&lt;/td&gt;\n                        &lt;td&gt;\n                            &lt;span\n                                :class=\"property.is_active ? 'badge-success' : 'badge-secondary'\"\n                                x-text=\"property.is_active ? 'Active' : 'Inactive'\"\n                            &gt;&lt;/span&gt;\n                        &lt;/td&gt;\n                        &lt;td class=\"actions\"&gt;\n                            &lt;button @click=\"call('start_edit', {id: property.id})\" class=\"btn-sm\"&gt;\n                                Edit\n                            &lt;/button&gt;\n                            &lt;button @click=\"call('toggle_active', {id: property.id})\" class=\"btn-sm\"&gt;\n                                &lt;span x-text=\"property.is_active ? 'Deactivate' : 'Activate'\"&gt;&lt;/span&gt;\n                            &lt;/button&gt;\n                            &lt;button\n                                @click=\"confirm('Delete this property?') &amp;&amp; call('delete_item', {id: property.id})\"\n                                class=\"btn-sm btn-danger\"\n                            &gt;\n                                Delete\n                            &lt;/button&gt;\n                        &lt;/td&gt;\n                    &lt;/template&gt;\n\n                    &lt;!-- Edit View --&gt;\n                    &lt;template x-if=\"editing_id === property.id &amp;&amp; edit_buffer\"&gt;\n                        &lt;td colspan=\"7\"&gt;\n                            &lt;div class=\"inline-edit\"&gt;\n                                &lt;input x-model=\"edit_buffer.name\" type=\"text\"&gt;\n                                &lt;textarea x-model=\"edit_buffer.address\" rows=\"2\"&gt;&lt;/textarea&gt;\n                                &lt;input x-model.number=\"edit_buffer.units\" type=\"number\"&gt;\n                                &lt;input x-model.number=\"edit_buffer.monthly_rent\" type=\"number\" step=\"0.01\"&gt;\n\n                                &lt;button @click=\"call('save_edit')\"&gt;Save&lt;/button&gt;\n                                &lt;button @click=\"call('cancel_edit')\"&gt;Cancel&lt;/button&gt;\n                            &lt;/div&gt;\n                        &lt;/td&gt;\n                    &lt;/template&gt;\n                &lt;/tr&gt;\n            &lt;/template&gt;\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n\n    &lt;!-- Empty State --&gt;\n    &lt;div x-show=\"items.length === 0\" class=\"empty-state\"&gt;\n        &lt;p x-show=\"!search &amp;&amp; Object.keys(filters).length === 0\"&gt;\n            No properties yet. Add one above!\n        &lt;/p&gt;\n        &lt;p x-show=\"search || Object.keys(filters).length &gt; 0\"&gt;\n            No properties match your search or filters.\n        &lt;/p&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Pagination --&gt;\n    &lt;div class=\"pagination\" x-show=\"num_pages &gt; 1\"&gt;\n        &lt;button\n            @click=\"call('previous_page')\"\n            :disabled=\"!has_previous || isLoading\"\n        &gt;\n            Previous\n        &lt;/button&gt;\n\n        &lt;span&gt;\n            Page &lt;strong x-text=\"page\"&gt;&lt;/strong&gt;\n            of &lt;strong x-text=\"num_pages\"&gt;&lt;/strong&gt;\n        &lt;/span&gt;\n\n        &lt;button\n            @click=\"call('next_page')\"\n            :disabled=\"!has_next || isLoading\"\n        &gt;\n            Next\n        &lt;/button&gt;\n\n        &lt;select\n            x-model.number=\"per_page\"\n            @change=\"call('set_per_page', {per_page: parseInt($el.value)})\"\n        &gt;\n            &lt;option value=\"10\"&gt;10&lt;/option&gt;\n            &lt;option value=\"20\"&gt;20&lt;/option&gt;\n            &lt;option value=\"50\"&gt;50&lt;/option&gt;\n        &lt;/select&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div :class=\"'alert alert-' + msg.level\" x-text=\"msg.text\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"examples/property-manager/#tenant-list-component","title":"Tenant List Component","text":"<p>Demonstrates nested components - listing tenants for a specific property.</p> <pre><code>@register_component\nclass TenantList(BaseListComponent[TenantListState]):\n    template_name = \"components/tenant_list.html\"\n    state_class = TenantListState\n    model = Tenant\n\n    search_fields = ['name', 'email', 'phone']\n    per_page = 10\n    order_by = 'name'\n\n    def get_base_queryset(self, search='', filters=None):\n        \"\"\"Filter tenants by property.\"\"\"\n        property_id = self.kwargs.get('property_id')\n        qs = self.model.objects.filter(property_id=property_id)\n\n        # Apply search\n        if search:\n            qs = self.apply_search(qs, search)\n\n        # Apply filters\n        if filters:\n            if 'is_active' in filters and filters['is_active'] is not None:\n                qs = qs.filter(is_active=filters['is_active'])\n\n        return qs.select_related('property').order_by(self.order_by)\n\n    def create_item(self):\n        \"\"\"Create tenant with property association.\"\"\"\n        property_id = self.kwargs.get('property_id')\n        if not property_id:\n            self.error(\"No property specified\")\n            return\n\n        try:\n            tenant = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                property_id=property_id\n            )\n            self.refresh()\n            self.success(f\"Added tenant: {tenant.name}\")\n        except Exception as e:\n            logger.exception(\"Create tenant failed\")\n            self.error(\"Failed to create tenant\")\n</code></pre>"},{"location":"examples/property-manager/#key-features","title":"Key Features","text":""},{"location":"examples/property-manager/#1-database-annotations","title":"1. Database Annotations","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    # Add computed field\n    qs = self.model.objects.annotate(\n        tenant_count=Count('tenants')\n    )\n    return qs\n</code></pre> <p>Access in template:</p> <pre><code>&lt;td x-text=\"property.tenant_count\"&gt;&lt;/td&gt;\n</code></pre>"},{"location":"examples/property-manager/#2-multi-field-search","title":"2. Multi-Field Search","text":"<pre><code>search_fields = ['name', 'address']\n</code></pre> <p>Searches across multiple fields with OR logic.</p>"},{"location":"examples/property-manager/#3-dynamic-filtering","title":"3. Dynamic Filtering","text":"<pre><code>if filters:\n    if 'is_active' in filters:\n        qs = qs.filter(is_active=filters['is_active'])\n</code></pre>"},{"location":"examples/property-manager/#4-inline-editing","title":"4. Inline Editing","text":"<pre><code>&lt;template x-if=\"editing_id === property.id &amp;&amp; edit_buffer\"&gt;\n    &lt;!-- Editable inputs --&gt;\n    &lt;input x-model=\"edit_buffer.name\"&gt;\n    &lt;button @click=\"call('save_edit')\"&gt;Save&lt;/button&gt;\n&lt;/template&gt;\n</code></pre>"},{"location":"examples/property-manager/#5-pagination","title":"5. Pagination","text":"<pre><code>&lt;div class=\"pagination\" x-show=\"num_pages &gt; 1\"&gt;\n    &lt;button @click=\"call('previous_page')\"&gt;Previous&lt;/button&gt;\n    &lt;span&gt;Page &lt;span x-text=\"page\"&gt;&lt;/span&gt; of &lt;span x-text=\"num_pages\"&gt;&lt;/span&gt;&lt;/span&gt;\n    &lt;button @click=\"call('next_page')\"&gt;Next&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"examples/property-manager/#6-nested-components","title":"6. Nested Components","text":"<pre><code>def property_detail(request, pk):\n    property_comp = PropertyDetail(request=request, pk=pk)\n    tenant_list = TenantList(request=request, property_id=pk)\n\n    return render(request, 'property_detail.html', {\n        'property': property_comp,\n        'tenants': tenant_list\n    })\n</code></pre>"},{"location":"examples/property-manager/#running-the-example","title":"Running the Example","text":""},{"location":"examples/property-manager/#setup","title":"Setup","text":"<pre><code>cd examples/property-manager\n\n# Create virtual environment\npython -m venv env\nsource env/bin/activate\n\n# Install dependencies\npip install -r requirements.txt\n\n# Run migrations\npython manage.py migrate\n\n# Create sample data (optional)\npython manage.py loaddata sample_data.json\n\n# Start server\npython manage.py runserver\n</code></pre>"},{"location":"examples/property-manager/#access","title":"Access","text":"<p>Visit: <code>http://localhost:8000/</code></p>"},{"location":"examples/property-manager/#production-patterns","title":"Production Patterns","text":""},{"location":"examples/property-manager/#validation","title":"Validation","text":"<pre><code>@validator('name')\ndef name_required(cls, v):\n    if not v or not v.strip():\n        raise ValueError('Name is required')\n    return v.strip()\n</code></pre>"},{"location":"examples/property-manager/#error-handling","title":"Error Handling","text":"<pre><code>try:\n    property = self.model.objects.create(...)\n    self.success(\"Property created\")\nexcept ValidationError as e:\n    self.error(f\"Validation error: {e}\")\nexcept Exception:\n    logger.exception(\"Create failed\")\n    self.error(\"An error occurred\")\n</code></pre>"},{"location":"examples/property-manager/#query-optimization","title":"Query Optimization","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    qs = self.model.objects.select_related(\n        'property'\n    ).prefetch_related(\n        'tenants'\n    )\n    return qs\n</code></pre>"},{"location":"examples/property-manager/#learn-from-this-example","title":"Learn From This Example","text":"<ol> <li>Start Simple - Begin with basic CRUD, add features incrementally</li> <li>Use BaseListComponent - Don't reinvent pagination/search</li> <li>Validate Everything - Server-side validation is critical</li> <li>Optimize Queries - Use select_related and prefetch_related</li> <li>Handle Errors - Always use try/except and show helpful messages</li> <li>Test Thoroughly - Write tests for all CRUD operations</li> </ol>"},{"location":"examples/property-manager/#whats-next","title":"What's Next?","text":"<p>After exploring this example:</p> <ol> <li>Add Authentication - Use OwnershipMixin</li> <li>Add Permissions - Use PermissionMixin</li> <li>Add Multi-Tenancy - Use TenantScopedMixin</li> <li>Add File Uploads - See File Uploads documentation (coming soon)</li> </ol>"},{"location":"examples/property-manager/#complete-code","title":"Complete Code","text":"<p>The full working example is available in:</p> <pre><code>examples/property-manager/\n</code></pre>"},{"location":"examples/property-manager/#learn-more","title":"Learn More","text":"<ul> <li>BaseListComponent Reference</li> <li>CrudNitroComponent Reference</li> <li>State Management Guide</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.12+</li> <li>Django 5.2+</li> <li>django-ninja 1.4.0+</li> <li>pydantic 2.0+</li> </ul>"},{"location":"getting-started/installation/#install-from-pypi","title":"Install from PyPI","text":"<pre><code>pip install django-nitro\n</code></pre>"},{"location":"getting-started/installation/#install-from-source","title":"Install from Source","text":"<pre><code>git clone https://github.com/django-nitro/django-nitro.git\ncd django-nitro\npip install -e .\n</code></pre>"},{"location":"getting-started/installation/#setup","title":"Setup","text":""},{"location":"getting-started/installation/#1-add-to-installed_apps","title":"1. Add to INSTALLED_APPS","text":"<pre><code># settings.py\nINSTALLED_APPS = [\n    # ...\n    'nitro',\n    # your apps here\n]\n</code></pre>"},{"location":"getting-started/installation/#2-include-nitro-api-urls","title":"2. Include Nitro API URLs","text":"<pre><code># urls.py\nfrom django.urls import path\nfrom nitro.api import api\n\nurlpatterns = [\n    # ...\n    path(\"api/nitro/\", api.urls),  # Important: must be under /api/nitro/\n]\n</code></pre>"},{"location":"getting-started/installation/#3-add-alpine-and-nitro-js-to-your-base-template","title":"3. Add Alpine and Nitro JS to your base template","text":"<pre><code>&lt;!-- templates/base.html --&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;My App&lt;/title&gt;\n    &lt;!-- Alpine JS (required) --&gt;\n    &lt;script defer src=\"https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    {% block content %}{% endblock %}\n\n    &lt;!-- Nitro JS (load AFTER Alpine) --&gt;\n    {% load static %}\n    &lt;script src=\"{% static 'nitro/nitro.js' %}\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>"},{"location":"getting-started/installation/#4-run-collectstatic-production","title":"4. Run collectstatic (production)","text":"<pre><code>python manage.py collectstatic\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start Tutorial</li> <li>Core Concepts</li> <li>Examples</li> </ul>"},{"location":"getting-started/quick-start/","title":"Quick Start","text":"<p>Let's build a simple counter component to understand Django Nitro basics.</p>"},{"location":"getting-started/quick-start/#1-define-the-component","title":"1. Define the Component","text":"<pre><code># myapp/components/counter.py\nfrom pydantic import BaseModel\nfrom nitro.base import NitroComponent\nfrom nitro.registry import register_component\n\n\nclass CounterState(BaseModel):\n    \"\"\"State schema for the counter component.\"\"\"\n    count: int = 0\n    step: int = 1\n\n\n@register_component\nclass Counter(NitroComponent[CounterState]):\n    template_name = \"components/counter.html\"\n    state_class = CounterState\n\n    def get_initial_state(self, **kwargs):\n        \"\"\"Initialize the component state.\"\"\"\n        return CounterState(\n            count=kwargs.get('initial', 0),\n            step=kwargs.get('step', 1)\n        )\n\n    def increment(self):\n        \"\"\"Action: increment the counter.\"\"\"\n        self.state.count += self.state.step\n        self.success(f\"Count increased to {self.state.count}\")\n\n    def decrement(self):\n        \"\"\"Action: decrement the counter.\"\"\"\n        self.state.count -= self.state.step\n\n    def reset(self):\n        \"\"\"Action: reset to zero.\"\"\"\n        self.state.count = 0\n</code></pre>"},{"location":"getting-started/quick-start/#2-create-the-template","title":"2. Create the Template","text":"<pre><code>&lt;!-- templates/components/counter.html --&gt;\n&lt;div class=\"counter-widget\"&gt;\n    &lt;h2&gt;Counter: &lt;span x-text=\"count\"&gt;&lt;/span&gt;&lt;/h2&gt;\n\n    &lt;div class=\"controls\"&gt;\n        &lt;button @click=\"call('decrement')\" :disabled=\"isLoading\"&gt;-&lt;/button&gt;\n        &lt;button @click=\"call('reset')\" :disabled=\"isLoading\"&gt;Reset&lt;/button&gt;\n        &lt;button @click=\"call('increment')\" :disabled=\"isLoading\"&gt;+&lt;/button&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Show loading state --&gt;\n    &lt;div x-show=\"isLoading\" class=\"loading\"&gt;Updating...&lt;/div&gt;\n\n    &lt;!-- Show messages --&gt;\n    &lt;template x-for=\"msg in messages\" :key=\"msg.text\"&gt;\n        &lt;div class=\"alert\" x-text=\"msg.text\"&gt;&lt;/div&gt;\n    &lt;/template&gt;\n&lt;/div&gt;\n</code></pre>"},{"location":"getting-started/quick-start/#3-use-in-your-view","title":"3. Use in Your View","text":"<pre><code># myapp/views.py\nfrom django.shortcuts import render\nfrom myapp.components.counter import Counter\n\ndef counter_page(request):\n    # Initialize the component with custom values\n    component = Counter(request=request, initial=10, step=5)\n    return render(request, 'counter_page.html', {'counter': component})\n</code></pre> <pre><code>&lt;!-- templates/counter_page.html --&gt;\n{% extends \"base.html\" %}\n\n{% block content %}\n    &lt;h1&gt;Counter Demo&lt;/h1&gt;\n    {{ counter.render }}\n{% endblock %}\n</code></pre>"},{"location":"getting-started/quick-start/#thats-it","title":"That's it! \ud83c\udf89","text":"<p>You now have a fully reactive counter component without writing any JavaScript.</p>"},{"location":"getting-started/quick-start/#whats-happening","title":"What's Happening?","text":"<ol> <li>State is defined as a Pydantic model (<code>CounterState</code>)</li> <li>Actions are Python methods (<code>increment</code>, <code>decrement</code>, <code>reset</code>)</li> <li>Template uses Alpine.js directives (<code>x-text</code>, <code>@click</code>, <code>x-show</code>)</li> <li>Reactivity is handled automatically by Nitro + Alpine</li> </ol>"},{"location":"getting-started/quick-start/#next-steps","title":"Next Steps","text":"<ul> <li>Learn about Components</li> <li>Explore CRUD operations</li> <li>Try more examples</li> </ul>"},{"location":"security/overview/","title":"Security","text":"<p>Django Nitro v0.3.0 introduces security mixins for common authentication and authorization patterns.</p>"},{"location":"security/overview/#security-mixins","title":"Security Mixins","text":""},{"location":"security/overview/#ownershipmixin","title":"OwnershipMixin","text":"<p>Filter querysets to show only the current user's data.</p> <p>Use case: \"My Orders\", \"My Documents\", user-scoped data</p> <pre><code>from nitro.security import OwnershipMixin\nfrom nitro.list import BaseListComponent\n\nclass MyOrdersList(OwnershipMixin, BaseListComponent):\n    model = Order\n    owner_field = 'customer'  # FK to User\n\n    def get_base_queryset(self, search='', filters=None):\n        qs = self.filter_by_owner(self.model.objects.all())\n        return qs.order_by('-created_at')\n</code></pre>"},{"location":"security/overview/#tenantscopedmixin","title":"TenantScopedMixin","text":"<p>Multi-tenant data isolation for SaaS applications.</p> <p>Use case: Company-scoped data, organization isolation</p> <pre><code>from nitro.security import TenantScopedMixin\n\nclass CompanyDocumentList(TenantScopedMixin, BaseListComponent):\n    model = Document\n    tenant_field = 'company'\n\n    def get_user_tenant(self):\n        return self.request.user.current_company\n</code></pre>"},{"location":"security/overview/#permissionmixin","title":"PermissionMixin","text":"<p>Framework for custom permission logic.</p> <p>Use case: RBAC, custom permissions, action-level authorization</p> <pre><code>from nitro.security import PermissionMixin\n\nclass InvoiceManager(PermissionMixin, CrudNitroComponent):\n    def check_permission(self, action: str) -&gt; bool:\n        if action == 'delete':\n            return self.request.user.has_perm('invoices.delete')\n        return True\n\n    def delete_item(self, id: int):\n        if not self.enforce_permission('delete'):\n            return\n        super().delete_item(id)\n</code></pre>"},{"location":"security/overview/#request-user-helpers","title":"Request User Helpers","text":"<p>All <code>NitroComponent</code> instances now have convenient request helpers:</p>"},{"location":"security/overview/#current_user","title":"current_user","text":"<p>Shortcut to <code>request.user</code> with authentication check.</p> <pre><code>def create_item(self):\n    if self.current_user:\n        item.owner = self.current_user\n        item.save()\n</code></pre>"},{"location":"security/overview/#is_authenticated","title":"is_authenticated","text":"<p>Check if user is authenticated.</p> <pre><code>def get_base_queryset(self, search='', filters=None):\n    if not self.is_authenticated:\n        return queryset.none()\n    return queryset.filter(owner=self.current_user)\n</code></pre>"},{"location":"security/overview/#require_auth","title":"require_auth()","text":"<p>Enforce authentication with error message.</p> <pre><code>def delete_item(self, id: int):\n    if not self.require_auth(\"You must be logged in\"):\n        return  # User sees error message\n\n    super().delete_item(id)\n</code></pre>"},{"location":"security/overview/#best-practices","title":"Best Practices","text":""},{"location":"security/overview/#1-always-check-permissions","title":"1. Always Check Permissions","text":"<pre><code># \u274c BAD - No permission check\ndef delete_item(self, id: int):\n    super().delete_item(id)\n\n# \u2705 GOOD - Permission checked\ndef delete_item(self, id: int):\n    if not self.enforce_permission('delete'):\n        return\n    super().delete_item(id)\n</code></pre>"},{"location":"security/overview/#2-filter-by-ownership","title":"2. Filter by Ownership","text":"<pre><code># \u274c BAD - Shows all users' data\ndef get_base_queryset(self, search='', filters=None):\n    return Order.objects.all()\n\n# \u2705 GOOD - Only current user's data\ndef get_base_queryset(self, search='', filters=None):\n    return self.filter_by_owner(Order.objects.all())\n</code></pre>"},{"location":"security/overview/#3-validate-on-server-side","title":"3. Validate on Server-Side","text":"<pre><code># \u274c BAD - Trusting client data\ndef update_price(self, price: float):\n    self.state.price = price  # Client can set any price!\n\n# \u2705 GOOD - Server validates\ndef update_price(self, price: float):\n    if not self.request.user.is_staff:\n        self.error(\"Only staff can change prices\")\n        return\n\n    if price &lt; 0:\n        self.error(\"Price must be positive\")\n        return\n\n    self.state.price = price\n</code></pre>"},{"location":"security/overview/#security-checklist","title":"Security Checklist","text":"<ul> <li>[ ] All actions check <code>is_authenticated</code> if needed</li> <li>[ ] Permission checks use <code>enforce_permission()</code> or <code>has_perm()</code></li> <li>[ ] Querysets filtered by ownership/tenant</li> <li>[ ] User input validated server-side</li> <li>[ ] Sensitive operations logged</li> <li>[ ] <code>secure_fields</code> includes all IDs</li> <li>[ ] Error messages don't leak sensitive data</li> </ul>"},{"location":"security/overview/#learn-more","title":"Learn More","text":"<ul> <li>OwnershipMixin Guide</li> <li>TenantScopedMixin Guide</li> <li>PermissionMixin Guide</li> </ul>"},{"location":"security/ownership-mixin/","title":"OwnershipMixin","text":"<p><code>OwnershipMixin</code> automatically filters querysets to show only items owned by the current user. It's perfect for user-scoped data where each user should only see their own records.</p>"},{"location":"security/ownership-mixin/#use-cases","title":"Use Cases","text":"<ul> <li>My Documents - Users can only see their own documents</li> <li>My Orders - E-commerce order history</li> <li>My Tasks - Personal task lists</li> <li>User Profiles - Profile management</li> <li>Any user-owned resources</li> </ul>"},{"location":"security/ownership-mixin/#basic-usage","title":"Basic Usage","text":"<pre><code>from nitro.security import OwnershipMixin\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\n\n@register_component\nclass MyDocuments(OwnershipMixin, BaseListComponent[DocumentListState]):\n    model = Document\n    owner_field = 'user'  # Field linking to User model (default: 'user')\n    search_fields = ['title', 'description']\n    per_page = 25\n\n    # Automatically filters to current user's documents only\n</code></pre>"},{"location":"security/ownership-mixin/#configuration","title":"Configuration","text":""},{"location":"security/ownership-mixin/#owner_field-str","title":"<code>owner_field: str</code>","text":"<p>The name of the ForeignKey field linking to Django's User model.</p> <p>Default: <code>'user'</code></p> <pre><code>class MyDocuments(OwnershipMixin, BaseListComponent):\n    owner_field = 'user'        # Document.user\n    # or\n    owner_field = 'owner'       # Document.owner\n    # or\n    owner_field = 'created_by'  # Document.created_by\n</code></pre> <p>Your model must have this field:</p> <pre><code>class Document(models.Model):\n    title = models.CharField(max_length=200)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)  # owner_field\n    created_at = models.DateTimeField(auto_now_add=True)\n</code></pre>"},{"location":"security/ownership-mixin/#methods","title":"Methods","text":""},{"location":"security/ownership-mixin/#filter_by_ownerqueryset-queryset","title":"<code>filter_by_owner(queryset) -&gt; QuerySet</code>","text":"<p>Filters a queryset to show only items owned by the current user.</p> <p>Returns: - Filtered queryset if user is authenticated - Empty queryset if user is not authenticated</p> <pre><code>def get_base_queryset(self, search='', filters=None):\n    # Start with all documents\n    qs = self.model.objects.all()\n\n    # Filter to current user's documents\n    qs = self.filter_by_owner(qs)\n\n    # Apply search\n    if search:\n        qs = self.apply_search(qs, search)\n\n    return qs.order_by('-created_at')\n</code></pre>"},{"location":"security/ownership-mixin/#how-it-works","title":"How It Works","text":"<p>The mixin adds automatic filtering:</p> <pre><code># Without OwnershipMixin\ndef get_base_queryset(self, search='', filters=None):\n    # Shows ALL documents (security risk!)\n    return Document.objects.all()\n\n# With OwnershipMixin\ndef get_base_queryset(self, search='', filters=None):\n    # Automatically filtered to current user\n    qs = self.filter_by_owner(Document.objects.all())\n    return qs\n</code></pre> <p>Behind the scenes:</p> <pre><code>def filter_by_owner(self, queryset):\n    if not self.request or not self.request.user.is_authenticated:\n        return queryset.none()  # Empty queryset\n\n    # Filter: queryset.filter(user=current_user)\n    return queryset.filter(**{self.owner_field: self.request.user})\n</code></pre>"},{"location":"security/ownership-mixin/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom pydantic import BaseModel, Field\nfrom nitro.security import OwnershipMixin\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Django Model\nclass Task(models.Model):\n    title = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    completed = models.BooleanField(default=False)\n    priority = models.IntegerField(default=0)\n    user = models.ForeignKey('auth.User', on_delete=models.CASCADE)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    class Meta:\n        ordering = ['-created_at']\n\n# Schemas\nclass TaskSchema(BaseModel):\n    id: int\n    title: str\n    description: str\n    completed: bool\n    priority: int\n\n    class Config:\n        from_attributes = True\n\nclass TaskFormSchema(BaseModel):\n    title: str = \"\"\n    description: str = \"\"\n    completed: bool = False\n    priority: int = 0\n\nclass TaskListState(BaseListState):\n    items: list[TaskSchema] = []\n    create_buffer: TaskFormSchema = Field(default_factory=TaskFormSchema)\n    edit_buffer: Optional[TaskFormSchema] = None\n\n# Component with OwnershipMixin\n@register_component\nclass MyTasks(OwnershipMixin, BaseListComponent[TaskListState]):\n    template_name = \"components/my_tasks.html\"\n    state_class = TaskListState\n    model = Task\n    owner_field = 'user'  # Task.user field\n\n    search_fields = ['title', 'description']\n    per_page = 25\n    order_by = '-created_at'\n\n    # get_base_queryset automatically filters by owner\n    # No need to override unless you want custom logic\n\n    def create_item(self):\n        \"\"\"Override to set owner automatically.\"\"\"\n        if not self.require_auth():\n            return\n\n        try:\n            task = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                user=self.current_user  # Set owner\n            )\n            self.refresh()\n            self.success(f\"Created: {task.title}\")\n        except Exception as e:\n            logger.exception(\"Create failed\")\n            self.error(\"Failed to create task\")\n\n    def toggle_completed(self, id: int):\n        \"\"\"Custom action with ownership check.\"\"\"\n        try:\n            # OwnershipMixin ensures we only get current user's tasks\n            task = self.model.objects.get(\n                id=id,\n                user=self.current_user\n            )\n            task.completed = not task.completed\n            task.save()\n            self.refresh()\n        except self.model.DoesNotExist:\n            self.error(\"Task not found\")\n</code></pre>"},{"location":"security/ownership-mixin/#customizing-ownership-filter","title":"Customizing Ownership Filter","text":"<p>Override <code>get_base_queryset()</code> for custom filtering:</p> <pre><code>@register_component\nclass MyDocuments(OwnershipMixin, BaseListComponent[DocumentListState]):\n    model = Document\n    owner_field = 'created_by'\n\n    def get_base_queryset(self, search='', filters=None):\n        # Start with ownership filter\n        qs = self.filter_by_owner(self.model.objects.all())\n\n        # Add additional filters\n        qs = qs.filter(is_deleted=False)  # Exclude deleted\n\n        # Apply search\n        if search:\n            qs = self.apply_search(qs, search)\n\n        # Add related data optimization\n        qs = qs.select_related('category')\n\n        return qs.order_by(self.order_by)\n</code></pre>"},{"location":"security/ownership-mixin/#multiple-owner-types","title":"Multiple Owner Types","text":"<p>If you need to support different owner types:</p> <pre><code>class DocumentOwnershipMixin:\n    \"\"\"Custom ownership for documents with multiple owner types.\"\"\"\n\n    def filter_by_owner(self, queryset):\n        if not self.is_authenticated:\n            return queryset.none()\n\n        user = self.current_user\n\n        # Documents where user is creator OR collaborator\n        return queryset.filter(\n            Q(created_by=user) | Q(collaborators=user)\n        ).distinct()\n\n@register_component\nclass MyDocuments(DocumentOwnershipMixin, BaseListComponent):\n    model = Document\n    # Uses custom filter_by_owner from DocumentOwnershipMixin\n</code></pre>"},{"location":"security/ownership-mixin/#combining-with-other-mixins","title":"Combining with Other Mixins","text":""},{"location":"security/ownership-mixin/#with-tenantscopedmixin","title":"With TenantScopedMixin","text":"<p>Filter by both user AND tenant:</p> <pre><code>from nitro.security import OwnershipMixin, TenantScopedMixin\n\n@register_component\nclass MyCompanyTasks(\n    OwnershipMixin,       # Filter by current user\n    TenantScopedMixin,    # Filter by current company\n    BaseListComponent[TaskListState]\n):\n    model = Task\n    owner_field = 'user'\n    tenant_field = 'company'\n\n    def get_user_tenant(self):\n        return self.current_user.profile.company\n\n    # Both filters applied: user's tasks within their company\n</code></pre>"},{"location":"security/ownership-mixin/#with-permissionmixin","title":"With PermissionMixin","text":"<p>Add permission checks on top of ownership:</p> <pre><code>from nitro.security import OwnershipMixin, PermissionMixin\n\n@register_component\nclass MyDocuments(\n    OwnershipMixin,\n    PermissionMixin,\n    BaseListComponent[DocumentListState]\n):\n    model = Document\n    owner_field = 'user'\n\n    def check_permission(self, action: str) -&gt; bool:\n        # Even though user owns the document...\n        if action == 'delete':\n            # They still need delete permission\n            return self.current_user.has_perm('documents.delete_document')\n        return True\n\n    def delete_item(self, id: int):\n        if not self.enforce_permission('delete'):\n            return\n        super().delete_item(id)\n</code></pre>"},{"location":"security/ownership-mixin/#security-considerations","title":"Security Considerations","text":""},{"location":"security/ownership-mixin/#1-always-filter-in-get_base_queryset","title":"1. Always Filter in get_base_queryset","text":"<pre><code># \u2705 Good - ownership filter applied\ndef get_base_queryset(self, search='', filters=None):\n    qs = self.filter_by_owner(self.model.objects.all())\n    return qs\n\n# \u274c Bad - skipping ownership filter\ndef get_base_queryset(self, search='', filters=None):\n    return self.model.objects.all()  # Shows everyone's data!\n</code></pre>"},{"location":"security/ownership-mixin/#2-set-owner-on-create","title":"2. Set Owner on Create","text":"<pre><code># \u2705 Good - set owner explicitly\ndef create_item(self):\n    item = self.model.objects.create(\n        **self.state.create_buffer.dict(),\n        user=self.current_user  # Explicit owner\n    )\n\n# \u274c Bad - letting client set owner\ndef create_item(self):\n    # Client could send user_id for another user!\n    item = self.model.objects.create(\n        **self.state.create_buffer.dict()\n    )\n</code></pre>"},{"location":"security/ownership-mixin/#3-double-check-on-deleteupdate","title":"3. Double-Check on Delete/Update","text":"<pre><code># \u2705 Good - verify ownership before delete\ndef delete_item(self, id: int):\n    try:\n        item = self.model.objects.get(\n            id=id,\n            user=self.current_user  # Ensure ownership\n        )\n        item.delete()\n    except self.model.DoesNotExist:\n        self.error(\"Not found or access denied\")\n\n# \u274c Bad - trusting that id is valid\ndef delete_item(self, id: int):\n    item = self.model.objects.get(id=id)  # Could be another user's!\n    item.delete()\n</code></pre>"},{"location":"security/ownership-mixin/#4-handle-anonymous-users","title":"4. Handle Anonymous Users","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    # \u2705 OwnershipMixin handles this automatically\n    qs = self.filter_by_owner(self.model.objects.all())\n    # Returns queryset.none() if not authenticated\n\n    # \u2705 Or check manually\n    if not self.is_authenticated:\n        return self.model.objects.none()\n\n    return self.model.objects.filter(user=self.current_user)\n</code></pre>"},{"location":"security/ownership-mixin/#best-practices","title":"Best Practices","text":""},{"location":"security/ownership-mixin/#1-use-consistent-field-names","title":"1. Use Consistent Field Names","text":"<pre><code># \u2705 Good - consistent naming\nclass Document(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n\nclass Task(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n\n# Both use owner_field = 'user'\n</code></pre>"},{"location":"security/ownership-mixin/#2-optimize-related-queries","title":"2. Optimize Related Queries","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    qs = self.filter_by_owner(self.model.objects.all())\n\n    # \u2705 Load related data efficiently\n    qs = qs.select_related('category')\n\n    return qs\n</code></pre>"},{"location":"security/ownership-mixin/#3-require-authentication","title":"3. Require Authentication","text":"<pre><code>def create_item(self):\n    # \u2705 Enforce authentication\n    if not self.require_auth(\"Please log in\"):\n        return\n\n    # Create with current_user as owner\n    ...\n</code></pre>"},{"location":"security/ownership-mixin/#4-add-database-indexes","title":"4. Add Database Indexes","text":"<pre><code>class Document(models.Model):\n    user = models.ForeignKey(\n        User,\n        on_delete=models.CASCADE,\n        db_index=True  # \u2705 Index for fast filtering\n    )\n</code></pre>"},{"location":"security/ownership-mixin/#common-patterns","title":"Common Patterns","text":""},{"location":"security/ownership-mixin/#read-only-list-for-users","title":"Read-Only List for Users","text":"<pre><code>@register_component\nclass MyOrders(OwnershipMixin, BaseListComponent[OrderListState]):\n    model = Order\n    owner_field = 'customer'\n\n    # Users can view their orders but not create/edit/delete\n    # Simply don't override create_item, delete_item, etc.\n</code></pre>"},{"location":"security/ownership-mixin/#shared-resources","title":"Shared Resources","text":"<pre><code>class SharedDocumentsMixin:\n    def filter_by_owner(self, queryset):\n        if not self.is_authenticated:\n            return queryset.none()\n\n        # Show documents user owns OR has been shared with\n        return queryset.filter(\n            Q(owner=self.current_user) |\n            Q(shared_with=self.current_user)\n        ).distinct()\n</code></pre>"},{"location":"security/ownership-mixin/#troubleshooting","title":"Troubleshooting","text":""},{"location":"security/ownership-mixin/#empty-list-no-items-showing","title":"Empty List (No Items Showing)","text":"<p>Check: 1. Is <code>owner_field</code> correct? 2. Do items have the correct owner set? 3. Is user authenticated?</p> <pre><code># Debug\ndef get_initial_state(self, **kwargs):\n    print(f\"User: {self.current_user}\")\n    print(f\"Owner field: {self.owner_field}\")\n\n    qs = self.filter_by_owner(self.model.objects.all())\n    print(f\"Count: {qs.count()}\")\n\n    return MyListState(items=[...])\n</code></pre>"},{"location":"security/ownership-mixin/#wrong-items-showing","title":"Wrong Items Showing","text":"<p>Verify ownership filtering is applied:</p> <pre><code>def get_base_queryset(self, search='', filters=None):\n    # Make sure this is called!\n    qs = self.filter_by_owner(self.model.objects.all())\n\n    # Not this:\n    # qs = self.model.objects.all()  # WRONG!\n\n    return qs\n</code></pre>"},{"location":"security/ownership-mixin/#see-also","title":"See Also","text":"<ul> <li>TenantScopedMixin - Multi-tenant filtering</li> <li>PermissionMixin - Custom permissions</li> <li>Security Overview - Security best practices</li> </ul>"},{"location":"security/permission-mixin/","title":"PermissionMixin","text":"<p><code>PermissionMixin</code> provides a framework for implementing custom permission logic beyond Django's built-in permissions. It's perfect for role-based access control (RBAC), action-level authorization, and complex business rules.</p>"},{"location":"security/permission-mixin/#use-cases","title":"Use Cases","text":"<ul> <li>Role-Based Access Control (RBAC) - Different permissions for admin, manager, member</li> <li>Action-Level Permissions - Control who can create, edit, delete</li> <li>Subscription-Based Access - Feature gating based on plan tier</li> <li>Custom Business Rules - Complex permission logic</li> <li>Conditional Access - Time-based, location-based, or context-based permissions</li> </ul>"},{"location":"security/permission-mixin/#basic-usage","title":"Basic Usage","text":"<pre><code>from nitro.security import PermissionMixin\nfrom nitro.base import CrudNitroComponent\nfrom nitro.registry import register_component\n\n@register_component\nclass DocumentManager(PermissionMixin, CrudNitroComponent[DocumentState]):\n    model = Document\n\n    def check_permission(self, action: str) -&gt; bool:\n        \"\"\"Override with your permission logic.\"\"\"\n        user = self.current_user\n\n        if not user or not user.is_authenticated:\n            return False\n\n        # Admins can do anything\n        if user.is_superuser:\n            return True\n\n        # Custom logic per action\n        if action == 'delete':\n            return user.has_perm('documents.delete_document')\n\n        if action in ['create', 'edit']:\n            return user.has_perm('documents.change_document')\n\n        return True  # Read allowed by default\n\n    def delete_item(self, id: int):\n        # Enforce permission\n        if not self.enforce_permission('delete', \"Only admins can delete\"):\n            return\n\n        super().delete_item(id)\n</code></pre>"},{"location":"security/permission-mixin/#methods","title":"Methods","text":""},{"location":"security/permission-mixin/#check_permissionaction-str-bool","title":"<code>check_permission(action: str) -&gt; bool</code>","text":"<p>REQUIRED - Override this method with your permission logic.</p> <p>Parameters: - <code>action</code> - String identifying the action (e.g., 'create', 'edit', 'delete', 'export')</p> <p>Returns: - <code>True</code> if permission granted - <code>False</code> if permission denied</p> <pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n\n    if not user:\n        return False\n\n    # Your logic here\n    if action == 'delete':\n        return user.is_staff\n\n    return True\n</code></pre>"},{"location":"security/permission-mixin/#enforce_permissionaction-str-error_message-optionalstr-none-bool","title":"<code>enforce_permission(action: str, error_message: Optional[str] = None) -&gt; bool</code>","text":"<p>Checks permission and shows error message if denied.</p> <p>Parameters: - <code>action</code> - Action to check permission for - <code>error_message</code> - Custom error message (default: \"Permission denied\")</p> <p>Returns: - <code>True</code> if permission granted - <code>False</code> if permission denied (and error message shown)</p> <pre><code>def delete_item(self, id: int):\n    # Check permission and show error if denied\n    if not self.enforce_permission('delete', \"Only managers can delete\"):\n        return  # Stops execution\n\n    # Continue with delete...\n    super().delete_item(id)\n</code></pre>"},{"location":"security/permission-mixin/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom pydantic import BaseModel, Field\nfrom nitro.security import PermissionMixin, OwnershipMixin\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Models\nclass UserRole(models.TextChoices):\n    VIEWER = 'viewer', 'Viewer'\n    MEMBER = 'member', 'Member'\n    MANAGER = 'manager', 'Manager'\n    ADMIN = 'admin', 'Admin'\n\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='profile')\n    role = models.CharField(max_length=20, choices=UserRole.choices, default=UserRole.MEMBER)\n    subscription_tier = models.CharField(max_length=20, default='free')\n\nclass Project(models.Model):\n    name = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    owner = models.ForeignKey(User, on_delete=models.CASCADE)\n    is_archived = models.BooleanField(default=False)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n# Schemas\nclass ProjectSchema(BaseModel):\n    id: int\n    name: str\n    description: str\n    is_archived: bool\n\n    class Config:\n        from_attributes = True\n\nclass ProjectFormSchema(BaseModel):\n    name: str = \"\"\n    description: str = \"\"\n\nclass ProjectListState(BaseListState):\n    items: list[ProjectSchema] = []\n    create_buffer: ProjectFormSchema = Field(default_factory=ProjectFormSchema)\n    edit_buffer: Optional[ProjectFormSchema] = None\n\n# Component with Permission Control\n@register_component\nclass ProjectManager(\n    PermissionMixin,\n    OwnershipMixin,\n    BaseListComponent[ProjectListState]\n):\n    template_name = \"components/project_manager.html\"\n    state_class = ProjectListState\n    model = Project\n    owner_field = 'owner'\n\n    search_fields = ['name', 'description']\n    per_page = 25\n\n    def check_permission(self, action: str) -&gt; bool:\n        \"\"\"Role-based permission logic.\"\"\"\n        user = self.current_user\n\n        # Not authenticated = no access\n        if not user or not user.is_authenticated:\n            return False\n\n        # Get user's role\n        try:\n            role = user.profile.role\n        except (AttributeError, UserProfile.DoesNotExist):\n            return False\n\n        # Admins can do anything\n        if role == UserRole.ADMIN:\n            return True\n\n        # Managers can create, edit, read\n        if role == UserRole.MANAGER:\n            if action == 'delete':\n                return False  # Managers can't delete\n            return True\n\n        # Members can create and read\n        if role == UserRole.MEMBER:\n            if action in ['delete', 'archive']:\n                return False\n            if action == 'edit':\n                return False  # Can only edit own (checked elsewhere)\n            return True\n\n        # Viewers can only read\n        if role == UserRole.VIEWER:\n            if action in ['create', 'edit', 'delete', 'archive']:\n                return False\n            return True\n\n        return False\n\n    def create_item(self):\n        \"\"\"Create with permission check.\"\"\"\n        if not self.enforce_permission('create', \"You don't have permission to create projects\"):\n            return\n\n        # Check subscription limits\n        if not self._check_subscription_limit():\n            return\n\n        try:\n            project = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                owner=self.current_user\n            )\n            self.refresh()\n            self.success(f\"Created: {project.name}\")\n        except Exception as e:\n            logger.exception(\"Create failed\")\n            self.error(\"Failed to create project\")\n\n    def save_edit(self):\n        \"\"\"Edit with permission check.\"\"\"\n        if not self.enforce_permission('edit', \"You don't have permission to edit\"):\n            return\n\n        # Additional ownership check\n        try:\n            project = self.model.objects.get(id=self.state.editing_id)\n\n            # Members can only edit their own projects\n            if self.current_user.profile.role == UserRole.MEMBER:\n                if project.owner != self.current_user:\n                    self.error(\"You can only edit your own projects\")\n                    return\n\n            # Proceed with edit\n            super().save_edit()\n\n        except (Project.DoesNotExist, AttributeError):\n            self.error(\"Project not found\")\n\n    def delete_item(self, id: int):\n        \"\"\"Delete with permission check.\"\"\"\n        if not self.enforce_permission('delete', \"Only admins can delete projects\"):\n            return\n\n        super().delete_item(id)\n\n    def archive_project(self, id: int):\n        \"\"\"Custom action with permission check.\"\"\"\n        if not self.enforce_permission('archive', \"You don't have permission to archive\"):\n            return\n\n        try:\n            project = self.model.objects.get(id=id, owner=self.current_user)\n            project.is_archived = not project.is_archived\n            project.save()\n            self.refresh()\n\n            status = \"archived\" if project.is_archived else \"unarchived\"\n            self.success(f\"{project.name} {status}\")\n        except Project.DoesNotExist:\n            self.error(\"Project not found\")\n\n    def _check_subscription_limit(self) -&gt; bool:\n        \"\"\"Helper to check subscription limits.\"\"\"\n        try:\n            tier = self.current_user.profile.subscription_tier\n\n            if tier == 'free':\n                # Free tier: max 3 projects\n                count = self.model.objects.filter(owner=self.current_user).count()\n                if count &gt;= 3:\n                    self.error(\"Free tier limited to 3 projects. Upgrade to create more.\")\n                    return False\n\n            # Paid tiers have unlimited projects\n            return True\n\n        except AttributeError:\n            return False\n</code></pre>"},{"location":"security/permission-mixin/#permission-patterns","title":"Permission Patterns","text":""},{"location":"security/permission-mixin/#django-permission-system","title":"Django Permission System","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    # Use Django's built-in permissions\n    if action == 'create':\n        return user.has_perm('myapp.add_project')\n\n    if action == 'edit':\n        return user.has_perm('myapp.change_project')\n\n    if action == 'delete':\n        return user.has_perm('myapp.delete_project')\n\n    return user.has_perm('myapp.view_project')\n</code></pre>"},{"location":"security/permission-mixin/#role-based-rbac","title":"Role-Based (RBAC)","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    role = user.profile.role\n\n    # Define role permissions\n    PERMISSIONS = {\n        'admin': ['create', 'read', 'edit', 'delete', 'export'],\n        'manager': ['create', 'read', 'edit', 'export'],\n        'member': ['create', 'read'],\n        'viewer': ['read'],\n    }\n\n    allowed_actions = PERMISSIONS.get(role, [])\n    return action in allowed_actions\n</code></pre>"},{"location":"security/permission-mixin/#subscription-based","title":"Subscription-Based","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    tier = user.profile.subscription_tier\n\n    # Free tier restrictions\n    if tier == 'free':\n        if action == 'export':\n            return False\n        if action == 'create':\n            # Check limits\n            count = Project.objects.filter(owner=user).count()\n            return count &lt; 3\n\n    # Pro tier restrictions\n    if tier == 'pro':\n        if action == 'export':\n            return True\n        if action == 'create':\n            count = Project.objects.filter(owner=user).count()\n            return count &lt; 50\n\n    # Enterprise tier: no restrictions\n    return True\n</code></pre>"},{"location":"security/permission-mixin/#owner-only-actions","title":"Owner-Only Actions","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    # Anyone can read\n    if action == 'read':\n        return True\n\n    # Only authenticated can create\n    if action == 'create':\n        return user.is_authenticated\n\n    # Only owners can edit/delete\n    # (check in action method, not here)\n    if action in ['edit', 'delete']:\n        return user.is_authenticated\n\n    return False\n\ndef delete_item(self, id: int):\n    if not self.enforce_permission('delete'):\n        return\n\n    # Check ownership\n    try:\n        item = self.model.objects.get(id=id)\n        if item.owner != self.current_user:\n            self.error(\"You don't own this item\")\n            return\n\n        item.delete()\n        self.refresh()\n    except self.model.DoesNotExist:\n        self.error(\"Item not found\")\n</code></pre>"},{"location":"security/permission-mixin/#time-based-permissions","title":"Time-Based Permissions","text":"<pre><code>from django.utils import timezone\n\ndef check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    # Business hours only\n    if action in ['delete', 'export']:\n        now = timezone.now()\n        if now.hour &lt; 9 or now.hour &gt;= 17:\n            self.error(\"This action is only allowed during business hours (9-5)\")\n            return False\n\n    # Weekend restrictions\n    if action == 'delete':\n        if now.weekday() &gt;= 5:  # Saturday or Sunday\n            self.error(\"Deletions not allowed on weekends\")\n            return False\n\n    return True\n</code></pre>"},{"location":"security/permission-mixin/#composite-permissions","title":"Composite Permissions","text":"<pre><code>def check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    # Must have both role AND Django permission\n    has_role = user.profile.role in ['admin', 'manager']\n    has_perm = user.has_perm(f'myapp.{action}_project')\n\n    return has_role and has_perm\n</code></pre>"},{"location":"security/permission-mixin/#combining-with-other-mixins","title":"Combining with Other Mixins","text":""},{"location":"security/permission-mixin/#with-ownershipmixin","title":"With OwnershipMixin","text":"<pre><code>from nitro.security import PermissionMixin, OwnershipMixin\n\n@register_component\nclass MyProjects(\n    PermissionMixin,\n    OwnershipMixin,\n    BaseListComponent\n):\n    model = Project\n    owner_field = 'owner'\n\n    def check_permission(self, action: str) -&gt; bool:\n        # Permission logic\n        ...\n\n    # get_base_queryset automatically filters by owner\n    # Permission checks happen in action methods\n</code></pre>"},{"location":"security/permission-mixin/#with-tenantscopedmixin","title":"With TenantScopedMixin","text":"<pre><code>from nitro.security import PermissionMixin, TenantScopedMixin\n\n@register_component\nclass CompanyProjects(\n    PermissionMixin,\n    TenantScopedMixin,\n    BaseListComponent\n):\n    model = Project\n    tenant_field = 'organization'\n\n    def get_user_tenant(self):\n        return self.current_user.profile.organization\n\n    def check_permission(self, action: str) -&gt; bool:\n        \"\"\"Permissions based on role within organization.\"\"\"\n        try:\n            membership = Membership.objects.get(\n                user=self.current_user,\n                organization=self.get_user_tenant()\n            )\n\n            if action == 'delete':\n                return membership.role == 'admin'\n\n            if action in ['create', 'edit']:\n                return membership.role in ['admin', 'manager']\n\n            return True  # Read allowed for all members\n\n        except Membership.DoesNotExist:\n            return False\n</code></pre>"},{"location":"security/permission-mixin/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"security/permission-mixin/#caching-permissions","title":"Caching Permissions","text":"<pre><code>from django.core.cache import cache\n\ndef check_permission(self, action: str) -&gt; bool:\n    user = self.current_user\n    if not user:\n        return False\n\n    # Cache permissions for 5 minutes\n    cache_key = f\"perms_{user.id}_{action}\"\n    result = cache.get(cache_key)\n\n    if result is None:\n        # Expensive permission check\n        result = self._compute_permission(action)\n        cache.set(cache_key, result, 300)  # 5 minutes\n\n    return result\n\ndef _compute_permission(self, action: str) -&gt; bool:\n    # Your expensive logic here\n    ...\n</code></pre>"},{"location":"security/permission-mixin/#logging-permission-denials","title":"Logging Permission Denials","text":"<pre><code>import logging\n\nlogger = logging.getLogger(__name__)\n\ndef enforce_permission(self, action: str, error_message: Optional[str] = None) -&gt; bool:\n    if not self.check_permission(action):\n        # Log denial\n        logger.warning(\n            f\"Permission denied: user={self.current_user.id} \"\n            f\"action={action} component={self.__class__.__name__}\"\n        )\n\n        # Show error\n        self.error(error_message or \"Permission denied\")\n        return False\n\n    return True\n</code></pre>"},{"location":"security/permission-mixin/#dynamic-permission-messages","title":"Dynamic Permission Messages","text":"<pre><code>def delete_item(self, id: int):\n    user = self.current_user\n\n    # Custom messages based on why permission denied\n    if not user:\n        if not self.enforce_permission('delete', \"Please log in to delete\"):\n            return\n\n    elif not user.is_staff:\n        if not self.enforce_permission('delete', \"Only staff members can delete\"):\n            return\n\n    elif user.profile.subscription_tier == 'free':\n        if not self.enforce_permission('delete', \"Upgrade to Pro to delete items\"):\n            return\n\n    else:\n        if not self.enforce_permission('delete'):\n            return\n\n    # Proceed with delete\n    super().delete_item(id)\n</code></pre>"},{"location":"security/permission-mixin/#best-practices","title":"Best Practices","text":""},{"location":"security/permission-mixin/#1-always-implement-check_permission","title":"1. Always Implement check_permission()","text":"<pre><code># \u2705 Required\ndef check_permission(self, action: str) -&gt; bool:\n    # Your logic\n    return True\n\n# \u274c Will raise NotImplementedError\n# (Don't skip this method!)\n</code></pre>"},{"location":"security/permission-mixin/#2-use-enforce_permission-in-actions","title":"2. Use enforce_permission() in Actions","text":"<pre><code># \u2705 Good - permission checked\ndef delete_item(self, id: int):\n    if not self.enforce_permission('delete'):\n        return\n    super().delete_item(id)\n\n# \u274c Bad - no permission check\ndef delete_item(self, id: int):\n    super().delete_item(id)\n</code></pre>"},{"location":"security/permission-mixin/#3-provide-helpful-error-messages","title":"3. Provide Helpful Error Messages","text":"<pre><code># \u2705 Good - clear message\nif not self.enforce_permission('export', \"Upgrade to Pro to export data\"):\n    return\n\n# \u26a0\ufe0f OK - generic message\nif not self.enforce_permission('export'):\n    return  # Shows \"Permission denied\"\n</code></pre>"},{"location":"security/permission-mixin/#4-dont-trust-client-data","title":"4. Don't Trust Client Data","text":"<pre><code># \u274c Bad - client could fake role\ndef check_permission(self, action: str) -&gt; bool:\n    # Don't use state data for permissions!\n    role = self.state.user_role  # Client controls this!\n    return role == 'admin'\n\n# \u2705 Good - use server data\ndef check_permission(self, action: str) -&gt; bool:\n    role = self.current_user.profile.role  # Server truth\n    return role == 'admin'\n</code></pre>"},{"location":"security/permission-mixin/#5-keep-permission-logic-simple","title":"5. Keep Permission Logic Simple","text":"<pre><code># \u2705 Good - clear and simple\ndef check_permission(self, action: str) -&gt; bool:\n    if action == 'delete':\n        return self.current_user.is_staff\n    return True\n\n# \u274c Avoid - too complex\ndef check_permission(self, action: str) -&gt; bool:\n    if ((action == 'delete' and self.current_user.is_staff) or\n        (action == 'edit' and (self.current_user.is_staff or\n         self.current_user.profile.role == 'manager')) or ...):\n        # Too much nesting!\n</code></pre>"},{"location":"security/permission-mixin/#testing-permissions","title":"Testing Permissions","text":"<pre><code>from django.test import TestCase, RequestFactory\nfrom myapp.components import ProjectManager\n\nclass PermissionTests(TestCase):\n    def setUp(self):\n        self.factory = RequestFactory()\n        self.admin = User.objects.create_user('admin', role='admin')\n        self.member = User.objects.create_user('member', role='member')\n        self.viewer = User.objects.create_user('viewer', role='viewer')\n\n    def test_admin_can_delete(self):\n        request = self.factory.get('/')\n        request.user = self.admin\n\n        component = ProjectManager(request=request)\n        self.assertTrue(component.check_permission('delete'))\n\n    def test_member_cannot_delete(self):\n        request = self.factory.get('/')\n        request.user = self.member\n\n        component = ProjectManager(request=request)\n        self.assertFalse(component.check_permission('delete'))\n\n    def test_viewer_cannot_create(self):\n        request = self.factory.get('/')\n        request.user = self.viewer\n\n        component = ProjectManager(request=request)\n        self.assertFalse(component.check_permission('create'))\n</code></pre>"},{"location":"security/permission-mixin/#troubleshooting","title":"Troubleshooting","text":""},{"location":"security/permission-mixin/#notimplementederror","title":"NotImplementedError","text":"<p>Means you forgot to implement <code>check_permission()</code>:</p> <pre><code># \u2705 Always implement this method\ndef check_permission(self, action: str) -&gt; bool:\n    # Your logic here\n    return True\n</code></pre>"},{"location":"security/permission-mixin/#permissions-not-working","title":"Permissions Not Working","text":"<p>Check: 1. Is <code>check_permission()</code> being called? 2. Is <code>enforce_permission()</code> used in action methods? 3. Are you checking server-side data (not client state)?</p> <pre><code># Debug\ndef check_permission(self, action: str) -&gt; bool:\n    print(f\"Checking permission: {action}\")\n    print(f\"User: {self.current_user}\")\n    result = # ... your logic\n    print(f\"Result: {result}\")\n    return result\n</code></pre>"},{"location":"security/permission-mixin/#see-also","title":"See Also","text":"<ul> <li>OwnershipMixin - Filter by user ownership</li> <li>TenantScopedMixin - Multi-tenant filtering</li> <li>Security Overview - Security best practices</li> </ul>"},{"location":"security/tenant-scoped-mixin/","title":"TenantScopedMixin","text":"<p><code>TenantScopedMixin</code> provides multi-tenant data isolation for SaaS applications. It ensures users only see data belonging to their organization, company, or team - preventing data leakage between tenants.</p>"},{"location":"security/tenant-scoped-mixin/#use-cases","title":"Use Cases","text":"<ul> <li>SaaS Applications - Company/organization-scoped data</li> <li>Team Workspaces - Team-based access control</li> <li>Multi-tenant Platforms - Isolated data per tenant</li> <li>Enterprise Applications - Department/division isolation</li> </ul>"},{"location":"security/tenant-scoped-mixin/#basic-usage","title":"Basic Usage","text":"<pre><code>from nitro.security import TenantScopedMixin\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\n\n@register_component\nclass CompanyDocuments(TenantScopedMixin, BaseListComponent[DocumentListState]):\n    model = Document\n    tenant_field = 'organization'  # Field linking to tenant (default: 'organization')\n\n    def get_user_tenant(self):\n        \"\"\"REQUIRED: Return current user's tenant.\"\"\"\n        return self.request.user.profile.organization\n\n    # Automatically filters to current organization's documents only\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#configuration","title":"Configuration","text":""},{"location":"security/tenant-scoped-mixin/#tenant_field-str","title":"<code>tenant_field: str</code>","text":"<p>The name of the ForeignKey field linking to your tenant model.</p> <p>Default: <code>'organization'</code></p> <pre><code>class CompanyDocuments(TenantScopedMixin, BaseListComponent):\n    tenant_field = 'organization'  # Document.organization\n    # or\n    tenant_field = 'company'       # Document.company\n    # or\n    tenant_field = 'team'          # Document.team\n</code></pre> <p>Your model must have this field:</p> <pre><code>class Document(models.Model):\n    title = models.CharField(max_length=200)\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    created_at = models.DateTimeField(auto_now_add=True)\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#get_user_tenant-model","title":"<code>get_user_tenant() -&gt; Model</code>","text":"<p>REQUIRED method that returns the current user's tenant.</p> <pre><code>def get_user_tenant(self):\n    # From user profile\n    return self.request.user.profile.organization\n\n    # Or from session\n    # return Organization.objects.get(id=self.request.session['org_id'])\n\n    # Or from custom user model\n    # return self.request.user.current_organization\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#methods","title":"Methods","text":""},{"location":"security/tenant-scoped-mixin/#filter_by_tenantqueryset-queryset","title":"<code>filter_by_tenant(queryset) -&gt; QuerySet</code>","text":"<p>Filters a queryset to show only items belonging to the current tenant.</p> <p>Returns: - Filtered queryset if tenant exists - Empty queryset if tenant is None</p> <pre><code>def get_base_queryset(self, search='', filters=None):\n    # Start with all items\n    qs = self.model.objects.all()\n\n    # Filter to current tenant\n    qs = self.filter_by_tenant(qs)\n\n    # Apply search\n    if search:\n        qs = self.apply_search(qs, search)\n\n    return qs.order_by('-created_at')\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#how-it-works","title":"How It Works","text":"<p>Behind the scenes:</p> <pre><code>def filter_by_tenant(self, queryset):\n    tenant = self.get_user_tenant()\n    if not tenant:\n        return queryset.none()  # Empty queryset\n\n    # Filter: queryset.filter(organization=current_tenant)\n    return queryset.filter(**{self.tenant_field: tenant})\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#complete-example","title":"Complete Example","text":"<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom pydantic import BaseModel, Field\nfrom nitro.security import TenantScopedMixin\nfrom nitro.list import BaseListComponent, BaseListState\nfrom nitro.registry import register_component\nfrom typing import Optional\n\n# Tenant Model\nclass Organization(models.Model):\n    name = models.CharField(max_length=200)\n    slug = models.SlugField(unique=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    def __str__(self):\n        return self.name\n\n# User Profile with Organization\nclass UserProfile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE, related_name='profile')\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    role = models.CharField(max_length=50, default='member')\n\n    def __str__(self):\n        return f\"{self.user.username} @ {self.organization.name}\"\n\n# Multi-tenant Model\nclass Project(models.Model):\n    name = models.CharField(max_length=200)\n    description = models.TextField(blank=True)\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    created_by = models.ForeignKey(User, on_delete=models.CASCADE)\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    class Meta:\n        ordering = ['-created_at']\n        indexes = [\n            models.Index(fields=['organization', '-created_at']),\n        ]\n\n# Schemas\nclass ProjectSchema(BaseModel):\n    id: int\n    name: str\n    description: str\n    is_active: bool\n\n    class Config:\n        from_attributes = True\n\nclass ProjectFormSchema(BaseModel):\n    name: str = \"\"\n    description: str = \"\"\n\nclass ProjectListState(BaseListState):\n    items: list[ProjectSchema] = []\n    create_buffer: ProjectFormSchema = Field(default_factory=ProjectFormSchema)\n    edit_buffer: Optional[ProjectFormSchema] = None\n\n# Multi-tenant Component\n@register_component\nclass OrganizationProjects(TenantScopedMixin, BaseListComponent[ProjectListState]):\n    template_name = \"components/organization_projects.html\"\n    state_class = ProjectListState\n    model = Project\n    tenant_field = 'organization'  # Project.organization field\n\n    search_fields = ['name', 'description']\n    per_page = 25\n    order_by = '-created_at'\n\n    def get_user_tenant(self):\n        \"\"\"Get current user's organization.\"\"\"\n        if not self.is_authenticated:\n            return None\n\n        # Assumes user has a profile with organization\n        if hasattr(self.current_user, 'profile'):\n            return self.current_user.profile.organization\n\n        return None\n\n    def create_item(self):\n        \"\"\"Create project in current tenant.\"\"\"\n        if not self.require_auth():\n            return\n\n        tenant = self.get_user_tenant()\n        if not tenant:\n            self.error(\"No organization found\")\n            return\n\n        try:\n            project = self.model.objects.create(\n                **self.state.create_buffer.dict(),\n                organization=tenant,  # Set tenant\n                created_by=self.current_user\n            )\n            self.refresh()\n            self.success(f\"Created: {project.name}\")\n        except Exception as e:\n            logger.exception(\"Create failed\")\n            self.error(\"Failed to create project\")\n\n    def toggle_active(self, id: int):\n        \"\"\"Custom action with tenant check.\"\"\"\n        tenant = self.get_user_tenant()\n        if not tenant:\n            self.error(\"No organization found\")\n            return\n\n        try:\n            # Verify project belongs to current tenant\n            project = self.model.objects.get(\n                id=id,\n                organization=tenant\n            )\n            project.is_active = not project.is_active\n            project.save()\n            self.refresh()\n\n            status = \"activated\" if project.is_active else \"deactivated\"\n            self.success(f\"{project.name} {status}\")\n        except self.model.DoesNotExist:\n            self.error(\"Project not found in your organization\")\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#tenant-models","title":"Tenant Models","text":""},{"location":"security/tenant-scoped-mixin/#typical-tenant-model","title":"Typical Tenant Model","text":"<pre><code>class Organization(models.Model):\n    name = models.CharField(max_length=200)\n    slug = models.SlugField(unique=True)\n    plan = models.CharField(max_length=50, default='free')\n    is_active = models.BooleanField(default=True)\n    created_at = models.DateTimeField(auto_now_add=True)\n\n    # Optional: limits per plan\n    max_users = models.IntegerField(default=5)\n    max_projects = models.IntegerField(default=10)\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#user-tenant-relationship","title":"User-Tenant Relationship","text":""},{"location":"security/tenant-scoped-mixin/#option-1-onetoone-profile","title":"Option 1: OneToOne Profile","text":"<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n\ndef get_user_tenant(self):\n    return self.current_user.profile.organization\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#option-2-custom-user-model","title":"Option 2: Custom User Model","text":"<pre><code>from django.contrib.auth.models.AbstractUser\n\nclass CustomUser(AbstractUser):\n    current_organization = models.ForeignKey(\n        Organization,\n        on_delete=models.SET_NULL,\n        null=True\n    )\n\ndef get_user_tenant(self):\n    return self.current_user.current_organization\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#option-3-manytomany-user-in-multiple-orgs","title":"Option 3: ManyToMany (User in multiple orgs)","text":"<pre><code>class Organization(models.Model):\n    name = models.CharField(max_length=200)\n    members = models.ManyToManyField(User, through='Membership')\n\nclass Membership(models.Model):\n    user = models.ForeignKey(User, on_delete=models.CASCADE)\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    role = models.CharField(max_length=50)\n\ndef get_user_tenant(self):\n    # From session - user selects which org\n    org_id = self.request.session.get('current_organization_id')\n    if org_id:\n        return Organization.objects.get(id=org_id)\n    return None\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#combining-with-ownershipmixin","title":"Combining with OwnershipMixin","text":"<p>Filter by both tenant AND user:</p> <pre><code>from nitro.security import OwnershipMixin, TenantScopedMixin\n\n@register_component\nclass MyTeamTasks(\n    OwnershipMixin,       # Filter by current user\n    TenantScopedMixin,    # Filter by current team\n    BaseListComponent[TaskListState]\n):\n    model = Task\n    owner_field = 'user'\n    tenant_field = 'team'\n\n    def get_user_tenant(self):\n        return self.current_user.profile.team\n\n    def get_base_queryset(self, search='', filters=None):\n        # Both filters applied\n        qs = self.model.objects.all()\n\n        # First: filter by tenant (team)\n        qs = self.filter_by_tenant(qs)\n\n        # Then: filter by owner (user)\n        qs = self.filter_by_owner(qs)\n\n        # Result: user's tasks within their team\n\n        if search:\n            qs = self.apply_search(qs, search)\n\n        return qs.order_by(self.order_by)\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#security-considerations","title":"Security Considerations","text":""},{"location":"security/tenant-scoped-mixin/#1-always-set-tenant-on-create","title":"1. Always Set Tenant on Create","text":"<pre><code># \u2705 Good - set tenant explicitly\ndef create_item(self):\n    tenant = self.get_user_tenant()\n    if not tenant:\n        self.error(\"No organization\")\n        return\n\n    item = self.model.objects.create(\n        **self.state.create_buffer.dict(),\n        organization=tenant  # Explicit tenant\n    )\n\n# \u274c Bad - letting client set tenant\ndef create_item(self):\n    # Client could send organization_id for another org!\n    item = self.model.objects.create(\n        **self.state.create_buffer.dict()\n    )\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#2-verify-tenant-on-updatedelete","title":"2. Verify Tenant on Update/Delete","text":"<pre><code># \u2705 Good - verify tenant before delete\ndef delete_item(self, id: int):\n    tenant = self.get_user_tenant()\n    if not tenant:\n        return\n\n    try:\n        item = self.model.objects.get(\n            id=id,\n            organization=tenant  # Ensure correct tenant\n        )\n        item.delete()\n    except self.model.DoesNotExist:\n        self.error(\"Not found in your organization\")\n\n# \u274c Bad - trusting that id is valid\ndef delete_item(self, id: int):\n    item = self.model.objects.get(id=id)  # Could be another org's!\n    item.delete()\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#3-handle-missing-tenant","title":"3. Handle Missing Tenant","text":"<pre><code>def get_initial_state(self, **kwargs):\n    tenant = self.get_user_tenant()\n    if not tenant:\n        # No organization - show empty list\n        return MyListState(items=[])\n\n    # Load items for tenant\n    ...\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#4-validate-tenant-exists","title":"4. Validate Tenant Exists","text":"<pre><code>def get_user_tenant(self):\n    if not self.is_authenticated:\n        return None\n\n    try:\n        return self.current_user.profile.organization\n    except (AttributeError, Organization.DoesNotExist):\n        logger.warning(f\"User {self.current_user.id} has no organization\")\n        return None\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#advanced-patterns","title":"Advanced Patterns","text":""},{"location":"security/tenant-scoped-mixin/#hierarchical-tenants","title":"Hierarchical Tenants","text":"<pre><code>class Department(models.Model):\n    name = models.CharField(max_length=200)\n    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)\n    parent = models.ForeignKey('self', null=True, on_delete=models.CASCADE)\n\nclass Project(models.Model):\n    name = models.CharField(max_length=200)\n    department = models.ForeignKey(Department, on_delete=models.CASCADE)\n\n@register_component\nclass DepartmentProjects(TenantScopedMixin, BaseListComponent):\n    model = Project\n    tenant_field = 'department'\n\n    def get_user_tenant(self):\n        # From session - user selects department\n        dept_id = self.request.session.get('current_department')\n        if dept_id:\n            # Verify department belongs to user's organization\n            return Department.objects.get(\n                id=dept_id,\n                organization=self.current_user.profile.organization\n            )\n        return None\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#tenant-switching","title":"Tenant Switching","text":"<pre><code>@register_component\nclass TenantSwitcher(NitroComponent[TenantSwitcherState]):\n    def switch_organization(self, org_id: int):\n        \"\"\"Allow user to switch between their organizations.\"\"\"\n        # Verify user is member of this org\n        try:\n            membership = Membership.objects.get(\n                user=self.current_user,\n                organization_id=org_id\n            )\n\n            # Store in session\n            self.request.session['current_organization_id'] = org_id\n            self.success(f\"Switched to {membership.organization.name}\")\n\n        except Membership.DoesNotExist:\n            self.error(\"You're not a member of this organization\")\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#tenant-aware-permissions","title":"Tenant-Aware Permissions","text":"<pre><code>from nitro.security import TenantScopedMixin, PermissionMixin\n\n@register_component\nclass TenantDocuments(\n    TenantScopedMixin,\n    PermissionMixin,\n    BaseListComponent\n):\n    model = Document\n    tenant_field = 'organization'\n\n    def get_user_tenant(self):\n        return self.current_user.profile.organization\n\n    def check_permission(self, action: str) -&gt; bool:\n        \"\"\"Permissions based on user's role in org.\"\"\"\n        try:\n            membership = Membership.objects.get(\n                user=self.current_user,\n                organization=self.get_user_tenant()\n            )\n\n            if action == 'delete':\n                return membership.role in ['admin', 'manager']\n\n            if action == 'create':\n                return membership.role != 'viewer'\n\n            return True  # read allowed for all members\n\n        except Membership.DoesNotExist:\n            return False\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#best-practices","title":"Best Practices","text":""},{"location":"security/tenant-scoped-mixin/#1-always-implement-get_user_tenant","title":"1. Always Implement get_user_tenant()","text":"<pre><code># \u2705 Required\ndef get_user_tenant(self):\n    return self.current_user.profile.organization\n\n# \u274c Will raise NotImplementedError\n# (Don't skip this method!)\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#2-add-database-indexes","title":"2. Add Database Indexes","text":"<pre><code>class Project(models.Model):\n    organization = models.ForeignKey(\n        Organization,\n        on_delete=models.CASCADE,\n        db_index=True  # \u2705 Index for fast filtering\n    )\n\n    class Meta:\n        indexes = [\n            # \u2705 Composite index for tenant + created_at\n            models.Index(fields=['organization', '-created_at']),\n        ]\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#3-optimize-related-queries","title":"3. Optimize Related Queries","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    qs = self.filter_by_tenant(self.model.objects.all())\n\n    # \u2705 Eager load tenant data\n    qs = qs.select_related('organization')\n\n    return qs\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#4-log-tenant-access","title":"4. Log Tenant Access","text":"<pre><code>def get_base_queryset(self, search='', filters=None):\n    tenant = self.get_user_tenant()\n\n    # \u2705 Log for audit trail\n    logger.info(\n        f\"User {self.current_user.id} accessing \"\n        f\"data for org {tenant.id if tenant else 'None'}\"\n    )\n\n    qs = self.filter_by_tenant(self.model.objects.all())\n    return qs\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#troubleshooting","title":"Troubleshooting","text":""},{"location":"security/tenant-scoped-mixin/#empty-list-no-items","title":"Empty List (No Items)","text":"<p>Check: 1. Does user have a tenant set? 2. Is <code>tenant_field</code> correct? 3. Do items have the correct tenant set?</p> <pre><code>def get_initial_state(self, **kwargs):\n    tenant = self.get_user_tenant()\n    print(f\"Tenant: {tenant}\")\n    print(f\"Tenant field: {self.tenant_field}\")\n\n    qs = self.filter_by_tenant(self.model.objects.all())\n    print(f\"Count: {qs.count()}\")\n    ...\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#notimplementederror","title":"NotImplementedError","text":"<p>Means you forgot to implement <code>get_user_tenant()</code>:</p> <pre><code># \u2705 Always implement this method\ndef get_user_tenant(self):\n    return self.current_user.profile.organization\n</code></pre>"},{"location":"security/tenant-scoped-mixin/#see-also","title":"See Also","text":"<ul> <li>OwnershipMixin - Filter by user ownership</li> <li>PermissionMixin - Custom permissions</li> <li>Security Overview - Security best practices</li> </ul>"}]}